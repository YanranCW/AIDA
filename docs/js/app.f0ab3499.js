(function(t){function e(e){for(var a,r,s=e[0],l=e[1],c=e[2],p=0,v=[];p<s.length;p++)r=s[p],o[r]&&v.push(o[r][0]),o[r]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);u&&u(e);while(v.length)v.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,s=1;s<n.length;s++){var l=n[s];0!==o[l]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},o={1:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;i.push([38,0]),n()})({"0nqO":function(t,e,n){"use strict";var a=n("uMDi"),o=n.n(a);o.a},"21Bo":function(t,e,n){"use strict";var a=n("u+oy"),o=n.n(a);o.a},"2iM7":function(t,e,n){},35:function(t,e){},36:function(t,e){},38:function(t,e,n){t.exports=n("Vtdi")},"3Hms":function(t,e,n){},"3V59":function(t,e,n){},"62nV":function(t,e,n){},"74Xt":function(t,e,n){"use strict";var a=n("wKg8"),o=n.n(a);o.a},"92k3":function(t,e,n){},"9ler":function(t,e,n){},"9mNs":function(t,e,n){},"9u3K":function(t,e,n){t.exports=n.p+"img/slide_example.b5ce0fe9.png"},CWyc:function(t,e,n){},DRDL:function(t,e,n){},DzNT:function(t,e,n){t.exports=n.p+"img/fresh.2a715dca.png"},EVYb:function(t,e,n){t.exports=n.p+"img/simple_example.2424b2f1.png"},HPk6:function(t,e,n){},"I/f8":function(t,e,n){"use strict";var a=n("Oj44"),o=n.n(a);o.a},ILqV:function(t,e,n){"use strict";var a=n("nZ/l"),o=n.n(a);o.a},Js6O:function(t,e,n){},"KA+E":function(t,e,n){"use strict";var a=n("92k3"),o=n.n(a);o.a},KINE:function(t,e,n){},MKo1:function(t,e,n){"use strict";var a=n("xolY"),o=n.n(a);o.a},NOk4:function(t,e,n){"use strict";var a=n("CWyc"),o=n.n(a);o.a},NgLI:function(t,e,n){"use strict";var a=n("9mNs"),o=n.n(a);o.a},OIBd:function(t,e,n){"use strict";var a=n("HPk6"),o=n.n(a);o.a},Oj44:function(t,e,n){},Qxgu:function(t,e,n){"use strict";var a=n("mhMe"),o=n.n(a);o.a},UM2n:function(t,e,n){"use strict";var a=n("q7Hr"),o=n.n(a);o.a},VcZT:function(t,e,n){"use strict";var a=n("3V59"),o=n.n(a);o.a},Vtdi:function(t,e,n){"use strict";n.r(e);n("VRzm");var a=n("Kw5r"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{toolbar:"","pointer-events":"none"}},[n("v-content",[n("router-view")],1)],1)},i=[],r=n("KHd+"),s={},l=Object(r["a"])(s,o,i,!1,null,null,null),c=l.exports,u=n("jE9Z"),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"home"}},[n("v-layout",{attrs:{id:"hero",row:""}},[n("v-flex",{attrs:{xs12:"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{id:"title-container",xs12:""}},[n("h1",{attrs:{id:"title"}},[t._v(" AIDA ")])]),n("v-flex",{attrs:{id:"subtitle-container",xs12:""}},[n("h2",{attrs:{id:"subtitle"}},[t._v(" Annotate Image Data by Assignment ")])]),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{dark:"",block:"",to:"/example"}},[n("v-icon",[t._v("web")]),n("span",{staticClass:"button-text"},[t._v("\n              Get Started\n            ")])],1)],1),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{light:"",block:"",href:"https://github.com/alanaberdeen/AIDA"}},[n("i",{staticClass:"icon text--darken-1 fab fa-github",attrs:{"aria-hidden":"true"}}),n("span",{staticClass:"button-text"},[t._v("\n              Github\n            ")])])],1),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{light:"",block:"",href:"https://aida.gitbook.io/docs/"}},[n("v-icon",[t._v("fa-book")]),n("span",{staticClass:"button-text"},[t._v("\n              Docs\n            ")])],1)],1)],1)],1)],1),n("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",lg8:""}},[n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            The Basic Idea\n          ")]),n("p",[t._v("\n            AIDA brings an open source and web-based workflow to image annotation.\n          ")]),n("p",[t._v("\n            Currently, image annotation is largely confined to single computer\n            shrink-wrapped software with limited interactive capabilities and\n            few, usually closed, data formats. AIDA is a web interface that enables distributed teams\n            of researchers to direclty annotate images with easy\n            to use on screen drawing tools. AIDA supports the\n            creation of well defined annotation trials which include\n            a series of high resolution images or video and a\n            specific set of annotation tasks.\n          ")]),n("p",[t._v("\n            The trial and annotation data can be accessed\n            programatically via a "),n("a",{attrs:{href:"https://aida.gitbook.io/docs/api-reference"}},[t._v("\n              documented API. ")])])])]),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            How has it been implemented?\n          ")]),n("p",[t._v("\n            The user interface is a "),n("a",{attrs:{href:"https://vuejs.org/"}},[t._v("VueJS")]),t._v(" Single Page Application\n            built to web standards, encapsulating and interacting\n            with two other significant JavaScript libraries:\n            "),n("a",{attrs:{href:"https://openseadragon.github.io/"}},[t._v("\n            OpenSeaDragon")]),t._v(" to manipulate the high-res images\n            and "),n("a",{attrs:{href:"http://paperjs.org/"}},[t._v("PaperJS")]),t._v(" to\n            provide the drawing functionality.\n            This interface generates a JSON file that is written\n            to a database via a web API. Login enables specific\n            configuration of the tool for different trials\n            and tasks.\n          ")])])]),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            What's planned?\n          ")]),n("p",[t._v("\n            The software is published as Open Source under the permissive\n            "),n("a",{attrs:{href:"https://github.com/alanaberdeen/AIDA/blob/master/LICENSE"}},[t._v("\n            MIT license ")]),t._v(" and can be modified by anyone.\n            The "),n("a",{attrs:{href:"https://aida.gitbook.io/docs/api-reference"}},[t._v(" API ")]),t._v("\n            will also be public.\n\n            The next stage of development will be to integrate\n            intelligent tools that leverage machine learning techniques.\n            We hope to enhance the ability of the user to quickly and\n            accuratley mark up images.\n          ")])])]),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            About\n          ")]),n("p",[t._v("\n            This is a project of Alan Aberdeen, Jens Rittscher,\n            and Nasullah Khalid at the University of Oxford,\n            specifically the\n            "),n("a",{attrs:{href:"http://www.ludwig.ox.ac.uk/jens-rittscher-group-page"}},[t._v("\n              Quantitative Biological Imaging Group\n            ")]),t._v(".\n\n          ")])])])],1)],1)],1)},v=[],d={},f=d,h=(n("okNp"),Object(r["a"])(f,p,v,!1,null,"63c1f2ba",null)),m=h.exports,g=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("header",[n("app-toolbar")],1),n("v-container",{attrs:{id:"content-container",fluid:""}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{id:"left-panel","d-flex":""}},[n("app-tools")],1),n("v-flex",{attrs:{"d-flex":""}},[n("div",{attrs:{id:"centre-container"}},[n("div",{attrs:{id:"stepper"}},[n("app-stepper")],1),n("div",{attrs:{id:"view-container"}},[n("app-view",{attrs:{type:t.type}})],1)])]),n("v-flex",{attrs:{id:"right-panel","d-flex":""}},[n("app-studio")],1)],1)],1)],1)},b=[],y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pointers-please elevation-2",attrs:{id:"toolsPanel"}},[n("v-list",{attrs:{id:"toolList",dense:""}},[t.getStepTools().includes("pan")?n("app-pan",{attrs:{active:"pan"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pan"}}}):t._e(),n("v-divider"),t.getStepTools().includes("move")?n("app-move",{attrs:{active:"move"===t.activeTool},nativeOn:{click:function(e){t.activeTool="move"}}}):t._e(),t.getStepTools().includes("node")?n("app-node",{attrs:{active:"node"===t.activeTool},nativeOn:{click:function(e){t.activeTool="node"}}}):t._e(),n("v-divider"),t.getStepTools().includes("circle")?n("app-circle",{attrs:{active:"circle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="circle"}}}):t._e(),t.getStepTools().includes("rectangle")?n("app-rectangle",{attrs:{active:"rectangle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="rectangle"}}}):t._e(),t.getStepTools().includes("pen")?n("app-pen",{attrs:{active:"pen"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pen"}}}):t._e(),t.getStepTools().includes("pencil")?n("app-pencil",{attrs:{active:"pencil"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pencil"}}}):t._e(),n("v-divider"),t.getStepTools().includes("count")?n("app-count",{attrs:{active:"count"===t.activeTool},nativeOn:{click:function(e){t.activeTool="count"}}}):t._e(),n("v-divider"),t.getStepTools().includes("delete")?n("app-delete",{attrs:{active:"delete"===t.activeTool},nativeOn:{click:function(e){t.activeTool="delete"}}}):t._e(),n("v-divider"),t.getStepTools().includes("faces")?n("app-faces",{attrs:{active:"faces"===t.activeTool},nativeOn:{click:function(e){t.activeTool="faces"}}}):t._e(),t.getStepTools().includes("megas")?n("app-megas",{attrs:{active:"megas"===t.activeTool},nativeOn:{click:function(e){t.activeTool="megas"}}}):t._e()],1)],1)},w=[],O=n("yT7P"),C=n("L2JU"),k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-circle":!0,faIcons:!t.active,faIconsActive:t.active}})]),n("span",[t._v(" Circle Tool ")])],1)],1)},j=[],x=(n("bHtr"),n("IiLU")),S=n.n(x),_={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCircle:null,strokeWidth:2,radius:2e3}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.editor.activeStep}})),created:function(){var t=this,e=function(e){t.toolCircle.minDistance=4*t.strokeWidth},n=function(e){t.toolCircle.minDistance=0,t.radius=t.calculateDistance(e.downPoint,e.point);var n=new S.a.Path.Line(e.downPoint,e.point);n.strokeColor=new S.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.add(e.point),n.removeOn({drag:!0,down:!0,up:!0});var a=new S.a.Path.Circle(e.downPoint,t.radius);a.strokeColor=new S.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),a.strokeWidth=t.strokeWidth,a.removeOn({drag:!0,down:!0,up:!0})},a=function(e){var n=new S.a.Path.Circle(e.downPoint,t.radius);n.strokeColor=new S.a.Color(t.getDefaultLayerColor().stroke),n.strokeWidth=t.strokeWidth,n.fillColor=new S.a.Color(t.getDefaultLayerColor().fill),n.data.countable=!0,n.data.type="circle",n.data.class="",$a.$emit("updateMarkerCount")};this.toolCircle=new S.a.Tool,this.toolCircle.onMouseDown=e,this.toolCircle.onMouseDrag=n,this.toolCircle.onMouseUp=a},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),Object(C["c"])(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolCircle.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)},calculateDistance:function(t,e){var n=t.x,a=t.y,o=e.x,i=e.y,r=Math.sqrt(Math.pow(o-n,2)+Math.pow(i-a,2));return r}})},D=_,A=(n("y4JK"),Object(r["a"])(D,k,j,!1,null,"735b03e3",null)),I=A.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        crop_landscape\n      ")])],1),n("span",[t._v(" Rectangel Tool ")])],1)],1)},L=[],W={props:{active:{type:Boolean,default:!1}},data:function(){return{toolRect:null,strokeWidth:2}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=function(e){var n=new S.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new S.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,up:!0})},n=function(e){var n=new S.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new S.a.Color(t.getDefaultLayerColor().stroke),n.fillColor=new S.a.Color(t.getDefaultLayerColor().fill),n.strokeWidth=t.strokeWidth,n.data.type="rectangle",n.data.class=""};this.toolRect=new S.a.Tool,this.toolRect.onMouseDrag=e,this.toolRect.onMouseUp=n},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),Object(C["c"])(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolRect.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)}})},P=W,E=(n("zeKo"),Object(r["a"])(P,T,L,!1,null,null,null)),M=E.exports,Z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        timeline\n      ")])],1),n("span",[t._v(" Path Tool ")])],1)],1)},N=[],z={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPen:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="");var n=t.path.hitTest(e.point,t.hitOptions);e.modifiers.option?(t.path.closed=!0,t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):n&&n.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new S.a.Color(t.getDefaultLayerColor().fill),t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):n&&n.segment===t.path.lastSegment?(t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.path.smooth())},n=function(e){var n=S.a.project.hitTest(e.point,t.hitOptions);n?n.segment===n.item.firstSegment?(t.path.closed=!0,t.path.selected=!1):n.segment!==n.item.firstSegment&&n.segment!==n.item.lastSegment||(t.path.selected=!1):t.path&&t.path.data.active&&(t.path.selected=!0,t.path.closed=!1)};this.toolPen=new S.a.Tool,this.toolPen.onMouseDown=e,this.toolPen.onMouseMove=n},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),Object(C["c"])(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolPen.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new S.a.Path;return t.strokeColor=new S.a.Color(this.getDefaultLayerColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},$=z,R=(n("qK+1"),Object(r["a"])($,Z,N,!1,null,null,null)),K=R.exports,B=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-pencil-alt":!0,faIcons:!t.active,faIconsActive:t.active}})]),n("span",[t._v(" Pencil Tool ")])],1)],1)},q=[],H={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPencil:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="")},n=function(e){t.path.add(e.point);var n=t.path.hitTest(e.point,t.hitOptions);n&&n.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new S.a.Color(t.getDefaultLayerColor().fill)):(t.path.closed=!1,t.path.fillColor=new S.a.Color({hue:200,saturation:.7,lightness:.5,alpha:0}))},a=function(e){var n=t.path.hitTest(e.point,t.hitOptions);n&&n.segment===t.path.firstSegment&&(t.path.closed=!0,t.path.fillColor=new S.a.Color(t.getDefaultLayerColor().fill)),t.path.selected=!1,t.path.simplify(),t.path.data.active=!1};this.toolPencil=new S.a.Tool,this.toolPencil.onMouseDown=e,this.toolPencil.onMouseDrag=n,this.toolPencil.onMouseUp=a},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),Object(C["c"])(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolPencil.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth},this.toolPencil.minDistance=5*this.strokeWidth},newPath:function(){var t=new S.a.Path;return t.strokeColor=new S.a.Color(this.getDefaultLayerColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},U=H,F=(n("74Xt"),Object(r["a"])(U,B,q,!1,null,null,null)),V=F.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!t.active,faIconsActive:t.active}})]),n("span",[t._v(" Move Tool ")])],1)],1)},G=[],Q=(n("rGqo"),n("f3/d"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolMove:null,selectOptions:null,strokeWidth:2}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=[],a=null,o="",i=function(i){if(e=S.a.project.hitTest(i.point,t.selectOptions),!e||"bounds"===e.type||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type?e&&"bounds"===e.type?o="transform":(n=[],o="select"):(a&&a.hitTest(i.point,t.selectOptions)||(i.modifiers.shift?n.push(e.item):n=[e.item]),o="move"),S.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var r in n)if(n[r].data.selectWith)for(var s in n[r].data.selectWith)n.push(n[r].data.selectWith[s]);a=new S.a.Group(n),a.selected=!0,a.bounds.selected=!0}},r=function(i){if("select"===o){var r=new S.a.Shape.Rectangle(i.downPoint,i.point);if(r.strokeColor="#4D88D4",r.fillColor="#A3C5E8",r.opacity=.3,r.strokeWidth=t.strokeWidth,r.removeOn({drag:!0,down:!0,up:!0}),n=S.a.project.getItems({class:"Path",inside:r.bounds}),S.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var s in n)if(n[s].data.selectWith)for(var l in n[s].data.selectWith)n.push(n[s].data.selectWith[l]);a=new S.a.Group(n),a.selected=!0}}else if("move"===o)a.position=a.position.add(i.delta);else if("transform"===o){var c=null,u=null,p=null;e&&"top-left"===e.name?(c=i.point.x-a.bounds.topRight.x,u=i.point.y-a.bounds.bottomLeft.y,p=a.bounds.bottomRight):e&&"top-right"===e.name?(c=i.point.x-a.bounds.topLeft.x,u=i.point.y-a.bounds.bottomRight.y,p=a.bounds.bottomLeft):e&&"bottom-right"===e.name?(c=i.point.x-a.bounds.bottomLeft.x,u=i.point.y-a.bounds.topRight.y,p=a.bounds.topLeft):e&&"bottom-left"===e.name&&(c=i.point.x-a.bounds.bottomRight.x,u=i.point.y-a.bounds.topLeft.y,p=a.bounds.topRight);var v=Math.abs(c/a.bounds.width),d=Math.abs(u/a.bounds.height);a.scale(v,d,p)}},s=function(t){a&&(a.bounds.selected=!0),o="",$a.$emit("selectionChanged",S.a.project.selectedItems),$a.$emit("updateMarkerCount")},l=function(e){if(a&&a.hitTest(e.point,t.selectOptions)){var n=a.hitTest(e.point,t.selectOptions);"bottom-right"===n.name||"top-left"===n.name?S.a.view.element.style.cursor="nwse-resize":"bottom-left"===n.name||"top-right"===n.name?S.a.view.element.style.cursor="nesw-resize":"fill"===n.type&&(S.a.view.element.style.cursor="move")}else{var o=document.getElementById("annotation-canvas");o.style.cursor="auto"}},c=function(t){"backspace"!==t.key&&"delete"!==t.key||(S.a.project.selectedItems&&S.a.project.selectedItems.forEach(function(t){"Layer"!==t.className&&t.remove()}),$a.$emit("selectionChanged",S.a.project.selectedItems),$a.$emit("updateMarkerCount"))};this.toolMove=new S.a.Tool,this.toolMove.onMouseDown=i,this.toolMove.onMouseDrag=r,this.toolMove.onMouseUp=s,this.toolMove.onMouseMove=l,this.toolMove.onKeyUp=c},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolMove.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}})}),Y=Q,X=(n("iggO"),Object(r["a"])(Y,J,G,!1,null,null,null)),tt=X.exports,et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[t.active?n("v-icon",{staticClass:"blue--text text--darken-1"},[t._v("\n        lock_open\n      ")]):n("v-icon",{staticClass:"grey--text text--darken-2"},[t._v("\n        lock_outline\n      ")])],1),n("span",[t._v(" Lock View Tool ")])],1)],1)},nt=[],at={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPan:null}},mounted:function(){this.initialiseTool()},methods:{initialiseTool:function(){document.getElementById("annotation-canvas").setAttribute("class","pointers-no")}}},ot=at,it=(n("I/f8"),Object(r["a"])(ot,et,nt,!1,null,null,null)),rt=it.exports,st=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!t.active,faIconsActive:t.active}})]),n("span",[t._v(" Node Tool ")])],1)],1)},lt=[],ct={props:{active:{type:Boolean,default:!1}},data:function(){return{toolNode:null,hitOptions:null}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=null,a=function(a){e=S.a.project.hitTest(a.point,t.hitOptions),e?e.item.selected?"stroke"===e.type?n="adding-node":"segment"===e.type?(S.a.project.deselectAll(),e.item.selected=!0,e.segment.selected=!0,e.segment.handleIn.selected=!0,e.segment.handleOut.selected=!0,n="adjusting-segment"):"handle-out"!==e.type&&"handle-in"!==e.type||(n="adjusting-handle"):(e.item.selected=!0,n="selecting"):S.a.project.deselectAll()},o=function(t){e&&"adjusting-segment"===n?e.segment.point=e.segment.point.add(t.delta):e&&"handle-out"===e.type&&"adjusting-handle"===n?e.segment.handleOut=e.segment.handleOut.add(t.delta):e&&"handle-in"===e.type&&"adjusting-handle"===n&&(e.segment.handleIn=e.segment.handleIn.add(t.delta))};this.toolNode=new S.a.Tool,this.toolNode.onMouseDown=a,this.toolNode.onMouseDrag=o},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolNode.activate();var t=this.imageWidth/(100*this.viewportZoom);this.hitOptions={segments:!0,stroke:!0,handles:!0,fill:!0,tolerance:t}}})},ut=ct,pt=(n("kPuA"),Object(r["a"])(ut,st,lt,!1,null,null,null)),vt=pt.exports,dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        filter_9_plus\n      ")])],1),n("span",[t._v(" Count Tool ")])],1)],1)},ft=[],ht={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCount:null,strokeWidth:2}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this;$a.$on("updateMarkerCount",function(){var t=S.a.project.getItems({data:{type:"counter"}}),e=S.a.project.getItems({className:"Path",data:{countable:!0}});for(var n in t){var a=0;for(var o in e)e[o].isInside(t[n].data.rect.bounds)&&(a+=1);t[n].content=a}});var e=function(e){var n=new S.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new S.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,up:!0})},n=function(e){var n=new S.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new S.a.Color({hue:46,saturation:1,lightness:.65,alpha:1}),n.strokeWidth=t.strokeWidth;var a=new S.a.PointText(n.bounds.topLeft);a.translate(3*t.strokeWidth,2*-t.strokeWidth),a.fillColor="black",a.fontSize=12*t.strokeWidth+"px",a.data.rect=n,a.data.type="counter",$a.$emit("updateMarkerCount");var o=a.handleBounds.topRight.add(4*t.strokeWidth,0),i=new S.a.Path.Rectangle(n.strokeBounds.topLeft,o);i.fillColor=n.strokeColor,i.moveBelow(a),n.data.selectWith=[i,a],a.data.selectWith=[n,i,a],i.data.selectWith=[a,n]};this.toolCount=new S.a.Tool,this.toolCount.onMouseDrag=e,this.toolCount.onMouseUp=n},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolCount.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),S.a.project.deselectAll()}})},mt=ht,gt=(n("rhE5"),Object(r["a"])(mt,dt,ft,!1,null,null,null)),bt=gt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-delete"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        delete\n      ")])],1),n("span",[t._v(" Delete Tool ")])],1)],1)},wt=[],Ot={props:{active:{type:Boolean,default:!1}},data:function(){return{toolDelete:null,selectOptions:null,strokeWidth:2}},computed:Object(O["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=[],a=null,o=function(o){if(e=S.a.project.hitTest(o.point,t.selectOptions),n=!e||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type&&"bounds"!==e.type?[]:[e.item],S.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var i in n)if(n[i].data.selectWith)for(var r in n[i].data.selectWith)n.push(n[i].data.selectWith[r]);a=new S.a.Group(n),a.selected=!0}},i=function(e){var o=new S.a.Shape.Rectangle(e.downPoint,e.point);if(o.strokeColor="#4D88D4",o.fillColor="#A3C5E8",o.opacity=.3,o.strokeWidth=t.strokeWidth,o.removeOn({drag:!0,down:!0,up:!0}),n=S.a.project.getItems({class:"Path",inside:o.bounds}),S.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var i in n)if(n[i].data.selectWith)for(var r in n[i].data.selectWith)n.push(n[i].data.selectWith[r]);a=new S.a.Group(n),a.selected=!0}},r=function(t){a&&a.remove(),$a.$emit("selectionChanged",S.a.project.selectedItems),$a.$emit("updateMarkerCount")};this.toolDelete=new S.a.Tool,this.toolDelete.onMouseDown=o,this.toolDelete.onMouseDrag=i,this.toolDelete.onMouseUp=r},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolDelete.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}})},Ct=Ot,kt=(n("KA+E"),Object(r["a"])(Ct,yt,wt,!1,null,null,null)),jt=kt.exports,xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.activate(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-user-tag":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),n("span",[t._v(" Faces Tool ")])],1)],1)},St=[],_t=n("vDqi"),Dt=n.n(_t),At={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:Object(O["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),methods:Object(O["a"])({},Object(C["c"])(["getDefaultLayerColor"]),{activate:function(){var t=this;this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.loading=!0,Dt.a.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAeCFXV_oK3QjGQdypK_2hVTH_ck2mshFw",{requests:[{image:{source:{imageUri:this.imageUri}},features:{type:"FACE_DETECTION"},imageContext:{}}]}).then(function(e){t.loading=!1,console.log(e);var n=e.data.responses[0].faceAnnotations;for(var a in n){var o=[];for(var i in n[a].boundingPoly.vertices)o.push(new S.a.Point(n[a].boundingPoly.vertices[i].x,n[a].boundingPoly.vertices[i].y));var r=new S.a.Path(o);r.strokeColor=new S.a.Color(t.getDefaultLayerColor().stroke),r.closed=!0,r.strokeWidth=t.strokeWidth,r.data.type="rectangle",r.data.class="face"}}).catch(function(e){t.loading=!1,console.log("could not apply face detection, returned the following error: \n \n"+e)})},drawBoundingFaces:function(t){}})},It=At,Tt=(n("NOk4"),Object(r["a"])(It,xt,St,!1,null,"d1f42724",null)),Lt=Tt.exports,Wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        youtube_searched_for\n      ")])],1),n("span",[t._v(" Megakaryocyte Classifier ")])],1)],1)},Pt=[],Et={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:Object(O["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},tiledImage:function(t){return t.image.OSDviewer.world.getItemAt(0)},OSDviewer:function(t){return t.image.OSDviewer}})),created:function(){var t=this,e=function(e){var n=new S.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new S.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,up:!0})},n=function(e){console.log("The event points are: "),console.log("downTile: "+t.OSDviewer.world.getItemAt(0).source)};this.toolMega=new S.a.Tool,this.toolMega.onMouseDrag=e,this.toolMega.onMouseUp=n},methods:Object(O["a"])({},Object(C["b"])(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolMega.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)}})},Mt=Et,Zt=(n("NgLI"),Object(r["a"])(Mt,Wt,Pt,!1,null,"8b28f972",null)),Nt=Zt.exports,zt={components:{"app-circle":I,"app-rectangle":M,"app-pen":K,"app-move":tt,"app-pan":rt,"app-node":vt,"app-pencil":V,"app-count":bt,"app-delete":jt,"app-faces":Lt,"app-megas":Nt},data:function(){return{activeTool:"pan"}},computed:Object(O["a"])({},Object(C["d"])({activeStep:function(t){return t.editor.activeStep},tools:function(t){return t.editor.tools}})),methods:Object(O["a"])({},Object(C["c"])(["getStepTools"]))},$t=zt,Rt=(n("VcZT"),Object(r["a"])($t,y,w,!1,null,"cfd9f0a6",null)),Kt=Rt.exports,Bt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pointers-please studioPanel elevation-2"},[n("app-navigator"),n("app-layers"),n("app-images"),n("app-properties")],1)},qt=[],Ht=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Navigator\n      ")])],1),n("div",{attrs:{id:"nav-container"}},[n("div",{attrs:{id:"navigator"}})]),n("div",{attrs:{id:"tab-item"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs9:""}},[n("v-slider",{attrs:{value:t.getZoom,max:t.getMaxZoom,min:"0",step:"0"},on:{input:t.setZoom}})],1),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{value:t.getZoom,suffix:"x","single-line":""},on:{change:t.setZoom},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setZoom(e):null}}})],1)],1)],1)],1)],1)},Ut=[],Ft={computed:Object(O["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])(["getZoom","getMaxZoom"])),methods:Object(O["a"])({},Object(C["b"])(["setZoom"]))},Vt=Ft,Jt=(n("ZHcJ"),Object(r["a"])(Vt,Ht,Ut,!1,null,"48161b0c",null)),Gt=Jt.exports,Qt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Layers\n      ")]),n("v-spacer"),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.newLayer(e)}}},[n("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          add\n        ")])],1)],1),n("v-list",{attrs:{id:"list"}},t._l(t.layers,function(e,a){return n("v-list-group",{key:a,attrs:{"no-action":""}},[n("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.selectLayer(a)}},slot:"activator"},[n("v-list-tile-content",[n("v-list-tile-title",{class:[t.activeLayer===a?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Layer "+a)+"\n            ")])],1)],1),n("div",{attrs:{id:"controls"}},[n("v-tabs",{attrs:{left:"",color:"transparent"}},[n("v-tab",[n("v-icon",[t._v(" visibility ")])],1),n("v-tab",[n("v-icon",[t._v(" text_format ")])],1),n("v-tab",[n("v-icon",[t._v(" delete ")])],1),n("v-tabs-items",{attrs:{id:"tab-items"}},[n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs9:""}},[n("v-slider",{attrs:{value:null!=e.opacity?100*e.opacity:100,max:"100"},on:{input:t.setLayerOpacity}})],1),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{value:e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setLayerOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerOpacity(e):null}}})],1)],1)],1)]),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-text-field",{attrs:{value:e.name?e.name:"Layer "+a,"single-line":""},on:{change:t.setLayerName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerName(e):null}}})],1)]),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteLayer}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},Yt=[],Xt={computed:Object(O["a"])({},Object(C["d"])({layers:function(t){return t.annotation.project.layers},activeLayer:function(t){return t.editor.activeLayer}})),methods:Object(O["a"])({},Object(C["b"])(["setLayerOpacity","newLayer","exportLayerJSON","setActiveLayer","setLayerOpacity","setLayerName","deleteLayer"]),{selectLayer:function(t){this.setActiveLayer(t)}})},te=Xt,ee=(n("0nqO"),Object(r["a"])(te,Qt,Yt,!1,null,"56297576",null)),ne=ee.exports,ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Images\n      ")])],1),n("v-list",{attrs:{id:"list"}},t._l(t.getChannels,function(e,a){return n("v-list-group",{key:a,attrs:{"no-action":""}},[n("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.setActiveChannel(a)}},slot:"activator"},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n              "+t._s(e.name?e.name:"Channel "+a)+"\n            ")])],1)],1),n("div",{attrs:{id:"controls"}},[n("v-tabs",{attrs:{left:"",color:"transparent"}},[n("v-tab",[n("v-icon",[t._v(" visibility ")])],1),n("v-tab",[n("v-icon",[t._v(" text_format ")])],1),n("v-tab",[n("v-icon",[t._v(" delete ")])],1),n("v-tabs-items",{attrs:{id:"tab-items"}},[n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs9:""}},[n("v-slider",{attrs:{step:"0",max:"1"},on:{input:t.setChannelOpacity},model:{value:e.opacity,callback:function(n){t.$set(e,"opacity",n)},expression:"channel.opacity"}})],1),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{value:null!==e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setChannelOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelOpacity(e):null}}})],1)],1)],1)]),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-text-field",{attrs:{value:e.name?e.name:"Channel "+a,"single-line":""},on:{change:t.setChannelName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelName(e):null}}})],1)]),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteChannel}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},oe=[],ie={computed:Object(O["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])(["getChannels"])),methods:Object(O["a"])({},Object(C["b"])(["setChannelOpacity","setActiveChannel","setChannelName","deleteChannel"]))},re=ie,se=(n("oW1W"),Object(r["a"])(re,ae,oe,!1,null,"b46fe942",null)),le=se.exports,ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Properties\n      ")]),n("v-spacer")],1),n("v-list",{attrs:{id:"list"}},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            No. selected items:\n          ")])],1),n("v-list-tile-action",[t._v("\n          "+t._s(t.numItems)+"\n        ")])],1),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Fill colour:\n          ")])],1),n("v-list-tile-action",[n("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[n("colour-picker",{staticClass:"pointers-please",attrs:{color:t.groupFillColor,type:"fill"}})],1)],1)],1),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Stroke colour:\n          ")])],1),n("v-list-tile-action",[n("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[n("colour-picker",{staticClass:"pointers-please",attrs:{color:t.groupStrokeColor,type:"stroke"}})],1)],1)],1)],1)],1)],1)},ue=[],pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"225px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("a",{attrs:{slot:"activator"},slot:"activator"},[n("div",{staticClass:"color-tile",style:{"background-color":t.color.style}})]),n("v-card",[n("colour-picker",{attrs:{id:"picker"},model:{value:t.colorPick,callback:function(e){t.colorPick=e},expression:"colorPick"}})],1)],1)},ve=[],de=n("w0Wi"),fe={components:{"colour-picker":de["Chrome"]},props:{color:{type:Object,default:function(){return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}},type:{type:String,default:function(){return"fill"}}},data:function(){return{dialog:!1,colorPick:this.color.obj}},computed:Object(O["a"])({},Object(C["d"])({paperScope:function(t){return t.annotation.paperScope}})),watch:{dialog:function(t){if(!0===t)this.colorPick=this.color.obj;else if(S.a.project.selectedItems.length>1){var e=S.a.project.getItem({selected:!0,className:"Group"});"fill"===this.type&&this.colorPick.hsl?e.fillColor=new S.a.Color({hue:this.colorPick.hsl.h,saturation:this.colorPick.hsl.s,lightness:this.colorPick.hsl.l,alpha:this.colorPick.hsl.a}):"stroke"===this.type&&this.colorPick.hsl&&(e.strokeColor=new S.a.Color({hue:this.colorPick.hsl.h,saturation:this.colorPick.hsl.s,lightness:this.colorPick.hsl.l,alpha:this.colorPick.hsl.a})),$a.$emit("selectionChanged",S.a.project.selectedItems)}}}},he=fe,me=(n("ug/q"),Object(r["a"])(he,pe,ve,!1,null,"17beb744",null)),ge=me.exports,be={components:{"colour-picker":ge},data:function(){return{numItems:0,groupClass:"",groupFillColor:{style:"transparent",obj:{h:0,s:0,l:0,a:0}},groupStrokeWidth:"",groupStrokeColor:{style:"transparent",obj:{h:0,s:0,l:0,a:0}},color:"blue"}},created:function(){var t=this;$a.$on("selectionChanged",function(e){e.length>=1?(t.numItems=0,e.forEach(function(e){if("Group"===e.className){if(e.data.class&&(t.groupClass=e.data.class),e.fillColor){var n=e.fillColor.hue,a=100*e.fillColor.saturation+"%",o=100*e.fillColor.lightness+"%",i=e.fillColor.alpha;t.groupFillColor.style="hsla("+n+", "+a+", "+o+", "+i+")",t.groupFillColor.obj={h:n,s:a,l:o,a:i}}else t.groupFillColor.style="transparent",t.groupFillColor.obj={h:0,s:0,l:0,a:0};if(e.strokeColor){var r=e.strokeColor.hue,s=100*e.strokeColor.saturation+"%",l=100*e.strokeColor.lightness+"%",c=e.strokeColor.alpha;t.groupStrokeColor.style="hsla("+r+", "+s+", "+l+", "+c+")",t.groupStrokeColor.obj={h:r,s:s,l:l,a:c}}else t.groupStrokeColor.style="transparent",t.groupStrokeColor.obj={h:0,s:0,l:0,a:0}}else t.numItems++})):(t.groupClass="",t.numItems=0,t.groupFillColor={style:"transparent",obj:{h:0,s:0,l:0,a:0}},t.groupStrokeWidth="",t.groupStrokeColor={style:"transparent",obj:{h:0,s:0,l:0,a:0}})})}},ye=be,we=(n("OIBd"),Object(r["a"])(ye,ce,ue,!1,null,"7ea03378",null)),Oe=we.exports,Ce={components:{"app-navigator":Gt,"app-layers":ne,"app-images":le,"app-properties":Oe}},ke=Ce,je=(n("UM2n"),Object(r["a"])(ke,Bt,qt,!1,null,"780f30da",null)),xe=je.exports,Se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.steps?n("div",[n("v-stepper",{staticClass:"pointers-please",attrs:{id:"stepper",value:t.activeStep+1,"non-linear":""}},[n("v-stepper-header",{attrs:{id:"stepper-header"}},[t._l(t.steps,function(e,a){return[n("v-stepper-step",{key:a,attrs:{step:e.id,editable:""},nativeOn:{click:function(n){t.setActiveStep(e)}}}),e.id!==t.steps.length?n("v-divider",{key:e.length}):t._e()]})],2)],1),n("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},[n("p",{attrs:{id:"hint"}},[t._v("\n      "+t._s(t.steps[t.activeStep].instruction)+"\n    ")])])],1):t._e()},_e=[],De={computed:Object(O["a"])({},Object(C["d"])({activeStep:function(t){return t.editor.activeStep},steps:function(t){return t.editor.steps}})),methods:Object(O["a"])({},Object(C["b"])(["setActiveStep","setActiveStepAndLayer"]))},Ae=De,Ie=(n("rwb5"),Object(r["a"])(Ae,Se,_e,!1,null,"68094e7a",null)),Te=Ie.exports,Le=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-2 pointers-please",attrs:{id:"view"}},[n("app-osd-canvas"),n("app-annotation-canvas")],1)},We=[],Pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"osd-canvas"}})},Ee=[],Me={mounted:function(){this.setupOSDCanvas("osd-canvas")},methods:Object(O["a"])({},Object(C["b"])(["setupOSDCanvas"]))},Ze=Me,Ne=(n("iKxv"),Object(r["a"])(Ze,Pe,Ee,!1,null,null,null)),ze=Ne.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{attrs:{id:"annotation-canvas"}})},Re=[],Ke={computed:Object(O["a"])({},Object(C["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}})),watch:{viewSize:function(){S.a.view.viewSize.width=this.viewSize[0],S.a.view.viewSize.height=this.viewSize[1]},imageZoom:function(){},imageCenter:function(){}},mounted:function(){this.setupAnnotation("annotation-canvas")},methods:Object(O["a"])({},Object(C["b"])(["setupAnnotation"]))},Be=Ke,qe=(n("f0Ne"),Object(r["a"])(Be,$e,Re,!1,null,null,null)),He=qe.exports,Ue={components:{"app-osd-canvas":ze,"app-annotation-canvas":He},props:{type:{type:String,default:"examples"}},mounted:function(){this.synchroniseAnnotationAndOSDCanvas(),this.loadProject(this.type)},destroyed:function(){this.resetState()},methods:Object(O["a"])({},Object(C["b"])(["synchroniseAnnotationAndOSDCanvas","loadProject","resetState"]))},Fe=Ue,Ve=(n("qHVY"),Object(r["a"])(Fe,Le,We,!1,null,"930440b6",null)),Je=Ve.exports,Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:!0,dark:"",dense:""}},[n("div",{attrs:{id:"toolbar-side-icon-spacer"}}),n("router-link",{attrs:{to:"/"}},[n("v-toolbar-title",{staticClass:"white--text"},[t._v("\n      AIDA\n    ")])],1),n("v-spacer"),n("app-export"),n("app-save"),n("app-settings"),n("v-btn",{attrs:{icon:"",href:"https://imageannotation.nds.ox.ac.uk:8443/AIDA/"}},[n("v-icon",[t._v(" apps ")])],1),n("v-btn",{attrs:{icon:"",href:"https://aida.gitbook.io/docs/"}},[n("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1),n("v-btn",{staticClass:"pointers-no",attrs:{icon:""}},[n("app-account")],1)],1)},Qe=[],Ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-dialog",{staticClass:"pointers-please",attrs:{"max-width":"900"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[n("v-icon",[t._v("\n        settings\n      ")])],1),n("v-card",[n("v-container",{attrs:{id:"container"}},[n("v-layout",[n("v-navigation-drawer",{attrs:{permanent:""}},[n("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[n("v-list",{staticClass:"pa-0"},[n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-avatar",[n("v-icon",[t._v(" settings ")])],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v("Settings")])],1)],1)],1)],1),n("v-list",[n("v-divider"),n("v-list-tile",{class:["project"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="project"}}},[n("v-list-tile-action",[n("v-icon")],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Project ")])],1)],1),n("v-list-tile",{class:["annotation"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="annotation"}}},[n("v-list-tile-action",[n("v-icon")],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Upload Annotation ")])],1)],1),n("v-list-tile",{class:["image"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="image"}}},[n("v-list-tile-action",[n("v-icon")],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Add an Image ")])],1)],1),n("v-list-tile",{class:["steps"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="steps"}}},[n("v-list-tile-action",[n("v-icon")],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Steps ")])],1)],1),n("v-list-tile",{class:["tools"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="tools"}}},[n("v-list-tile-action",[n("v-icon")],1),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" Tools ")])],1)],1)],1)],1),n("div",{attrs:{id:"content"}},["project"===t.settings?n("app-project-settings"):t._e(),"annotation"===t.settings?n("app-annotation-settings"):t._e(),"image"===t.settings?n("app-image-settings"):t._e(),"steps"===t.settings?n("app-step-settings"):t._e(),"tools"===t.settings?n("app-tool-settings"):t._e()],1)],1),n("v-divider"),n("v-layout",{attrs:{"justify-end":""}},[n("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")])],1)],1)],1)],1)],1)},Xe=[],tn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("v-text-field",{attrs:{value:t.projectName,name:"input-3",label:"Project Name"},on:{change:t.setProjectName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setProjectName(e):null}}})],1)],1)],1)},en=[],nn={computed:Object(O["a"])({},Object(C["d"])({projectName:function(t){return t.annotation.project.name}})),methods:Object(O["a"])({},Object(C["b"])(["setProjectName"]))},an=nn,on=(n("MKo1"),Object(r["a"])(an,tn,en,!1,null,null,null)),rn=on.exports,sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[t._v("\n\n      Plan to add upload functionality for annotation data.\n\n    ")])],1)],1)},ln=[],cn={computed:Object(O["a"])({},Object(C["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}}))},un=cn,pn=(n("sxA/"),Object(r["a"])(un,sn,ln,!1,null,null,null)),vn=pn.exports,dn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-layout",[n("v-flex",{attrs:{xs12:""}},[n("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[n("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),n("v-radio-group",{model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}},[n("v-radio",{attrs:{label:"Simple",value:"simple"}}),n("v-radio",{attrs:{label:"DZI",value:"dzi"}})],1),n("v-text-field",{attrs:{rules:t.sourceRules,label:"Source",required:""},model:{value:t.newSource,callback:function(e){t.newSource=e},expression:"newSource"}}),n("v-btn",{attrs:{disabled:!t.valid},on:{click:function(e){t.loadImages([{name:t.newName,type:t.newType,source:t.newSource}])}}},[t._v("\n          submit\n        ")])],1)],1)],1)],1)},fn=[],hn={data:function(){return{valid:!1,newName:"",nameRules:[function(t){return!!t||"Name is required"}],newType:"simple",newSource:"",sourceRules:[function(t){return!!t||"Source location is required"}]}},computed:Object(O["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])(["getChannels"])),methods:Object(O["a"])({},Object(C["b"])(["loadImages"]),{submit:function(){this.$refs.form.validate()&&console.log("good to go")}})},mn=hn,gn=(n("21Bo"),Object(r["a"])(mn,dn,fn,!1,null,null,null)),bn=gn.exports,yn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  Tools\n")])},wn=[],On={props:{editor:{type:Object,default:function(){return{}}}}},Cn=On,kn=Object(r["a"])(Cn,yn,wn,!1,null,null,null),jn=kn.exports,xn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[t._v("\n  Steps\n")])},Sn=[],_n=(n("xfY5"),{props:{editor:{type:Object,default:function(){return{}}},step:{type:Number,default:1}},data:function(){return{title:""}}}),Dn=_n,An=(n("zesu"),Object(r["a"])(Dn,xn,Sn,!1,null,"7735a281",null)),In=An.exports,Tn={components:{"app-project-settings":rn,"app-annotation-settings":vn,"app-image-settings":bn,"app-step-settings":In,"app-tool-settings":jn},data:function(){return{dialog:!1,settings:"project"}}},Ln=Tn,Wn=(n("lMtH"),Object(r["a"])(Ln,Ye,Xe,!1,null,"e0505b70",null)),Pn=Wn.exports,En=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{staticClass:"pointers-please",attrs:{"nudge-right":30,"nudge-bottom":5,"offset-y":""}},[n("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n    account_circle\n  ")]),n("v-list",{staticClass:"pointers-please",attrs:{dense:""}},[n("v-list-tile",[n("v-list-tile-title",{attrs:{id:"title"}},[t._v("\n        Log out\n      ")])],1)],1)],1)},Mn=[],Zn={},Nn=Zn,zn=(n("xFoK"),Object(r["a"])(Nn,En,Mn,!1,null,"222df3de",null)),$n=zn.exports,Rn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.saveProject(e)}}},[n("v-icon",[t._v("\n    save\n  ")])],1)},Kn=[],Bn={methods:Object(O["a"])({},Object(C["b"])(["saveProject"]))},qn=Bn,Hn=(n("ZN9C"),Object(r["a"])(qn,Rn,Kn,!1,null,null,null)),Un=Hn.exports,Fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.exportData(e)}}},[n("v-icon",{attrs:{small:""}},[t._v("\n    fa-download\n  ")])],1)},Vn=[],Jn={computed:Object(O["a"])({},Object(C["d"])({dataToExport:function(t){return t.annotation.project}})),methods:Object(O["a"])({},Object(C["b"])(["refreshAnnotationState"]),{exportData:function(){this.refreshAnnotationState();var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.dataToExport,null,2)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","AIDA_annotation.json"),document.body.appendChild(e),e.click(),e.remove()}})},Gn=Jn,Qn=(n("Z3WQ"),Object(r["a"])(Gn,Fn,Vn,!1,null,null,null)),Yn=Qn.exports,Xn={components:{"app-settings":Pn,"app-account":$n,"app-save":Un,"app-export":Yn}},ta=Xn,ea=(n("ILqV"),Object(r["a"])(ta,Ge,Qe,!1,null,"44d7030a",null)),na=ea.exports,aa={components:{"app-tools":Kt,"app-studio":xe,"app-stepper":Te,"app-view":Je,"app-toolbar":na},props:{type:{type:String,default:"examples"}}},oa=aa,ia=(n("zyUD"),Object(r["a"])(oa,g,b,!1,null,"64c0408d",null)),ra=ia.exports,sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("app-toolbar")],1),a("v-container",{attrs:{id:"content-container",fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","fill-height":"","justify-space-between":""}},[a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/example/dzi"}},[a("v-card-media",{attrs:{src:n("9u3K"),height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                Deep Zoom\n              ")]),a("div",[t._v("\n                Annotate a super hi-res Deep Zoom image with multiple tiled\n                layers.\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n            ")])],1)],1)],1),a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/example/simple"}},[a("v-card-media",{attrs:{src:n("EVYb"),height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                Simple\n              ")]),a("div",[t._v("\n                Annotate a standard image (no fancy Deep Zooming).\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n            ")])],1)],1)],1),a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/new"}},[a("v-card-media",{attrs:{src:n("DzNT"),height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                New\n              ")]),a("div",[t._v("\n                Start from scratch!\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" get started\n            ")])],1)],1)],1)],1)],1)],1)},la=[],ca={components:{"app-toolbar":na}},ua=ca,pa=(n("Qxgu"),Object(r["a"])(ua,sa,la,!1,null,"6659f0c0",null)),va=pa.exports;a["a"].use(u["a"]);var da=new u["a"]({routes:[{path:"/",name:"Landing",component:m},{path:"/example/dzi",name:"DZI Example",component:ra,props:{default:!0,type:"dzi"}},{path:"/example/simple",name:"Simple Example",component:ra,props:{default:!0,type:"simple"}},{path:"/example",name:"Examples",component:va},{path:"/new",name:"New",component:ra,props:{default:!0,type:"new"}}]}),fa=n("qnjL"),ha=n.n(fa),ma={OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}},ga={getMaxZoom:function(t){return t.OSDviewer?Math.round(t.OSDviewer.viewport.getMaxZoom()):10},getZoom:function(t){if(t.OSDviewer){var e=t.OSDviewer.viewport.getZoom();return e<100?Math.round(10*e)/10:Math.round(e)}return"na"},getImageWidth:function(t){if(t.OSDviewer)return t.OSDviewer.world.getItemCount()>0?t.OSDviewer.world.getItemAt(0).getContentSize.x:0},getChannels:function(t,e,n){var a=[];if(t.OSDviewer)for(var o=t.OSDviewer.world.getItemCount(),i=0;i<o;i++)a.push({channel:t.OSDviewer.world.getItemAt(i),id:i,opacity:t.OSDviewer.world.getItemAt(i).getOpacity(),name:t.images[i].name,visible:t.OSDviewer.world.getItemAt(i).getOpacity()>0,opacityCache:0});return a}},ba={resetImageState:function(t){var e=t.commit,n=t.rootState;e("resetImageState",n)},setupOSDCanvas:function(t,e){var n=t.commit;n("setupOSDCanvas",e)},loadImages:function(t,e){t.state;var n=t.dispatch;n("addImagesToState",e).then(function(){for(var t in e)n("addOSDImage",e[t])})},addImagesToState:function(t,e){var n=t.commit;n("addImagesToState",e)},addOSDImage:function(t,e){var n=t.commit;n("addOSDImage",e)},setActiveChannel:function(t,e){var n=t.commit;n("setActiveChannel",e)},toggleChannelOpacity:function(t,e){var n=t.commit;n("toggleChannelOpacity",e)},setChannelOpacity:function(t,e){var n=t.commit,a=t.rootState;n("setChannelOpacity",{input:e,activeChannel:a.editor.activeChannel,rootState:a})},setChannelName:function(t,e){var n=t.commit;t.rootState;n("setChannelName",e)},setZoom:function(t,e){var n=t.commit;n("setZoom",e)}},ya={resetImageState:function(t){t.OSDviewer.destroy(),t={OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}}},setupOSDCanvas:function(t,e){t.OSDviewer=new ha.a.Viewer({id:e,showNavigationControl:!1,showNavigator:!0,navigatorId:"navigator"}),t.OSDviewer.addHandler("resize",function(e){t.view.viewSize=[e.newContainerSize.x,e.newContainerSize.y];var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]}),t.OSDviewer.addHandler("zoom",function(e){t.view.imageZoom=t.OSDviewer.viewport.viewportToImageZoom(t.OSDviewer.viewport.getZoom(!0));var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]}),t.OSDviewer.addHandler("pan",function(e){var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]})},addImagesToState:function(t,e){for(var n in t.images=[],e)t.images.push(e[n])},addOSDImage:function(t,e){"dzi"===e.type?t.OSDviewer.addTiledImage({tileSource:e.source,x:0,y:0,opacity:1}):"simple"===e.type&&t.OSDviewer.addSimpleImage({url:e.source,x:0,y:0,opacity:1})},setActiveChannel:function(t,e){t.activeChannel=e},toggleChannelOpacity:function(t,e){e.opacity>0?e.channel.setOpacity(0):e.channel.setOpacity(.7)},setChannelOpacity:function(t,e){var n=e.input,a=1;"string"===typeof n||"number"===typeof n?(n=Number(n),a=n>1?n/100:n):n instanceof KeyboardEvent&&(a=n.target.value/100),t.OSDviewer.world.getItemAt(e.activeChannel).setOpacity(a)},setChannelName:function(t,e){var n;n=e instanceof KeyboardEvent?e.target.value:e,a["a"].set(t.images[t.activeChannel],"name",n)},setZoom:function(t,e){var n;n=e instanceof KeyboardEvent?Number(e.target.value):Number(e),"number"===typeof n&&n>0&&t.OSDviewer.viewport.zoomTo(n)}},wa={state:ma,getters:ga,actions:ba,mutations:ya},Oa=n("a94B"),Ca={project:{name:"An AIDA project",layers:[]},defaultColors:[{stroke:{alpha:1,hue:170,lightness:.69,saturation:.44},fill:{alpha:.7,hue:170,lightness:.69,saturation:.44}},{stroke:{alpha:1,hue:6,lightness:.72,saturation:.94},fill:{alpha:.7,hue:6,lightness:.72,saturation:.94}},{stroke:{alpha:1,hue:60,lightness:.85,saturation:1},fill:{alpha:.7,hue:60,lightness:.85,saturation:1}},{stroke:{alpha:1,hue:190,lightness:.79,saturation:.3},fill:{alpha:.7,hue:190,lightness:.79,saturation:.3}},{stroke:{alpha:1,hue:6,lightness:.72,saturation:.94},fill:{alpha:.7,hue:6,lightness:.72,saturation:.94}},{stroke:{alpha:1,hue:205,lightness:.66,saturation:.49},fill:{alpha:.7,hue:205,lightness:.66,saturation:.49}}]},ka={getDefaultLayerColor:function(t,e,n){var a=n.editor.activeLayer,o=t.project.layers.length;return t.defaultColors[a%o]}},ja={resetAnnotationState:function(t){var e=t.commit;e("resetAnnotationState")},refreshAnnotationState:function(t,e){var n=t.commit;n("refreshAnnotationState",e)},setupAnnotation:function(t,e){var n=t.commit;n("setupAnnotation",e)},loadAnnotation:function(t,e){var n=t.dispatch,a=t.rootState;"object"===Object(Oa["a"])(e)?n("loadAidaAnnotation",{annotation:e,activeLayer:a.editor.activeLayer}):"string"===typeof e&&n("loadPaperStringAnnotation",{annotation:e,activeLayer:a.editor.activeLayer}).then(function(){n("refreshAnnotationState")})},loadAidaAnnotation:function(t,e){var n=t.commit;n("loadAidaAnnotation",e)},loadPaperStringAnnotation:function(t,e){var n=t.commit;n("loadPaperStringAnnotation",e)},prepareCanvas:function(t,e){var n=t.commit;n("prepareCanvas",e)},newLayer:function(t,e){var n=t.commit;n("newLayer")},setActiveLayer:function(t,e){var n=t.commit,a=t.dispatch;n("setActiveLayer",e),a("setConfigActiveLayer",e)},setLayerOpacity:function(t,e){var n=t.commit;n("setLayerOpacity",e)},setLayerName:function(t,e){var n=t.commit;n("setLayerName",e)},deleteLayer:function(t,e){var n=t.commit;n("deleteLayer",e)},setProjectName:function(t,e){var n=t.commit;n("setProjectName",e)}},xa={resetAnnotationState:function(t){a["a"].set(t,"project",{name:"An AIDA project",layers:[]}),S.a.project.remove()},refreshAnnotationState:function(t,e){function n(t){var e=[];return t.segments.forEach(function(t){e.push({point:{x:t.point.x,y:t.point.y},handleIn:{x:t.handleIn.x,y:t.handleIn.y},handleOut:{x:t.handleOut.x,y:t.handleOut.y}})}),e}S.a.project.layers.forEach(function(e){a["a"].set(t.project.layers,[e.index],{name:t.project.layers[e.index]?t.project.layers[e.index].name:e.name,opacity:e.opacity,items:[]})}),S.a.project.getItems({className:"Path"}).forEach(function(e){"circle"===e.data.type?t.project.layers[e.layer.index].items.push({class:e.data.class,type:"circle",center:{x:e.position.x,y:e.position.y},radius:e.bounds.width/2}):"rectangle"===e.data.type?t.project.layers[e.layer.index].items.push({class:e.data.class,type:"rectangle",from:{x:e.bounds.topLeft.x,y:e.bounds.topRight.y},to:{x:e.bounds.bottomRight.x,y:e.bounds.bottomRight.y}}):t.project.layers[e.layer.index].items.push({class:e.data.class,type:"path",segments:n(e),closed:e.closed})})},setupAnnotation:function(t,e){S.a.setup(e)},loadAidaAnnotation:function(t,e){t.project=e.annotation,t.project.layers.forEach(function(e){var n=new S.a.Layer;n.opacity=e.opacity,e.items&&e.items.forEach(function(e){var n;n="circle"===e.type?new S.a.Path.Circle({center:e.center,radius:e.radius,data:{type:"circle",countable:!0,class:e.class}}):"rectangle"===e.type?new S.a.Path.Rectangle({from:e.from,to:e.to,data:{type:"rectangle",class:e.class}}):new S.a.Path({segments:e.segments,closed:e.closed,data:{type:"path",class:e.class}}),n.closed&&(n.fillColor=t.defaultColors[n.layer.index].fill),n.strokeColor=t.defaultColors[n.layer.index].stroke})}),S.a.project.layers[e.activeLayer].activate()},loadPaperStringAnnotation:function(t,e){S.a.project.importJSON(e.annotation),S.a.project.layers[e.activeLayer].activate()},prepareCanvas:function(t,e){S.a.view.element.classList.contains("pointers-no")&&S.a.view.element.classList.remove("pointers-no")},newLayer:function(t){var e=new S.a.Layer({position:S.a.view.center});e.opacity=1,t.project.layers.push({name:"Layer "+(t.project.layers.length+1),opacity:1,items:[]})},setActiveLayer:function(t,e){S.a.project.layers[e].activate()},setLayerOpacity:function(t,e){var n;n=e instanceof KeyboardEvent?e.target.value/100:e/100,n>1?n=1:e<0&&(n=0),S.a.project.activeLayer.opacity=n,a["a"].set(t.project.layers[S.a.project.activeLayer.index],"opacity",n)},setLayerName:function(t,e){var n;n=e instanceof KeyboardEvent?e.target.value:e,S.a.project.activeLayer.name=n,a["a"].set(t.project.layers[S.a.project.activeLayer.index],"name",n)},deleteLayer:function(t,e){t.project.layers.splice(S.a.project.activeLayer.index,1),S.a.project.activeLayer.remove()},setProjectName:function(t,e){var n;n=e instanceof KeyboardEvent?e.target.value:e,t.project.name=n}},Sa={state:Ca,getters:ka,actions:ja,mutations:xa},_a={type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null,settingsFlag:!1},Da={getStepTools:function(t){return t.steps?t.steps[t.activeStep].tools:["pan","circle","rectangle","pen","pencil","move","node","count","delete","faces"]}},Aa={resetEditorState:function(t){var e=t.commit;e("resetEditorState")},setActiveStep:function(t,e){var n=t.commit,a=t.dispatch;"number"===typeof e.specificLayer&&a("setActiveLayer",e.specificLayer),n("setActiveStep",e.id-1)},setConfigActiveLayer:function(t,e){var n=t.commit;n("setConfigActiveLayer",e)},loadConfig:function(t,e){var n=t.commit,a=t.rootState;n("loadConfig",{editor:e,rootState:a})},toggleSettings:function(t,e){var n=t.commit;n("toggleSettings")}},Ia={resetEditorState:function(t){({type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null})},setActiveStep:function(t,e){t.activeStep=e},setConfigActiveLayer:function(t,e){t.activeLayer=e},loadConfig:function(t,e){a["a"].set(e.rootState,"editor",e.editor)},toggleSettings:function(t){t.settingsFlag=!t.settingsFlag}},Ta={state:_a,getters:Da,actions:Aa,mutations:Ia},La={},Wa={},Pa={resetState:function(t){var e=t.dispatch;e("resetEditorState"),e("resetAnnotationState"),e("resetImageState")},loadProject:function(t,e){var n=t.dispatch,a="https://aida-testing.firebaseio.com/"+e+".json";Dt.a.get(a).then(function(t){n("loadConfig",t.data.editor,{root:!0}),n("loadImages",t.data.images,{root:!0}),n("loadAnnotation",t.data.annotation,{root:!0})}).catch(function(t){console.log("Could not load all data from external source. Returned the following error: \n \n"+t)})},saveProject:function(t){var e=t.rootState,n=t.dispatch,a="https://aida-testing.firebaseio.com/"+e.editor.type+".json";n("refreshAnnotationState").then(Dt.a.put(a,{editor:e.editor,annotation:e.annotation.project,images:e.image.images}).then(function(t){console.log(t)}))},synchroniseAnnotationAndOSDCanvas:function(t){t.state;var e=t.commit,n=t.rootState;e("synchroniseAnnotationAndOSDCanvas",n.image.OSDviewer)},setActiveStepAndLayer:function(t,e){var n=t.dispatch;n("setActiveLayer",e),n("setActiveStep",e)}},Ea={synchroniseAnnotationAndOSDCanvas:function(t,e){e.addHandler("update-viewport",function(){var t=e.viewport.getZoom(!0),n=e.world.getItemAt(0);S.a.view.zoom=n.viewportToImageZoom(t);var a=n.viewportToImageCoordinates(e.viewport.getCenter(!0));S.a.view.center=new S.a.Point(a.x,a.y),S.a.project.layers.forEach(function(e){e.children.forEach(function(e){"Path"===e.className&&(e.strokeWidth=n.getContentSize().x/(500*t))})})})}},Ma={state:La,getters:Wa,actions:Pa,mutations:Ea};a["a"].use(C["a"]);var Za=new C["a"].Store({state:{},getters:{},actions:{},mutations:{},modules:{image:wa,annotation:Sa,editor:Ta,common:Ma}}),Na=n("zlta"),za=n.n(Na);n("v0CA"),n("WF7/");n.d(e,"eventBus",function(){return $a}),a["a"].use(za.a),a["a"].config.productionTip=!1;var $a=new a["a"];new a["a"]({router:da,store:Za,render:function(t){return t(c)}}).$mount("#app")},"WF7/":function(t,e,n){},WVHb:function(t,e,n){},Z3WQ:function(t,e,n){"use strict";var a=n("kR28"),o=n.n(a);o.a},ZHcJ:function(t,e,n){"use strict";var a=n("Js6O"),o=n.n(a);o.a},ZN9C:function(t,e,n){"use strict";var a=n("fJmj"),o=n.n(a);o.a},b5bK:function(t,e,n){},cFcW:function(t,e,n){},e8bv:function(t,e,n){},f0Ne:function(t,e,n){"use strict";var a=n("DRDL"),o=n.n(a);o.a},fJmj:function(t,e,n){},flaU:function(t,e,n){},iKxv:function(t,e,n){"use strict";var a=n("62nV"),o=n.n(a);o.a},iRMf:function(t,e,n){},iggO:function(t,e,n){"use strict";var a=n("WVHb"),o=n.n(a);o.a},kPuA:function(t,e,n){"use strict";var a=n("uzpv"),o=n.n(a);o.a},kR28:function(t,e,n){},lMtH:function(t,e,n){"use strict";var a=n("iRMf"),o=n.n(a);o.a},lmMb:function(t,e,n){},m6Hf:function(t,e,n){},mhMe:function(t,e,n){},"nZ/l":function(t,e,n){},oW1W:function(t,e,n){"use strict";var a=n("2iM7"),o=n.n(a);o.a},okNp:function(t,e,n){"use strict";var a=n("wgq3"),o=n.n(a);o.a},pkmO:function(t,e,n){},q7Hr:function(t,e,n){},qHVY:function(t,e,n){"use strict";var a=n("KINE"),o=n.n(a);o.a},"qK+1":function(t,e,n){"use strict";var a=n("9ler"),o=n.n(a);o.a},rhE5:function(t,e,n){"use strict";var a=n("flaU"),o=n.n(a);o.a},rwb5:function(t,e,n){"use strict";var a=n("cFcW"),o=n.n(a);o.a},"sxA/":function(t,e,n){"use strict";var a=n("lmMb"),o=n.n(a);o.a},t6ok:function(t,e,n){},"u+oy":function(t,e,n){},uMDi:function(t,e,n){},"ug/q":function(t,e,n){"use strict";var a=n("b5bK"),o=n.n(a);o.a},uzpv:function(t,e,n){},wKg8:function(t,e,n){},wgq3:function(t,e,n){},xFoK:function(t,e,n){"use strict";var a=n("m6Hf"),o=n.n(a);o.a},xolY:function(t,e,n){},y4JK:function(t,e,n){"use strict";var a=n("3Hms"),o=n.n(a);o.a},zeKo:function(t,e,n){"use strict";var a=n("e8bv"),o=n.n(a);o.a},zesu:function(t,e,n){"use strict";var a=n("pkmO"),o=n.n(a);o.a},zyUD:function(t,e,n){"use strict";var a=n("t6ok"),o=n.n(a);o.a}});
//# sourceMappingURL=app.f0ab3499.js.map