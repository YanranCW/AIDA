(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],u=0,v=[];u<s.length;u++)r=s[u],o[r]&&v.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);d&&d(e);while(v.length)v.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},o={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var d=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0109":function(t,e,a){"use strict";var i=a("9165"),o=a.n(i);o.a},"02e2":function(t,e,a){},"034f":function(t,e,a){"use strict";var i=a("c21b"),o=a.n(i);o.a},"0a64":function(t,e,a){"use strict";var i=a("ff65"),o=a.n(i);o.a},"0c88":function(t,e,a){},1:function(t,e){},1934:function(t,e,a){"use strict";var i=a("afe2"),o=a.n(i);o.a},1946:function(t,e,a){"use strict";var i=a("dc3a"),o=a.n(i);o.a},"1b5e":function(t,e,a){},"1ce3":function(t,e,a){"use strict";var i=a("5dde"),o=a.n(i);o.a},"1d95":function(t,e,a){},"1e18":function(t,e,a){"use strict";var i=a("cb36"),o=a.n(i);o.a},"1f95":function(t,e,a){"use strict";var i=a("86f5"),o=a.n(i);o.a},2:function(t,e){},"20d1":function(t,e,a){"use strict";var i=a("5a26"),o=a.n(i);o.a},"21c4":function(t,e,a){"use strict";var i=a("8b35"),o=a.n(i);o.a},2276:function(t,e,a){},"29c1":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        filter_9_plus\n      ")])],1),a("span",[t._v(" Count Tool ")])],1)],1)},o=[];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return o})},"2c58":function(t,e,a){"use strict";var i=a("29c1"),o=a("eb36"),n=(a("21c4"),a("2877")),r=Object(n["a"])(o["default"],i["a"],i["b"],!1,null,null,null);r.options.__file="Count.vue",e["default"]=r.exports},"2d9e":function(t,e,a){"use strict";var i=a("1b5e"),o=a.n(i);o.a},"2daf":function(t,e,a){"use strict";var i=a("9a3b"),o=a.n(i);o.a},"2f1b":function(t,e,a){"use strict";var i=a("7964"),o=a.n(i);o.a},"303f":function(t,e,a){"use strict";var i=a("d5fb"),o=a.n(i);o.a},3360:function(t,e,a){"use strict";var i=a("3e87"),o=a.n(i);o.a},"34bc":function(t,e,a){},"36a9":function(t,e,a){"use strict";var i=a("2276"),o=a.n(i);o.a},"36e1":function(t,e,a){},"39dd":function(t,e,a){"use strict";var i=a("61ce"),o=a.n(i);o.a},"3dea":function(t,e,a){"use strict";var i=a("0c88"),o=a.n(i);o.a},"3e87":function(t,e,a){},"438d":function(t,e,a){"use strict";var i=a("36e1"),o=a.n(i);o.a},"4d5c":function(t,e,a){"use strict";var i=a("8a52"),o=a.n(i);o.a},5492:function(t,e,a){"use strict";var i=a("7a2a"),o=a.n(i);o.a},"552a":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{attrs:{id:"inspire"}},[this.toolbar?a("app-toolbar",{on:{toggleToolsDrawer:function(e){t.toolsDrawer=!t.toolsDrawer},toggleStudioDrawer:function(e){t.studioDrawer=!t.studioDrawer}}}):t._e(),a("app-snackbar"),a("v-navigation-drawer",{attrs:{id:"tools-drawer",fixed:"",clipped:"",value:this.toolsDrawer,"mini-variant":"","mini-variant-width":"60",app:"","mobile-break-point":"800"}},[a("app-tools")],1),a("v-content",[a("router-view")],1),a("v-navigation-drawer",{attrs:{id:"studio-drawer",fixed:"",clipped:"",value:this.studioDrawer,app:"",right:"","mobile-break-point":"1000"}},[a("app-studio")],1)],1)},n=[],r=a("c93e"),s=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:"",dark:"",dense:"",app:"","clipped-right":"","clipped-left":""}},[a("div",{attrs:{id:"toolbar-toggle"}},[a("v-toolbar-side-icon",{on:{click:function(e){t.toggleToolsDrawer()}}})],1),a("router-link",{attrs:{to:"/"}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("\n      AIDA\n    ")])],1),a("v-spacer"),a("app-export"),a("app-save"),a("app-settings"),a("v-btn",{attrs:{icon:"",href:"https://imageannotation.nds.ox.ac.uk:8443/AIDA/"}},[a("v-icon",[t._v("\n      apps\n    ")])],1),a("v-btn",{attrs:{icon:"",href:"https://aida.gitbook.io/docs/"}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1),a("div",[a("v-toolbar-side-icon",{on:{click:function(e){t.toggleStudioDrawer()}}})],1)],1)},c=[],d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{staticClass:"pointers-please",attrs:{"max-width":"900"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("\n        settings\n      ")])],1),a("v-card",[a("v-container",{attrs:{id:"container"}},[a("v-layout",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[a("v-list",{staticClass:"pa-0"},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-icon",[t._v(" settings ")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Settings")])],1)],1)],1)],1),a("v-list",[a("v-divider"),a("v-list-tile",{class:["project"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="project"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Project ")])],1)],1),a("v-list-tile",{class:["annotation"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="annotation"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Upload Annotation ")])],1)],1),a("v-list-tile",{class:["image"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="image"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Add an Image ")])],1)],1),a("v-list-tile",{class:["steps"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="steps"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Steps ")])],1)],1),a("v-list-tile",{class:["tools"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="tools"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Tools ")])],1)],1)],1)],1),a("div",{attrs:{id:"content"}},["project"===t.settings?a("app-project-settings"):t._e(),"annotation"===t.settings?a("app-annotation-settings"):t._e(),"image"===t.settings?a("app-image-settings"):t._e(),"steps"===t.settings?a("app-step-settings"):t._e(),"tools"===t.settings?a("app-tool-settings"):t._e()],1)],1),a("v-divider"),a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")])],1)],1)],1)],1)],1)},u=[],v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{value:t.projectName,name:"input-3",label:"Project Name"},on:{change:t.setProjectName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setProjectName(e):null}}})],1)],1)],1)},p=[],f=(a("7f7f"),{computed:Object(r["a"])({},Object(s["d"])({projectName:function(t){return t.annotation.project.name}})),methods:Object(r["a"])({},Object(s["b"])({setProjectName:"annotation/setProjectName"}))}),h=f,m=(a("e9a6"),a("2877")),g=Object(m["a"])(h,v,p,!1,null,null,null);g.options.__file="ProjectSettings.vue";var b=g.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[t._v("\n\n      Plan to add upload functionality for annotation data.\n\n    ")])],1)],1)},y=[],O={computed:Object(r["a"])({},Object(s["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}}))},k=O,C=(a("2f1b"),Object(m["a"])(k,w,y,!1,null,null,null));C.options.__file="AnnotationSettings.vue";var _=C.exports,x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),a("v-radio-group",{model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}},[a("v-radio",{attrs:{label:"Simple",value:"simple"}}),a("v-radio",{attrs:{label:"DZI",value:"dzi"}})],1),a("v-text-field",{attrs:{rules:t.sourceRules,label:"Source",required:""},model:{value:t.newSource,callback:function(e){t.newSource=e},expression:"newSource"}}),a("v-btn",{attrs:{disabled:!t.valid},on:{click:function(e){t.loadImages([{name:t.newName,type:t.newType,source:t.newSource}])}}},[t._v("\n          submit\n        ")])],1)],1)],1)],1)},S=[],j={data:function(){return{valid:!1,newName:"",nameRules:[function(t){return!!t||"Name is required"}],newType:"simple",newSource:"",sourceRules:[function(t){return!!t||"Source location is required"}]}},computed:Object(r["a"])({},Object(s["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(s["c"])({getChannels:"images/getChannels"})),methods:Object(r["a"])({},Object(s["b"])({loadImages:"images/loadImages"}),{submit:function(){this.$refs.form.validate()&&console.log("good to go")}})},D=j,I=(a("2daf"),Object(m["a"])(D,x,S,!1,null,null,null));I.options.__file="ImageSettings.vue";var A=I.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Tools\n")])},P=[],M={props:{editor:{type:Object,default:function(){return{}}}}},E=M,L=Object(m["a"])(E,T,P,!1,null,null,null);L.options.__file="ToolSettings.vue";var W=L.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Steps\n")])},Z=[],F=(a("c5f6"),{props:{editor:{type:Object,default:function(){return{}}},step:{type:Number,default:1}},data:function(){return{title:""}}}),V=F,$=(a("cdc8"),Object(m["a"])(V,N,Z,!1,null,"7735a281",null));$.options.__file="StepSettings.vue";var G=$.exports,B={components:{"app-project-settings":b,"app-annotation-settings":_,"app-image-settings":A,"app-step-settings":G,"app-tool-settings":W},data:function(){return{dialog:!1,settings:"project"}}},z=B,R=(a("7329"),Object(m["a"])(z,d,u,!1,null,"e0505b70",null));R.options.__file="Settings.vue";var U=R.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.signedIn?a("v-menu",{staticClass:"pointers-please",attrs:{transition:"slide-y-transition","offset-y":"",bottom:"","nudge-right":5,"nudge-bottom":10}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("\n        account_circle\n      ")])],1),a("v-list",[a("v-list-tile",{on:{click:t.logOut}},[a("v-list-tile-title",[t._v("\n          Log Out\n        ")])],1)],1)],1):a("v-dialog",{staticClass:"pointers-please",attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("\n        account_circle\n      ")])],1),t.displaySignUp?a("app-sign-up",{on:{signIn:function(e){t.displaySignUp=!1}}}):a("app-sign-in",{on:{signUp:function(e){t.displaySignUp=!0}}})],1)],1)},q=[],K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(" Sign In ")])],1),a("v-card-text",[a("v-form",{model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{"prepend-icon":"person",name:"email",type:"text",rules:t.emailRules,label:"Email",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",type:"password",name:"input-10-1",label:"Password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.signIn}},[t._v("\n        Login\n        ")])],1),a("v-divider"),a("div",[a("p",{staticClass:"body-1",attrs:{id:"sign-up-prompt"}},[t._v("\n        Don't have an account? Sign up "),a("a",{on:{click:function(e){t.$emit("signUp")}}},[t._v("here")])])])],1)},J=[],Q={data:function(){return{valid:!1,email:"",emailRules:[function(t){return!!t||"E-mail is required"},function(t){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(t)||"E-mail must be valid"}],password:"",password_visible:!1}},methods:Object(r["a"])({},Object(s["b"])(["authenticateUser"]),{signIn:function(){var t=this;this.authenticateUser({username:this.email,password:this.password}).then(function(){t.$router.push({name:"Dashboard"})}).catch(function(t){console.log(t.message)})}})},X=Q,Y=(a("84b6"),Object(m["a"])(X,K,J,!1,null,"2d40623d",null));Y.options.__file="SignIn.vue";var tt=Y.exports,et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[t._v(" Create an Account ")])],1),a("v-card-text",[a("v-form",[a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],attrs:{"prepend-icon":"person","error-messages":t.errors.collect("email"),label:"E-mail","data-vv-name":"email"},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"required|min:8|verify_password",expression:"'required|min:8|verify_password'"}],ref:"password",attrs:{type:"password",name:"password",label:"Password","data-vv-name":"password","error-messages":t.errors.collect("password"),"prepend-icon":"lock"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}}),a("v-text-field",{directives:[{name:"validate",rawName:"v-validate",value:"confirmed:password",expression:"'confirmed:password'"}],attrs:{type:"password",label:"Password confirmation","data-vv-name":"password_confirmation",target:"password","error-messages":t.errors.collect("password_confirmation"),"prepend-icon":"lock"},model:{value:t.password_confirmation,callback:function(e){t.password_confirmation=e},expression:"password_confirmation"}})],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:t.createAccount}},[t._v(" Create Account ")])],1),a("v-divider"),a("div",[a("p",{staticClass:"body-1",attrs:{id:"sign-up-prompt"}},[t._v("\n        Already have an account? Sign in "),a("a",{on:{click:function(e){t.$emit("signIn")}}},[t._v("here")])])])],1)},at=[],it={$_veeValidate:{validator:"new"},data:function(){return{email:"",password:"",password_confirmation:"",canSubmit:!1,dictionary:{attributes:{email:"E-mail Address"},custom:{password_confirmation:{confirmed:"The passwords must match"}}}}},mounted:function(){this.$validator.localize("en",this.dictionary)},methods:Object(r["a"])({},Object(s["b"])(["signUp"]),{createAccount:function(){var t=this;this.$validator.validateAll().then(function(e){e&&t.signUp({username:t.email,password:t.password,attributes:{email:t.email}}).then(function(){console.log("Successfuly signed up")}).catch(function(t){console.log(new Error(t.message))})}).catch(function(t){console.log(new Error(t.message))})}})},ot=it,nt=(a("da27"),Object(m["a"])(ot,et,at,!1,null,"10c07215",null));nt.options.__file="SignUp.vue";var rt=nt.exports,st={components:{"app-sign-in":tt,"app-sign-up":rt},computed:Object(r["a"])({},Object(s["d"])({signedIn:function(t){return t.cognito.signedIn}})),data:function(){return{dialog:!1,displaySignUp:!1}},methods:Object(r["a"])({},Object(s["b"])(["signOut"]),{logOut:function(){var t=this;this.dialog=!1,this.signOut().then(function(){t.$router.push({name:"Landing"})})}})},lt=st,ct=(a("f861"),Object(m["a"])(lt,H,q,!1,null,"6681576c",null));ct.options.__file="User.vue";var dt=ct.exports,ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{id:"save-button",icon:""},nativeOn:{click:function(e){t.saveProject({notification:!0})}}},[a("v-icon",[t._v("\n    save\n  ")])],1)},vt=[],pt={mounted:function(){window.addEventListener("keydown",this.keyDown)},methods:Object(r["a"])({},Object(s["b"])({saveProject:"common/saveProject"}),{keyDown:function(t){"s"!==t.key||!0!==t.metaKey&&!0!==t.ctrlKey||(t.preventDefault(),document.getElementById("save-button").click())}})},ft=pt,ht=(a("3360"),Object(m["a"])(ft,ut,vt,!1,null,null,null));ht.options.__file="Save.vue";var mt=ht.exports,gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.exportData(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n    fa-download\n  ")])],1)},bt=[],wt={computed:Object(r["a"])({},Object(s["d"])({dataToExport:function(t){return t.annotation.project}})),methods:Object(r["a"])({},Object(s["b"])({refreshAnnotationState:"annotation/refreshAnnotationState"}),{exportData:function(){this.refreshAnnotationState();var t="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(this.dataToExport,null,2)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","AIDA_annotation.json"),document.body.appendChild(e),e.click(),e.remove()}})},yt=wt,Ot=(a("3dea"),Object(m["a"])(yt,gt,bt,!1,null,null,null));Ot.options.__file="Export.vue";var kt=Ot.exports,Ct={components:{"app-settings":U,"app-user":dt,"app-save":mt,"app-export":kt},methods:Object(r["a"])({},Object(s["b"])({toggleToolsDrawer:"editor/toggleToolsDrawer",toggleStudioDrawer:"editor/toggleStudioDrawer"}))},_t=Ct,xt=(a("1e18"),Object(m["a"])(_t,l,c,!1,null,"18e299ec",null));xt.options.__file="Toolbar.vue";var St=xt.exports,jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list",{staticClass:"pointers-please",attrs:{id:"toolList",dense:""}},[t.getStepTools().includes("pan")?a("app-pan",{attrs:{active:"pan"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pan"}}}):t._e(),a("v-divider"),t.getStepTools().includes("move")?a("app-move",{attrs:{active:"move"===t.activeTool},nativeOn:{click:function(e){t.activeTool="move"}}}):t._e(),t.getStepTools().includes("node")?a("app-node",{attrs:{active:"node"===t.activeTool},nativeOn:{click:function(e){t.activeTool="node"}}}):t._e(),a("v-divider"),t.getStepTools().includes("circle")?a("app-circle",{attrs:{active:"circle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="circle"}}}):t._e(),t.getStepTools().includes("rectangle")?a("app-rectangle",{attrs:{active:"rectangle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="rectangle"}}}):t._e(),t.getStepTools().includes("path")?a("app-path",{attrs:{active:"path"===t.activeTool},nativeOn:{click:function(e){t.activeTool="path"}}}):t._e(),t.getStepTools().includes("pencil")?a("app-pencil",{attrs:{active:"pencil"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pencil"}}}):t._e(),t.getStepTools().includes("paint")?a("app-paint",{attrs:{active:"paint"===t.activeTool},nativeOn:{click:function(e){t.activeTool="paint"}}}):t._e(),t.getStepTools().includes("grid")?a("app-grid",{attrs:{active:"grid"===t.activeTool},nativeOn:{click:function(e){t.activeTool="grid"}}}):t._e(),a("v-divider"),t.getStepTools().includes("delete")?a("app-delete",{attrs:{active:"delete"===t.activeTool},nativeOn:{click:function(e){t.activeTool="delete"}}}):t._e(),a("v-divider"),t.getStepTools().includes("faces")?a("app-faces",{attrs:{active:"faces"===t.activeTool},nativeOn:{click:function(e){t.activeTool="faces"}}}):t._e(),t.getStepTools().includes("megas")?a("app-megas",{attrs:{active:"megas"===t.activeTool},nativeOn:{click:function(e){t.activeTool="megas"}}}):t._e(),t.getStepTools().includes("filter")?a("app-filter",{attrs:{active:"filter"===t.activeTool},nativeOn:{click:function(e){t.activeTool="filter"}}}):t._e()],1)},Dt=[],It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"circle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-circle":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Circle Tool [c] ")])],1)],1)},At=[],Tt=(a("6c7b"),a("2222")),Pt=a.n(Tt),Mt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCircle:null,strokeWidth:2,radius:2e3}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.editor.activeStep},strokeScale:function(t){return t.editor.strokeScale}})),created:function(){var t=this,e=function(e){t.toolCircle.minDistance=4*t.strokeWidth},a=function(e){t.toolCircle.minDistance=0,t.radius=t.calculateDistance(e.downPoint,e.point);var a=new Pt.a.Path.Line(e.downPoint,e.point);a.strokeColor=new Pt.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.add(e.point),a.removeOn({drag:!0,down:!0,up:!0});var i=new Pt.a.Path.Circle(e.downPoint,t.radius);i.strokeColor=new Pt.a.Color("#2661D8"),i.strokeColor.alpha=.7,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0})},i=function(e){var a=new Pt.a.Path.Circle(e.downPoint,t.radius);a.strokeColor=new Pt.a.Color(t.getColor().stroke),a.strokeWidth=t.strokeWidth,a.fillColor=new Pt.a.Color(t.getColor().fill),a.data.countable=!0,a.data.type="circle",a.data.class=""};this.toolCircle=new Pt.a.Tool,this.toolCircle.onMouseDown=e,this.toolCircle.onMouseDrag=a,this.toolCircle.onMouseUp=i},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolCircle.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,o=e.x,n=e.y,r=Math.sqrt(Math.pow(o-a,2)+Math.pow(n-i,2));return r}})},Et=Mt,Lt=(a("4d5c"),Object(m["a"])(Et,It,At,!1,null,"0dd7a920",null));Lt.options.__file="Circle.vue";var Wt=Lt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"rectangle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        crop_landscape\n      ")])],1),a("span",[t._v(" Rectangel Tool [r] ")])],1)],1)},Zt=[],Ft={props:{active:{type:Boolean,default:!1}},data:function(){return{toolRect:null,strokeWidth:2}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.editor.strokeScale}})),created:function(){var t=this,e=function(e){var a=new Pt.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new Pt.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.removeOn({drag:!0,up:!0})},a=function(e){var a=new Pt.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new Pt.a.Color(t.getColor().stroke),a.fillColor=new Pt.a.Color(t.getColor().fill),a.strokeWidth=t.strokeWidth,a.data.type="rectangle",a.data.class=""};this.toolRect=new Pt.a.Tool,this.toolRect.onMouseDrag=e,this.toolRect.onMouseUp=a},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolRect.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)}})},Vt=Ft,$t=(a("f7b0"),Object(m["a"])(Vt,Nt,Zt,!1,null,null,null));$t.options.__file="Rectangle.vue";var Gt=$t.exports,Bt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"path",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        timeline\n      ")])],1),a("span",[t._v(" Path Tool [p] ")])],1)],1)},zt=[],Rt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPen:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.editor.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path");var a=t.path.hitTest(e.point,t.hitOptions);e.modifiers.option?(t.path.closed=!0,t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new Pt.a.Color(t.getColor().fill),t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.lastSegment?(t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.path.smooth())},a=function(e){var a=Pt.a.project.hitTest(e.point,t.hitOptions);a?a.segment===a.item.firstSegment?(t.path.closed=!0,t.path.selected=!1):a.segment!==a.item.firstSegment&&a.segment!==a.item.lastSegment||(t.path.selected=!1):t.path&&t.path.data.active&&(t.path.selected=!0,t.path.closed=!1)};this.toolPen=new Pt.a.Tool,this.toolPen.onMouseDown=e,this.toolPen.onMouseMove=a},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPen.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new Pt.a.Path;return t.strokeColor=new Pt.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},Ut=Rt,Ht=(a("438d"),Object(m["a"])(Ut,Bt,zt,!1,null,null,null));Ht.options.__file="Path.vue";var qt=Ht.exports,Kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pencil",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-pencil-alt":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Pencil Tool [m] ")])],1)],1)},Jt=[],Qt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPencil:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},stokeScale:function(t){return t.editor.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path")},a=function(e){t.path.add(e.point);var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new Pt.a.Color(t.getColor().fill)):(t.path.closed=!1,t.path.fillColor.alpha=0)},i=function(e){var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment&&(t.path.closed=!0,t.path.fillColor=new Pt.a.Color(t.getColor().fill)),t.path.selected=!1,t.path.simplify(),t.path.data.active=!1};this.toolPencil=new Pt.a.Tool,this.toolPencil.onMouseDown=e,this.toolPencil.onMouseDrag=a,this.toolPencil.onMouseUp=i},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPencil.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth},this.toolPencil.minDistance=5*this.strokeWidth},newPath:function(){var t=new Pt.a.Path;return t.strokeColor=new Pt.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},Xt=Qt,Yt=(a("7db0"),Object(m["a"])(Xt,Kt,Jt,!1,null,null,null));Yt.options.__file="Pencil.vue";var te=Yt.exports,ee=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"move",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Move Tool [v]")])],1)],1)},ae=[],ie=(a("ac6a"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolMove:null,hitOptions:null,strokeWidth:2,selectionGroup:null,toolMode:""}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=function(a){e=Pt.a.project.hitTest(a.point,t.hitOptions),t.selectionGroup.bounds.selected=!1,e?"bounds"===e.type?t.toolMode="transform":a.modifiers.shift?e.item.selected=!0:e.item.selected?t.toolMode="move":(Pt.a.project.deselectAll(),e.item.selected=!0,t.toolMode="move"):(Pt.a.project.deselectAll(),t.toolMode="select")},i=function(a){if("select"===t.toolMode){var i=new Pt.a.Shape.Rectangle(a.downPoint,a.point);i.strokeColor="#4D88D4",i.fillColor="#A3C5E8",i.opacity=.3,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0}),Pt.a.project.deselectAll(),Pt.a.project.getItems({class:"Path",inside:i.bounds,match:t.matchFilter}).forEach(function(t){t.selected=!0})}else if("move"===t.toolMode)t.selectionGroup.children.length>0?t.selectionGroup.position=t.selectionGroup.position.add(a.delta):e.item.position=e.item.position.add(a.delta);else if("transform"===t.toolMode){var o=null,n=null,r=null;e&&"top-left"===e.name?(o=a.point.x-t.selectionGroup.bounds.topRight.x,n=a.point.y-t.selectionGroup.bounds.bottomLeft.y,r=t.selectionGroup.bounds.bottomRight):e&&"top-right"===e.name?(o=a.point.x-t.selectionGroup.bounds.topLeft.x,n=a.point.y-t.selectionGroup.bounds.bottomRight.y,r=t.selectionGroup.bounds.bottomLeft):e&&"bottom-right"===e.name?(o=a.point.x-t.selectionGroup.bounds.bottomLeft.x,n=a.point.y-t.selectionGroup.bounds.topRight.y,r=t.selectionGroup.bounds.topLeft):e&&"bottom-left"===e.name&&(o=a.point.x-t.selectionGroup.bounds.bottomRight.x,n=a.point.y-t.selectionGroup.bounds.topLeft.y,r=t.selectionGroup.bounds.topRight);var s=Math.abs(o/t.selectionGroup.bounds.width),l=Math.abs(n/t.selectionGroup.bounds.height);t.selectionGroup.scale(s,l,r)}},o=function(e){t.selectionGroup=new Pt.a.Group(Pt.a.project.selectedItems),t.selectionGroup.isEmpty()||(t.selectionGroup.bounds.selected=!0),t.setSelectedItems(Pt.a.project.selectedItems)},n=function(e){if(t.selectionGroup&&t.selectionGroup.hitTest(e.point,t.hitOptions)){var a=t.selectionGroup.hitTest(e.point,t.hitOptions);"bottom-right"===a.name||"top-left"===a.name?Pt.a.view.element.style.cursor="nwse-resize":"bottom-left"===a.name||"top-right"===a.name?Pt.a.view.element.style.cursor="nesw-resize":"fill"===a.type&&(Pt.a.view.element.style.cursor="move")}else{var i=document.getElementById("annotation-canvas");i.style.cursor="auto"}},r=function(e){t.active&&("backspace"!==e.key&&"delete"!==e.key||Pt.a.project.selectedItems&&(t.selectionGroup.bounds.selected=!1,Pt.a.project.selectedItems.forEach(function(t){"Layer"!==t.className&&t.remove()})))};this.toolMove=new Pt.a.Tool,this.toolMove.onMouseDown=a,this.toolMove.onMouseDrag=i,this.toolMove.onMouseMove=n,this.toolMove.onKeyUp=r,this.toolMove.onMouseUp=o},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas",setSelectedItems:"annotation/setSelectedItems"}),{initialiseTool:function(){this.prepareCanvas(),this.toolMove.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.hitOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter},this.selectionGroup=new Pt.a.Group(Pt.a.project.selectedItems)},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})}),oe=ie,ne=(a("36a9"),Object(m["a"])(oe,ee,ae,!1,null,null,null));ne.options.__file="Move.vue";var re=ne.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pan",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[t.active?a("v-icon",{staticClass:"blue--text text--darken-1"},[t._v("\n        lock_open\n      ")]):a("v-icon",{staticClass:"grey--text text--darken-2"},[t._v("\n        lock_outline\n      ")])],1),a("span",[t._v(" Lock View Tool [space] ")])],1)],1)},le=[],ce={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPan:null}},mounted:function(){this.initialiseTool()},methods:{initialiseTool:function(){document.getElementById("annotation-canvas").setAttribute("class","pointers-no"),document.getElementById("osd-canvas").style.cursor="grab"}}},de=ce,ue=(a("dfca"),Object(m["a"])(de,se,le,!1,null,null,null));ue.options.__file="Pan.vue";var ve=ue.exports,pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"node",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Node Tool [a] ")])],1)],1)},fe=[],he={props:{active:{type:Boolean,default:!1}},data:function(){return{toolNode:null,hitOptions:null}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=null,i=function(i){e=Pt.a.project.hitTest(i.point,t.hitOptions),e?e.item.selected?"stroke"===e.type?a="adding-node":"segment"===e.type?(Pt.a.project.deselectAll(),e.item.selected=!0,e.segment.selected=!0,e.segment.handleIn.selected=!0,e.segment.handleOut.selected=!0,a="adjusting-segment"):"handle-out"!==e.type&&"handle-in"!==e.type||(a="adjusting-handle"):(Pt.a.project.deselectAll(),e.item.selected=!0,a="selecting"):Pt.a.project.deselectAll()},o=function(t){e&&"adjusting-segment"===a?e.segment.point=e.segment.point.add(t.delta):e&&"handle-out"===e.type&&"adjusting-handle"===a?e.segment.handleOut=e.segment.handleOut.add(t.delta):e&&"handle-in"===e.type&&"adjusting-handle"===a&&(e.segment.handleIn=e.segment.handleIn.add(t.delta))};this.toolNode=new Pt.a.Tool,this.toolNode.onMouseDown=i,this.toolNode.onMouseDrag=o},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolNode.activate();var t=this.imageWidth/(300*this.viewportZoom);this.hitOptions={segments:!0,stroke:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},me=he,ge=(a("1f95"),Object(m["a"])(me,pe,fe,!1,null,null,null));ge.options.__file="Node.vue";var be=ge.exports,we=a("2c58"),ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-delete"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        delete\n      ")])],1),a("span",[t._v(" Delete Tool ")])],1)],1)},Oe=[],ke={props:{active:{type:Boolean,default:!1}},data:function(){return{toolDelete:null,selectOptions:null,strokeWidth:2}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=[],i=null,o=function(o){if(e=Pt.a.project.hitTest(o.point,t.selectOptions),a=!e||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type&&"bounds"!==e.type?[]:[e.item],Pt.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var n in a)if(a[n].data.selectWith)for(var r in a[n].data.selectWith)a.push(a[n].data.selectWith[r]);i=new Pt.a.Group(a),i.selected=!0}},n=function(e){var o=new Pt.a.Shape.Rectangle(e.downPoint,e.point);if(o.strokeColor="#4D88D4",o.fillColor="#A3C5E8",o.opacity=.3,o.strokeWidth=t.strokeWidth,o.removeOn({drag:!0,down:!0,up:!0}),a=Pt.a.project.getItems({class:"Path",inside:o.bounds,match:t.matchFilter}),Pt.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var n in a)if(a[n].data.selectWith)for(var r in a[n].data.selectWith)a.push(a[n].data.selectWith[r]);i=new Pt.a.Group(a),i.selected=!0}},r=function(t){i&&i.remove()};this.toolDelete=new Pt.a.Tool,this.toolDelete.onMouseDown=o,this.toolDelete.onMouseDrag=n,this.toolDelete.onMouseUp=r},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolDelete.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},Ce=ke,_e=(a("39dd"),Object(m["a"])(Ce,ye,Oe,!1,null,null,null));_e.options.__file="Delete.vue";var xe=_e.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-paint-brush":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Paint Tool ")])],1)],1)},je=[],De={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPaint:null,strokeWidth:2,radius:2e3,brush:null,overlap:null,path:null,combinedPath:null}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.editor.activeStep}})),created:function(){var t=this,e=function(e){t.brush=new Pt.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:new Pt.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1})}),t.brush.removeOn({move:!0,drag:!0})},a=function(e){t.path=new Pt.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:t.getColor().stroke,fillColor:t.getColor().fill}).removeOn({drag:!0,up:!0,move:!0});var a=Pt.a.project.getItem({class:"Path",match:function(t){if("megakaryocyte"!==t.data.class)return!0},overlapping:t.path.bounds});console.log(a),a&&(e.modifiers.alt?t.combinedPath=a.subtract(t.path):t.combinedPath=a.unite(t.path),a.remove())},i=function(e){"up"===e.key?t.radius++:"down"===e.key&&t.radius--,console.log(e)};this.toolPaint=new Pt.a.Tool,this.toolPaint.onMouseMove=e,this.toolPaint.onMouseDrag=a,this.toolPaint.onKeyDown=i},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPaint.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,o=e.x,n=e.y,r=Math.sqrt(Math.pow(o-a,2)+Math.pow(n-i,2));return r}})},Ie=De,Ae=(a("1934"),Object(m["a"])(Ie,Se,je,!1,null,"6806ba32",null));Ae.options.__file="Paint.vue";var Te=Ae.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        grid_on\n      ")])],1),a("v-card",[a("v-list",[a("v-list-tile",[a("v-flex",{attrs:{xs5:"","justify-space-around":""}},[a("div",{attrs:{id:"switch"}},[a("v-switch",{attrs:{"input-value":t.visible},on:{change:t.toggleLayerVisibility}})],1)]),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Visibility\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridWidth,suffix:"px","single-line":""},on:{change:t.setGridWidth},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setGridWidth(e):null}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Width\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridHeight,suffix:"px","single-line":""},on:{change:t.setGridHeight},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setGridHeight(e):null}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Height\n          ")])],1)],1)],1)],1)],1)},Me=[],Ee={props:{active:{type:Boolean,default:!1}},data:function(){return{toolGrid:null,strokeWidth:2,gridLayer:!1,gridWidth:0,gridHeight:0,menu:!1,visible:!0}},computed:Object(r["a"])({},Object(s["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},imageHeight:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().y},strokeScale:function(t){return t.editor.strokeScale}})),created:function(){this.toolGrid=new Pt.a.Tool},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.gridLayer||this.createGrid(),this.toolGrid.activate()},createGrid:function(){this.gridLayer=new Pt.a.Layer({name:"guide"}),this.gridWidth=this.imageWidth/10,this.gridHeight=this.imageHeight/10,this.redrawGrid()},redrawGrid:function(){this.gridLayer.activate(),this.gridLayer.removeChildren();for(var t=Math.ceil(this.imageHeight/this.gridHeight),e=Math.ceil(this.imageWidth/this.gridWidth),a=0;a<t;a++)for(var i=0;i<e;i++){var o=new Pt.a.Path.Rectangle({from:[this.gridWidth*i,this.gridHeight*a],to:[this.gridWidth*i+this.gridWidth,this.gridHeight*a+this.gridHeight],strokeColor:"grey",strokeWidth:this.strokeWidth});o.strokeColor.alpha=.7}},toggleLayerVisibility:function(){this.visible=!this.visible,this.gridLayer.visible=!this.gridLayer.visible},setGridWidth:function(t){var e=this.gridWidth;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridWidth=Number(e),this.redrawGrid()},setGridHeight:function(t){var e=this.gridHeight;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridHeight=Number(e),this.redrawGrid()}})},Le=Ee,We=(a("20d1"),Object(m["a"])(Le,Pe,Me,!1,null,null,null));We.options.__file="Grid.vue";var Ne=We.exports,Ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"filter",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-filter":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Create class filter group",box:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.createFilterGroup(e):null}}})],1)],1),a("v-list",t._l(t.listOfFilters,function(e,i){return a("v-list-tile",{key:e.class,attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.class)}})],1),a("v-list-tile-action",[a("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(e){t.popFilter(i)}}},[a("v-icon",[t._v("close")])],1)],1)],1)}))],1)],1)],1)],1)},Fe=[],Ve=(a("6762"),a("2fdb"),{props:{active:{type:Boolean,default:!1}},data:function(){return{menu:!1,loading:!1,toggle_multiple:[0,1,2],predictions:{correct:[],flagged:[],incorrect:[],alan:{correct:[],flagged:[],incorrect:[]},gabi:{correct:[],flagged:[],incorrect:[]},gareth:{correct:[],flagged:[],incorrect:[]}},correctPredictions:[],flaggedPredictions:[],incorrectPredictions:[],visiblePredictions:{alan:[0,1,2],gareth:[0,1,2],gabi:[0,1,2]},listOfFilters:[]}},watch:{visiblePrediction:function(t){},listOfFilters:function(t){t.map(function(t){var e=Pt.a.project.getItems({data:{class:t.class}});e.map(function(t){return t.remove()})})},toggle_multiple:function(t){this.toggle_multiple.includes(0)?(Pt.a.project.activeLayer.addChildren(this.correctPredictions),this.correctPredictions=[]):(this.correctPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.correctPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(1)?(Pt.a.project.activeLayer.addChildren(this.flaggedPredictions),this.flaggedPredictions=[]):(this.flaggedPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.flaggedPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(2)?(Pt.a.project.activeLayer.addChildren(this.incorrectPredictions),this.incorrectPredictions=[]):(this.incorrectPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.incorrectPredictions.map(function(t){return t.remove()}))}},methods:{initialiseTool:function(){var t=Pt.a.project.getItems({data:{class:"megakaryocyte"}});this.predictions.correct=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.flagged=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.incorrect=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision})},createFilterGroup:function(t){this.listOfFilters.push({class:t.target.value,active:!1})},popFilter:function(t){this.listOfFilters.splice(t,1)}}}),$e=Ve,Ge=(a("0a64"),Object(m["a"])($e,Ze,Fe,!1,null,"50445868",null));Ge.options.__file="Filter.vue";var Be=Ge.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.activate(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-user-tag":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Faces Tool ")])],1)],1)},Re=[],Ue=a("bc3a"),He=a.n(Ue),qe={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:Object(r["a"])({},Object(s["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),methods:Object(r["a"])({},Object(s["c"])({getColor:"annotation/getColor"}),{activate:function(){var t=this;this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.loading=!0,He.a.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAeCFXV_oK3QjGQdypK_2hVTH_ck2mshFw",{requests:[{image:{source:{imageUri:this.imageUri}},features:{type:"FACE_DETECTION"},imageContext:{}}]}).then(function(e){t.loading=!1,console.log(e);var a=e.data.responses[0].faceAnnotations;for(var i in a){var o=[];for(var n in a[i].boundingPoly.vertices)o.push(new Pt.a.Point(a[i].boundingPoly.vertices[n].x,a[i].boundingPoly.vertices[n].y));var r=new Pt.a.Path(o);r.strokeColor=new Pt.a.Color(t.getColor()),r.closed=!0,r.strokeWidth=t.strokeWidth,r.data.type="rectangle",r.data.class="face"}}).catch(function(e){t.loading=!1,console.log("could not apply face detection, returned the following error: \n \n"+e)})},drawBoundingFaces:function(t){}})},Ke=qe,Je=(a("a45a"),Object(m["a"])(Ke,ze,Re,!1,null,"fd4de720",null));Je.options.__file="Faces.vue";var Qe=Je.exports,Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        youtube_searched_for\n      ")])],1),a("span",[t._v(" Megakaryocyte Classifier ")])],1)],1)},Ye=[],ta=a("aa78"),ea=a.n(ta),aa={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1,trackingRect:null}},computed:Object(r["a"])({},Object(s["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},tileSource:function(t){return t.image.OSDviewer.world.getItemAt(0).source},viewport:function(t){return t.image.OSDviewer.viewport},tiledImage:function(t){return t.image.OSDviewer.world.getItemAt(0)}})),created:function(){this.toolMega=new Pt.a.Tool},methods:Object(r["a"])({},Object(s["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(s["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){var t=this;this.prepareCanvas(),this.toolMega.activate(),this.strokeWidth=this.imageWidth/(300*this.viewportZoom),He.a.get("https://aida-private.firebaseio.com/megas.json ").then(function(e){var a=e.data;console.log(a),a.map(t.drawMega)}).then()},overlapsImage:function(t){return!(t.topLeft.x>this.tiledImage.getBounds().width||t.bottomRight.x<0)&&!(t.topLeft.y>this.tiledImage.getBounds().height||t.bottomRight.y<0)},saveToJSON:function(t,e){var a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t,null,2)),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.remove()},drawMega:function(t){var e=new Pt.a.Path.Rectangle({from:new Pt.a.Point(t.x_min,t.y_min),to:new Pt.a.Point(t.x_max,t.y_max),data:{type:"rectangle",class:t.class,data:{score:t.score,validations:[]}}});e.strokeColor=new Pt.a.Color(this.getColor().stroke),e.strokeWidth=this.strokeWidth}})},ia=aa,oa=(a("faa7"),Object(m["a"])(ia,Xe,Ye,!1,null,"24c407d4",null));oa.options.__file="Megakaryocytes.vue";var na=oa.exports,ra={components:{"app-circle":Wt,"app-rectangle":Gt,"app-path":qt,"app-move":re,"app-pan":ve,"app-node":be,"app-pencil":te,"app-count":we["default"],"app-delete":xe,"app-faces":Qe,"app-megas":na,"app-paint":Te,"app-grid":Ne,"app-filter":Be},data:function(){return{activeTool:"pan"}},mounted:function(){window.addEventListener("keydown",this.keyDown)},computed:Object(r["a"])({},Object(s["d"])({activeStep:function(t){return t.editor.activeStep},tools:function(t){return t.editor.tools}})),methods:Object(r["a"])({},Object(s["c"])({getStepTools:"editor/getStepTools"}),{keyDown:function(t){switch(t.keyCode){case 32:document.getElementById("pan").click();break;case 86:document.getElementById("move").click();break;case 65:document.getElementById("node").click();break;case 67:document.getElementById("circle").click();break;case 82:document.getElementById("rectangle").click();break;case 80:document.getElementById("path").click();break;case 77:document.getElementById("pencil").click();break}}})},sa=ra,la=(a("d5f7"),Object(m["a"])(sa,jt,Dt,!1,null,"9d01f368",null));la.options.__file="Tools.vue";var ca=la.exports,da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pointers-please studioPanel elevation-2"},[a("app-navigator"),a("app-layers"),a("app-images"),a("app-properties"),a("app-validations")],1)},ua=[],va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Navigator\n      ")])],1),a("div",{attrs:{id:"nav-container"}},[a("div",{attrs:{id:"navigator"}})]),a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{xs8:""}},[a("v-slider",{attrs:{value:t.getZoom,max:t.getMaxZoom,min:"0",step:"0"},on:{input:t.setZoom}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:t.getZoom,suffix:"x","single-line":""},on:{change:t.setZoom},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setZoom(e):null}}})],1)],1)],1)],1)],1)},pa=[],fa={computed:Object(r["a"])({},Object(s["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(s["c"])("image",["getZoom","getMaxZoom"])),methods:Object(r["a"])({},Object(s["b"])({setZoom:"image/setZoom"}))},ha=fa,ma=(a("303f"),Object(m["a"])(ha,va,pa,!1,null,"077a2f80",null));ma.options.__file="Navigator.vue";var ga=ma.exports,ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Layers\n      ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.newLayer(e)}}},[a("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          add\n        ")])],1)],1),a("v-list",{attrs:{id:"list"}},t._l(t.layers,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.selectLayer(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{class:[t.activeLayer===i?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Layer "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" visibility ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{value:null!=e.opacity?100*e.opacity:100,max:"100"},on:{input:t.setLayerOpacity}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setLayerOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerOpacity(e):null}}})],1)],1)],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Layer "+i,"single-line":""},on:{change:t.setLayerName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerName(e):null}}})],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:function(e){t.deleteActiveLayer().then(function(){t.setActiveLayer(0)})}}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},wa=[],ya={computed:Object(r["a"])({},Object(s["d"])({layers:function(t){return t.annotation.project.layers},activeLayer:function(t){return t.editor.activeLayer},steps:function(t){return t.editor.steps},activeStep:function(t){return t.editor.activeStep}})),methods:Object(r["a"])({},Object(s["b"])("annotation",["setLayerOpacity","newLayer","exportLayerJSON","setActiveLayer","setLayerOpacity","setLayerName","deleteActiveLayer"]),Object(s["b"])("editor",["setActiveStep"]),Object(s["b"])("common",["saveProject"]),{selectLayer:function(t){var e=this;this.steps.map(function(a){a.specificLayer===t&&e.setActiveStep(a)}),this.setActiveLayer(t),this.saveProject({notification:!1})}})},Oa=ya,ka=(a("7110"),Object(m["a"])(Oa,ba,wa,!1,null,"8d7262e2",null));ka.options.__file="Layers.vue";var Ca=ka.exports,_a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Channels\n      ")])],1),a("v-list",{attrs:{id:"list"}},t._l(t.getChannels,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.setActiveChannel(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n              "+t._s(e.name?e.name:"Channel "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" visibility ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{step:"0",max:"1"},on:{input:t.setChannelOpacity},model:{value:e.opacity,callback:function(a){t.$set(e,"opacity",a)},expression:"channel.opacity"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:null!==e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setChannelOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelOpacity(e):null}}})],1)],1)],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Channel "+i,"single-line":""},on:{change:t.setChannelName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelName(e):null}}})],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteChannel}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},xa=[],Sa={computed:Object(r["a"])({},Object(s["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(s["c"])({getChannels:"image/getChannels"})),methods:Object(r["a"])({},Object(s["b"])({setChannelOpacity:"image/setChannelOpacity",setActiveChannel:"image/setActiveChannel",setChannelName:"image/setChannelName",deleteChannel:"image/deleteChannel"}))},ja=Sa,Da=(a("d36d"),Object(m["a"])(ja,_a,xa,!1,null,"08f5e5fa",null));Da.options.__file="Images.vue";var Ia=Da.exports,Aa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Properties\n      ")]),a("v-spacer")],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            No. selected items:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(t.selectedItems.length)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Fill colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedFillColor,type:"fill"}})],1)],1)],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Stroke colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedStrokeColor,type:"stroke"}})],1)],1)],1)],1)],1)],1)},Ta=[],Pa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"225px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("a",{attrs:{slot:"activator"},slot:"activator"},[a("div",{staticClass:"color-tile",style:{"background-color":t.color.style}})]),a("v-card",[a("colour-picker",{attrs:{id:"picker"},model:{value:t.colorPick,callback:function(e){t.colorPick=e},expression:"colorPick"}})],1)],1)},Ma=[],Ea=a("c345"),La={components:{"colour-picker":Ea["Chrome"]},props:{color:{type:Object,default:function(){return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}},type:{type:String,default:function(){return"fill"}}},data:function(){return{dialog:!1,colorPick:{hsl:this.color.obj}}},computed:Object(r["a"])({},Object(s["d"])({selectedItems:function(t){return t.annotation.selectedItems}})),watch:{dialog:function(t){t?this.colorPick={hsl:this.color.obj}:t||this.selectedItems.length>0&&("fill"===this.type?this.changeItemsFillColor(this.selectedItems):"stroke"===this.type&&this.changeItemsStrokeColor(this.selectedItems))}},methods:{changeItemsFillColor:function(t){var e=this;t.map(function(t){t.fillColor=new Pt.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})},changeItemsStrokeColor:function(t){var e=this;t.map(function(t){t.strokeColor=new Pt.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})}}},Wa=La,Na=(a("882c"),Object(m["a"])(Wa,Pa,Ma,!1,null,"2af7e386",null));Na.options.__file="ColorPicker.vue";var Za=Na.exports,Fa={components:{"colour-picker":Za},computed:Object(r["a"])({},Object(s["d"])({selectedItems:function(t){return t.annotation.selectedItems}}),{selectedFillColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.fillColor&&t.fillColor.hue===a[0].fillColor.hue&&t.fillColor.saturation===a[0].fillColor.saturation&&t.fillColor.lightness===a[0].fillColor.lightness&&t.fillColor.alpha===a[0].fillColor.alpha})){var t={h:this.selectedItems[0].fillColor.hue,s:this.selectedItems[0].fillColor.saturation,l:this.selectedItems[0].fillColor.lightness,a:this.selectedItems[0].fillColor.alpha};return{style:this.selectedItems[0].fillColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}},selectedStrokeColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.strokeColor&&t.strokeColor.hue===a[0].strokeColor.hue&&t.strokeColor.saturation===a[0].strokeColor.saturation&&t.strokeColor.lightness===a[0].strokeColor.lightness&&t.strokeColor.alpha===a[0].strokeColor.alpha})){var t={h:this.selectedItems[0].strokeColor.hue,s:this.selectedItems[0].strokeColor.saturation,l:this.selectedItems[0].strokeColor.lightness,a:this.selectedItems[0].strokeColor.alpha};return{style:this.selectedItems[0].strokeColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}}),methods:Object(r["a"])({},Object(s["c"])({getSelectedItems:"annotation/getSelectedItems"}))},Va=Fa,$a=(a("1ce3"),Object(m["a"])(Va,Aa,Ta,!1,null,"c537d106",null));$a.options.__file="Properties.vue";var Ga=$a.exports,Ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Validations\n      ")])],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Prediction:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.prediction)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Score:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.score)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Weight:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.weight)+"\n        ")])],1),a("v-list-group",{attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n                Validation labels\n              ")])],1)],1),t._l(t.users,function(e,i){return a("v-list-tile",{key:i,attrs:{id:"tab-item"}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n\n                "+t._s(e)+"\n\n              ")])],1)],1)})],2)],1)],1)],1)},za=[],Ra={computed:Object(r["a"])({},Object(s["d"])({selected:function(t){return t.annotation.selectedItems[0]}}),{prediction:function(){return this.selected?this.selected.data.class:""},score:function(){return this.selected?Math.round(100*this.selected.data.data.score)/100:""},weight:function(){return this.selected?Math.round(100*this.selected.data.data.validationWeight)/100:""},validations:function(){return this.selected?this.selected.data.data.validations:""},users:function(){if(this.selected){var t=[];return this.selected.data.data.validations.map(function(e){return t.indexOf(e.user)>-1||t.push(e.user),t}),t}return""},userValidations:function(){if(this.selected){var t={};return this.selected.data.data.validations.map(function(e){t[e.user]=e}),console.log(t),t}return""}}),methods:Object(r["a"])({},Object(s["b"])({}))},Ua=Ra,Ha=(a("0109"),Object(m["a"])(Ua,Ba,za,!1,null,"6625936a",null));Ha.options.__file="Validations.vue";var qa=Ha.exports,Ka={components:{"app-navigator":ga,"app-layers":Ca,"app-images":Ia,"app-properties":Ga,"app-validations":qa}},Ja=Ka,Qa=(a("8731"),Object(m["a"])(Ja,da,ua,!1,null,"161ab91a",null));Qa.options.__file="Studio.vue";var Xa=Qa.exports,Ya=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{value:t.active,color:t.color,timeout:0,top:""}},[t._v("\n  "+t._s(t.text)+"\n  "),a("v-btn",{attrs:{dark:"",flat:""},on:{click:t.dismissSnackbar}},[t._v("\n    Close\n  ")])],1)},ti=[],ei={computed:Object(r["a"])({},Object(s["d"])({active:function(t){return t.app.snackbar.active},text:function(t){return t.app.snackbar.text},color:function(t){return t.app.snackbar.color},timeout:function(t){return t.app.snackbar.timeout}})),methods:Object(r["a"])({},Object(s["b"])({dismissSnackbar:"app/dismissSnackbar"})),watch:{active:function(t){var e=this;t&&this.timeout>0&&setTimeout(function(){e.dismissSnackbar()},this.timeout)}}},ai=ei,ii=Object(m["a"])(ai,Ya,ti,!1,null,null,null);ii.options.__file="Snackbar.vue";var oi=ii.exports,ni={components:{"app-toolbar":St,"app-tools":ca,"app-studio":Xa,"app-snackbar":oi},computed:Object(r["a"])({},Object(s["d"])({toolbar:function(t){return t.app.toolbar},toolsDrawer:function(t){return t.editor.toolsDrawer},studioDrawer:function(t){return t.editor.studioDrawer}}))},ri=ni,si=(a("034f"),Object(m["a"])(ri,o,n,!1,null,null,null));si.options.__file="App.vue";var li=si.exports,ci=a("8c4f"),di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{id:"home"}},[a("v-layout",{attrs:{id:"hero",row:""}},[a("v-flex",{attrs:{xs12:"","text-xs-center":""}},[a("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{id:"title-container",xs12:""}},[a("h1",{attrs:{id:"title"}},[t._v(" AIDA ")])]),a("v-flex",{attrs:{id:"subtitle-container",xs12:""}},[a("h2",{attrs:{id:"subtitle"}},[t._v(" Annotate Image Data by Assignment ")])]),a("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[a("v-btn",{attrs:{dark:"",block:"",to:"/example"}},[a("v-icon",[t._v("web")]),a("span",{staticClass:"button-text"},[t._v("\n              Get Started\n            ")])],1)],1),a("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[a("v-btn",{attrs:{light:"",block:"",href:"https://github.com/alanaberdeen/AIDA"}},[a("i",{staticClass:"icon text--darken-1 fab fa-github",attrs:{"aria-hidden":"true"}}),a("span",{staticClass:"button-text"},[t._v("\n              Github\n            ")])])],1),a("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[a("v-btn",{attrs:{light:"",block:"",href:"https://aida.gitbook.io/docs/"}},[a("v-icon",[t._v("fa-book")]),a("span",{staticClass:"button-text"},[t._v("\n              Docs\n            ")])],1)],1)],1)],1)],1),a("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",lg8:""}},[a("v-card",{staticClass:"info-card"},[a("div",{staticClass:"info-content"},[a("h4",[t._v("\n            The Basic Idea\n          ")]),a("p",[t._v("\n            AIDA brings an open source and web-based workflow to image annotation.\n          ")]),a("p",[t._v("\n            Currently, image annotation is largely confined to single computer\n            shrink-wrapped software with limited interactive capabilities and\n            few, usually closed, data formats. AIDA is a web interface that enables distributed teams\n            of researchers to direclty annotate images with easy\n            to use on screen drawing tools. AIDA supports the\n            creation of well defined annotation trials which include\n            a series of high resolution images or video and a\n            specific set of annotation tasks.\n          ")]),a("p",[t._v("\n            The trial and annotation data can be accessed\n            programatically via a "),a("a",{attrs:{href:"https://aida.gitbook.io/docs"}},[t._v("\n              documented API. ")])])])]),a("v-card",{staticClass:"info-card"},[a("div",{staticClass:"info-content"},[a("h4",[t._v("\n            How has it been implemented?\n          ")]),a("p",[t._v("\n            The user interface is a "),a("a",{attrs:{href:"https://vuejs.org/"}},[t._v("VueJS")]),t._v(" Single Page Application\n            built to web standards, encapsulating and interacting\n            with two other significant JavaScript libraries:\n            "),a("a",{attrs:{href:"https://openseadragon.github.io/"}},[t._v("\n            OpenSeaDragon")]),t._v(" to manipulate the high-res images\n            and "),a("a",{attrs:{href:"http://paperjs.org/"}},[t._v("PaperJS")]),t._v(" to\n            provide the drawing functionality. "),a("a",{attrs:{href:"https://vuetifyjs.com/en/"}},[t._v(" VuetifyJS ")]),t._v(" is used as a UI component library which implements the material design language. This interface generates a JSON file that is written to a database via a web API. Login enables specific\n            configuration of the tool for different trials\n            and tasks.\n          ")])])]),a("v-card",{staticClass:"info-card"},[a("div",{staticClass:"info-content"},[a("h4",[t._v("\n            What's planned?\n          ")]),a("p",[t._v("\n            The software is published as Open Source under the permissive\n            "),a("a",{attrs:{href:"https://github.com/alanaberdeen/AIDA/blob/master/LICENSE"}},[t._v("\n            MIT license ")]),t._v(" and can be modified by anyone.\n            The "),a("a",{attrs:{href:"https://aida.gitbook.io/docs/api-reference"}},[t._v(" API ")]),t._v("\n            will also be public.\n\n            The next stage of development will be to integrate\n            intelligent tools that leverage machine learning techniques.\n            We hope to enhance the ability of the user to quickly and\n            accuratley mark up images.\n          ")])])]),a("v-card",{staticClass:"info-card"},[a("div",{staticClass:"info-content"},[a("h4",[t._v("\n            About\n          ")]),a("p",[t._v("\n            This is a project of Alan Aberdeen, Jens Rittscher,\n            and Nasullah Khalid at the University of Oxford,\n            specifically the\n            "),a("a",{attrs:{href:"http://www.ludwig.ox.ac.uk/jens-rittscher-group-page"}},[t._v("\n              Quantitative Biological Imaging Group\n            ")]),t._v(".\n\n          ")])])])],1)],1)],1)},ui=[],vi={mounted:function(){this.toolbarOff(),this.toolsDrawerOff(),this.studioDrawerOff()},methods:Object(r["a"])({},Object(s["b"])({toolbarOff:"app/toolbarOff",toolsDrawerOff:"editor/toolsDrawerOff",studioDrawerOff:"editor/studioDrawerOff"}))},pi=vi,fi=(a("5492"),Object(m["a"])(pi,di,ui,!1,null,"65089477",null));fi.options.__file="Landing.vue";var hi=fi.exports,mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("div",{attrs:{id:"stepper-item"}},[a("app-stepper")],1),a("div",{attrs:{id:"view-item"}},[a("app-view",{attrs:{type:t.type}})],1)])},gi=[],bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.steps?a("div",{attrs:{id:"stepper-container"}},[a("v-stepper",{staticClass:"pointers-please",attrs:{id:"stepper",value:t.activeStep+1,"non-linear":""}},[a("v-stepper-header",{attrs:{id:"stepper-header"}},[t._l(t.steps,function(e,i){return[a("v-stepper-step",{key:i,attrs:{step:e.id,editable:""},nativeOn:{click:function(a){t.activateStep(e)}}}),e.id!==t.steps.length?a("v-divider",{key:e.length}):t._e()]})],2)],1),a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},["validate"===t.steps[t.activeStep].type?a("app-validate"):a("p",{attrs:{id:"hint"}},[t._v("\n      "+t._s(t.steps[t.activeStep].instruction)+"\n    ")])],1)],1):t._e()},wi=[],yi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},[a("div",{attrs:{id:"hint"}},[t._v("\n\n    "+t._s(t.steps[t.activeStep].instruction)+"\n\n    "),a("v-divider"),this.begunValidation?a("v-container",{attrs:{fluid:"",id:"validation-controls"}},[a("v-layout",[a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:t.intialisePreviousMegaForValidation}},[a("v-icon",[t._v(" arrow_back ")])],1)],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"mega-title"}},[t._v("\n                Mega: "+t._s(this.activeMegaIndex+1)+" / "+t._s(this.getMegas().length)+"\n              ")])]),a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"mega-title"}},[t._v("\n                Score: "+t._s(Math.round(100*this.getMegas()[this.activeMegaIndex].data.score)/100)+"\n              ")])]),a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"mega-title"}},[t._v("\n                Mega: "+t._s(this.getMegas()[this.activeMegaIndex].class)+"\n              ")])])],1),a("v-divider"),a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-btn",{attrs:{small:"",color:"success",outline:!("correct"===this.activeValidationButton),depressed:"correct"===this.activeValidationButton},on:{click:t.validatePredictionAsCorrect}},[t._v("\n              Correct\n            ")]),a("v-btn",{attrs:{small:"",color:"warning",outline:!("flag"===this.activeValidationButton),depressed:"flag"===this.activeValidationButton},on:{click:t.flagPredictionForReview}},[t._v("\n              Flag for review\n            ")]),a("v-btn",{attrs:{small:"",color:"error",outline:!("incorrect"===this.activeValidationButton),depressed:"incorrect"===this.activeValidationButton},on:{click:t.validatePredictionAsIncorrect}},[t._v("\n              Incorrect\n            ")])],1)],1),a("v-flex",{attrs:{xs2:"","text-xs-right":""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:t.intialiseNextMegaForValidation}},[a("v-icon",[t._v(" arrow_forward ")])],1)],1)],1)],1):a("div",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:t.beginValidation}},[t._v(" Begin ")])],1)],1)])},Oi=[],ki={computed:Object(r["a"])({},Object(s["d"])({activeStep:function(t){return t.editor.activeStep},steps:function(t){return t.editor.steps},viewport:function(t){return t.image.OSDviewer.viewport},activeValidationIndex:function(t){return t.editor.activeValidationIndex}})),data:function(){return{begunValidation:!1,activeMegaIndex:0,activeValidationButton:"",paperMega:null,timeBeganValidatingAtInMs:0}},mounted:function(){window.addEventListener("keydown",this.keyDown),window.addEventListener("keyup",this.keyUp)},destroyed:function(){window.removeEventListener("keydown",this.keyDown)},methods:Object(r["a"])({},Object(s["c"])({getMegas:"annotation/getMegas"}),Object(s["b"])({saveProject:"common/saveProject",setActiveValidationIndex:"editor/setActiveValidationIndex"}),{intialiseNextMegaForValidation:function(){this.activeMegaIndex===this.getMegas().length-1?this.activeMegaIndex=0:this.activeMegaIndex++,this.goToMega(this.getMegas()[this.activeMegaIndex]),this.paperMega=this.findPaperMega(this.getMegas()[this.activeMegaIndex]),this.timeBeganValidatingAtInMs=Date.now()},intialisePreviousMegaForValidation:function(){0===this.activeMegaIndex?this.activeMegaIndex=this.getMegas().length-1:this.activeMegaIndex--,this.goToMega(this.getMegas()[this.activeMegaIndex]),this.paperMega=this.findPaperMega(this.getMegas()[this.activeMegaIndex]),this.timeBeganValidatingAtInMs=Date.now()},validatePredictionAsCorrect:function(){var t=this;this.paperMega.strokeColor="#4CAF50",this.paperMega.fillColor="#4CAF50",this.flashAndFadeFillColor(this.paperMega),this.paperMega.data["data"].validations.push({decision:"correct",timeStamp:Date.now(),decisionTimeInMs:Date.now()-this.timeBeganValidatingAtInMs}),setTimeout(function(){t.intialiseNextMegaForValidation(),t.setActiveValidationIndex(t.activeMegaIndex),t.saveProject({notification:!1})},500)},flagPredictionForReview:function(){var t=this;this.paperMega.strokeColor="#FFC107",this.paperMega.fillColor="#FFC107",this.flashAndFadeFillColor(this.paperMega),this.paperMega.data["data"].validations.push({decision:"flag",timeStamp:Date.now(),decisionTimeInMs:Date.now()-this.timeBeganValidatingAtInMs}),setTimeout(function(){t.intialiseNextMegaForValidation(),t.setActiveValidationIndex(t.activeMegaIndex),t.saveProject({notification:!1})},500)},validatePredictionAsIncorrect:function(){var t=this;this.paperMega.strokeColor="#FF5252",this.paperMega.fillColor="#FF5252",this.flashAndFadeFillColor(this.paperMega),this.paperMega.data["data"].validations.push({decision:"incorrect",timeStamp:Date.now(),decisionTimeInMs:Date.now()-this.timeBeganValidatingAtInMs}),setTimeout(function(){t.intialiseNextMegaForValidation(),t.setActiveValidationIndex(t.activeMegaIndex),t.saveProject({notification:!1})},500)},goToMega:function(t){this.viewport.fitBoundsWithConstraints(this.viewport.imageToViewportRectangle(new ea.a.Rect(t.from.x,t.from.y,t.to.x-t.from.x,t.to.y-t.from.y)),!0)},findPaperMega:function(t){return Pt.a.project.getItem({inside:new Pt.a.Rectangle(t.from,t.to),class:"Path"})},keyDown:function(t){switch(t.keyCode){case 39:this.intialiseNextMegaForValidation();break;case 37:this.intialisePreviousMegaForValidation();break;case 49:t.getModifierState("Meta")||this.validatePredictionAsCorrect();break;case 50:t.getModifierState("Meta")||this.flagPredictionForReview();break;case 51:t.getModifierState("Meta")||this.validatePredictionAsIncorrect()}},flashAndFadeFillColor:function(t){t.fillColor.alpha=.6;var e=window.setInterval(function(){t.fillColor.alpha=t.fillColor.alpha-.05},100);window.setTimeout(function(){window.clearInterval(e)},800)},beginValidation:function(){0===this.activeValidationIndex?this.activeMegaIndex=this.getMegas().length-1:this.activeMegaIndex=this.activeValidationIndex-1,this.intialiseNextMegaForValidation(),this.begunValidation=!0}})},Ci=ki,_i=(a("df85"),Object(m["a"])(Ci,yi,Oi,!1,null,"51c7017e",null));_i.options.__file="Validate.vue";var xi=_i.exports,Si={components:{"app-validate":xi},computed:Object(r["a"])({},Object(s["d"])({activeStep:function(t){return t.editor.activeStep},steps:function(t){return t.editor.steps}})),methods:Object(r["a"])({},Object(s["b"])({setActiveStep:"editor/setActiveStep",saveProject:"common/saveProject"}),{activateStep:function(t){this.setActiveStep(t),this.saveProject({notification:!1})}})},ji=Si,Di=(a("1946"),Object(m["a"])(ji,bi,wi,!1,null,"743ed3e2",null));Di.options.__file="Stepper.vue";var Ii=Di.exports,Ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2 pointers-please",attrs:{id:"view"}},[a("app-osd-canvas"),a("app-annotation-canvas")],1)},Ti=[],Pi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"osd-canvas"}})},Mi=[],Ei={mounted:function(){this.setupOSDCanvas("osd-canvas")},methods:Object(r["a"])({},Object(s["b"])({setupOSDCanvas:"image/setupOSDCanvas"}))},Li=Ei,Wi=(a("dfa3"),Object(m["a"])(Li,Pi,Mi,!1,null,null,null));Wi.options.__file="OSDCanvas.vue";var Ni=Wi.exports,Zi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:"annotation-canvas"}})},Fi=[],Vi={computed:Object(r["a"])({},Object(s["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}})),watch:{viewSize:function(){Pt.a.view.viewSize.width=this.viewSize[0],Pt.a.view.viewSize.height=this.viewSize[1]},imageZoom:function(){},imageCenter:function(){}},mounted:function(){this.setupAnnotation("annotation-canvas")},methods:Object(r["a"])({},Object(s["b"])("annotation",["setupAnnotation"]))},$i=Vi,Gi=(a("89cf"),Object(m["a"])($i,Zi,Fi,!1,null,null,null));Gi.options.__file="AnnotationCanvas.vue";var Bi=Gi.exports,zi={components:{"app-osd-canvas":Ni,"app-annotation-canvas":Bi},props:{type:{type:String,default:"examples"}},mounted:function(){this.synchroniseAnnotationAndOSDCanvas(),this.loadProject(this.type)},destroyed:function(){this.resetStateToDefault()},methods:Object(r["a"])({},Object(s["b"])({synchroniseAnnotationAndOSDCanvas:"common/synchroniseAnnotationAndOSDCanvas",loadProject:"common/loadProject",resetStateToDefault:"common/resetStateToDefault"}))},Ri=zi,Ui=(a("c8b2"),Object(m["a"])(Ri,Ai,Ti,!1,null,"30244778",null));Ui.options.__file="View.vue";var Hi=Ui.exports,qi={components:{"app-tools":ca,"app-studio":Xa,"app-stepper":Ii,"app-view":Hi,"app-toolbar":St},props:{type:{type:String,default:"examples"}},mounted:function(){this.toolbarOn(),window.innerWidth>800?this.toolsDrawerOn():this.toolsDrawerOff(),window.innerWidth>1e3?this.studioDrawerOn():this.studioDrawerOff()},destroyed:function(){this.toolsDrawerOff(),this.studioDrawerOff()},methods:Object(r["a"])({},Object(s["b"])({toolbarOn:"app/toolbarOn",toolsDrawerOn:"editor/toolsDrawerOn",studioDrawerOn:"editor/studioDrawerOn",toolsDrawerOff:"editor/toolsDrawerOff",studioDrawerOff:"editor/studioDrawerOff"}))},Ki=qi,Ji=(a("2d9e"),Object(m["a"])(Ki,mi,gi,!1,null,"41a896e0",null));Ji.options.__file="Editor.vue";var Qi=Ji.exports,Xi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("header",[a("app-toolbar")],1),a("v-container",{attrs:{id:"content-container",fluid:""}},[a("v-layout",{attrs:{row:"",wrap:"","fill-height":"","justify-space-between":""}},[a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/example/dzi"}},[a("v-card-media",{attrs:{src:"https://s3-eu-west-1.amazonaws.com/aida-example/ui-images/slide_example.png",height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                Deep Zoom\n              ")]),a("div",[t._v("\n                Annotate a super hi-res Deep Zoom image with multiple tiled\n                layers.\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n            ")])],1)],1)],1),a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/example/simple"}},[a("v-card-media",{attrs:{src:"https://s3-eu-west-1.amazonaws.com/aida-example/ui-images/simple_example.png",height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                Simple\n              ")]),a("div",[t._v("\n                Annotate a standard image (no fancy Deep Zooming).\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n            ")])],1)],1)],1),a("v-flex",{attrs:{xs10:"",sm4:""}},[a("v-card",{attrs:{to:"/new"}},[a("v-card-media",{attrs:{src:"https://s3-eu-west-1.amazonaws.com/aida-example/ui-images/fresh.png",height:"200px"}}),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n                New\n              ")]),a("div",[t._v("\n                Start from scratch!\n              ")])])]),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" get started\n            ")])],1)],1)],1)],1)],1)],1)},Yi=[],to={components:{"app-toolbar":St}},eo=to,ao=(a("a03d"),Object(m["a"])(eo,Xi,Yi,!1,null,"2d5a15c2",null));ao.options.__file="Examples.vue";var io=ao.exports;i["default"].use(ci["a"]);var oo=new ci["a"]({routes:[{path:"/",name:"Landing",component:hi},{path:"/example/dzi",name:"DZI Example",component:Qi,props:{default:!0,type:"dzi"}},{path:"/example/simple",name:"Simple Example",component:Qi,props:{default:!0,type:"simple"}},{path:"/example",name:"Examples",component:io},{path:"/new",name:"New",component:Qi,props:{default:!0,type:"new"}}]}),no={getMaxZoom:function(t){return t.OSDviewer?Math.round(t.OSDviewer.viewport.getMaxZoom()):10},getZoom:function(t){if(t.OSDviewer){var e=t.OSDviewer.viewport.getZoom();return e<100?Math.round(10*e)/10:Math.round(e)}return"na"},getImageWidth:function(t){if(t.OSDviewer)return t.OSDviewer.world.getItemCount()>0?t.OSDviewer.world.getItemAt(0).getContentSize.x:0},getChannels:function(t,e,a){var i=[];if(t.OSDviewer)for(var o=t.OSDviewer.world.getItemCount(),n=0;n<o;n++)i.push({channel:t.OSDviewer.world.getItemAt(n),id:n,opacity:t.OSDviewer.world.getItemAt(n).getOpacity(),name:t.images[n].name,visible:t.OSDviewer.world.getItemAt(n).getOpacity()>0,opacityCache:0});return i}},ro={resetImageState:function(t){var e=t.commit,a=t.rootState;e("resetImageState",a)},setupOSDCanvas:function(t,e){var a=t.commit;a("setupOSDCanvas",e)},loadImages:function(t,e){t.state;var a=t.dispatch;a("addImagesToState",e).then(function(){for(var t in e)a("addOSDImage",e[t])})},addImagesToState:function(t,e){var a=t.commit;a("addImagesToState",e)},addOSDImage:function(t,e){var a=t.commit;a("addOSDImage",e)},setActiveChannel:function(t,e){var a=t.commit;a("setActiveChannel",e)},toggleChannelOpacity:function(t,e){var a=t.commit;a("toggleChannelOpacity",e)},setChannelOpacity:function(t,e){var a=t.commit,i=t.rootState;a("setChannelOpacity",{input:e,activeChannel:i.editor.activeChannel,rootState:i})},setChannelName:function(t,e){var a=t.commit;t.rootState;a("setChannelName",e)},setZoom:function(t,e){var a=t.commit;a("setZoom",e)}},so={resetImageState:function(t){t.OSDviewer.navigator.destroy(),t.OSDviewer.destroy(),t={OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}}},setupOSDCanvas:function(t,e){t.OSDviewer=new ea.a.Viewer({id:e,showNavigationControl:!1,showNavigator:!0,navigatorId:"navigator"}),t.OSDviewer.addHandler("resize",function(e){t.view.viewSize=[e.newContainerSize.x,e.newContainerSize.y];var a=t.OSDviewer.world.getItemAt(0).viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[a.x,a.y]}),t.OSDviewer.addHandler("zoom",function(e){t.view.imageZoom=t.OSDviewer.world.getItemAt(0).viewportToImageZoom(t.OSDviewer.viewport.getZoom(!0));var a=t.OSDviewer.world.getItemAt(0).viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[a.x,a.y]}),t.OSDviewer.addHandler("pan",function(e){var a=t.OSDviewer.world.getItemAt(0).viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[a.x,a.y]})},addImagesToState:function(t,e){for(var a in t.images=[],e)t.images.push(e[a])},addOSDImage:function(t,e){"dzi"===e.type?t.OSDviewer.addTiledImage({tileSource:e.source,x:0,y:0,opacity:1}):"simple"===e.type&&t.OSDviewer.addSimpleImage({url:e.source,x:0,y:0,opacity:1})},setActiveChannel:function(t,e){t.activeChannel=e},toggleChannelOpacity:function(t,e){e.opacity>0?e.channel.setOpacity(0):e.channel.setOpacity(.7)},setChannelOpacity:function(t,e){var a=e.input,i=1;"string"===typeof a||"number"===typeof a?(a=Number(a),i=a>1?a/100:a):a instanceof KeyboardEvent&&(i=a.target.value/100),t.OSDviewer.world.getItemAt(t.activeChannel).setOpacity(i)},setChannelName:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value:e,i["default"].set(t.images[t.activeChannel],"name",a)},setZoom:function(t,e){var a;a=e instanceof KeyboardEvent?Number(e.target.value):Number(e),"number"===typeof a&&a>0&&t.OSDviewer.viewport.zoomTo(a)}},lo={OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}},co={namespaced:!0,state:lo,getters:no,actions:ro,mutations:so},uo=a("6bde"),vo={getSegments:function(t){var e=[];return t.segments.forEach(function(t){e.push({point:{x:t.point.x,y:t.point.y},handleIn:{x:t.handleIn.x,y:t.handleIn.y},handleOut:{x:t.handleOut.x,y:t.handleOut.y}})}),e},getColor:function(t){return{fill:null!==t.fillColor?{hue:t.fillColor.hue,saturation:t.fillColor.saturation,lightness:t.fillColor.lightness,alpha:t.fillColor.alpha}:null,stroke:null!==t.strokeColor?{hue:t.strokeColor.hue,saturation:t.strokeColor.saturation,lightness:t.strokeColor.lightness,alpha:t.strokeColor.alpha}:null}},defaultColors:function(){return[{fill:{hue:170,saturation:.44,lightness:.69,alpha:.7},stroke:{hue:170,saturation:.44,lightness:.69,alpha:1}},{fill:{hue:60,saturation:1,lightness:.85,alpha:.7},stroke:{hue:60,saturation:1,lightness:.85,alpha:1}},{fill:{hue:248,saturation:.3,lightness:.79,alpha:.7},stroke:{hue:248,saturation:.3,lightness:.79,alpha:1}},{fill:{hue:6,saturation:.94,lightness:.72,alpha:.7},stroke:{hue:6,saturation:.94,lightness:.72,alpha:1}},{fill:{hue:205,saturation:.49,lightness:.66,alpha:.7},stroke:{hue:205,saturation:.49,lightness:.66,alpha:1}},{fill:{hue:32,saturation:.97,lightness:.69,alpha:.7},stroke:{hue:32,saturation:.97,lightness:.69,alpha:1}},{fill:{hue:82,saturation:.64,lightness:.64,alpha:.7},stroke:{hue:82,saturation:.64,lightness:.64,alpha:1}},{fill:{hue:329,saturation:.89,lightness:.9,alpha:.7},stroke:{hue:329,saturation:.89,lightness:.9,alpha:1}},{fill:{hue:0,saturation:0,lightness:.85,alpha:.7},stroke:{hue:0,saturation:0,lightness:.85,alpha:1}},{fill:{hue:299,saturation:.32,lightness:.62,alpha:.7},stroke:{hue:299,saturation:.32,lightness:.62,alpha:1}}]}},po={resetAnnotationState:function(t){i["default"].set(t,"project",{name:"An AIDA project",layers:[]}),Pt.a.project.remove()},refreshAnnotationState:function(t,e){Pt.a.project.layers.forEach(function(e){"guide"!==e.name&&i["default"].set(t.project.layers,[e.index],{name:t.project.layers[e.index]?t.project.layers[e.index].name:e.name,opacity:e.opacity,items:[]})}),Pt.a.project.getItems({className:"Path"}).forEach(function(e){"circle"===e.data.type?t.project.layers[e.layer.index].items.push({class:e.data.class,type:"circle",color:vo.getColor(e),center:{x:e.position.x,y:e.position.y},radius:e.bounds.width/2,data:e.data.data}):"rectangle"===e.data.type?t.project.layers[e.layer.index].items.push({class:e.data.class,type:"rectangle",color:vo.getColor(e),from:{x:e.bounds.topLeft.x,y:e.bounds.topRight.y},to:{x:e.bounds.bottomRight.x,y:e.bounds.bottomRight.y},data:e.data.data}):t.project.layers[e.layer.index].items.push({class:e.data.class,type:"path",color:vo.getColor(e),segments:vo.getSegments(e),closed:e.closed,data:e.data.data})})},setupAnnotation:function(t,e){Pt.a.setup(e)},loadAidaAnnotation:function(t,e){t.project=e.annotation,t.project.layers.forEach(function(e){var a=new Pt.a.Layer;a.opacity=e.opacity,e.items&&e.items.forEach(function(e){var a;a="circle"===e.type?new Pt.a.Path.Circle({center:e.center,radius:e.radius,data:{type:"circle",countable:!0,class:e.class,data:e.data}}):"rectangle"===e.type?new Pt.a.Path.Rectangle({from:e.from,to:e.to,data:{type:"rectangle",class:e.class,data:e.data}}):new Pt.a.Path({segments:e.segments,closed:!!e.closed&&e.closed,data:{type:"path",class:e.class,data:e.data}}),a.closed&&(e.color&&e.color.fill?"string"===typeof e.color.fill||e.color.fill instanceof String?(a.fillColor=e.color.fill,a.fillColor.alpha=.2):a.fillColor=new Pt.a.Color({hue:e.color.fill.hue,saturation:e.color.fill.saturation,lightness:e.color.fill.lightness,alpha:e.color.fill.alpha}):(a.fillColor="blue",a.fillColor.alpha=0)),e.color&&e.color.stroke?"string"===typeof e.color.fill||e.color.fill instanceof String?a.strokeColor=e.color.stroke:a.strokeColor=new Pt.a.Color({hue:e.color.stroke.hue,saturation:e.color.stroke.saturation,lightness:e.color.stroke.lightness,alpha:e.color.stroke.alpha}):a.strokeColor=t.defaultColors[a.layer.index%t.defaultColors.length].stroke})}),Pt.a.project.layers[e.activeLayer].activate()},loadPaperStringAnnotation:function(t,e){Pt.a.project.importJSON(e.annotation),Pt.a.project.layers[e.activeLayer].activate()},prepareCanvas:function(t,e){Pt.a.view.element.classList.contains("pointers-no")&&Pt.a.view.element.classList.remove("pointers-no"),Pt.a.project.layers[e.editor.activeLayer].activate()},newLayer:function(t){var e=new Pt.a.Layer({position:Pt.a.view.center});e.opacity=1,t.project.layers.push({name:"Layer "+(t.project.layers.length+1),opacity:1,items:[]})},setActiveLayer:function(t,e){Pt.a.project.layers[e].activate()},setLayerOpacity:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value/100:e/100,a>1?a=1:e<0&&(a=0),Pt.a.project.activeLayer.opacity=a,i["default"].set(t.project.layers[Pt.a.project.activeLayer.index],"opacity",a)},setLayerName:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value:e,Pt.a.project.activeLayer.name=a,i["default"].set(t.project.layers[Pt.a.project.activeLayer.index],"name",a)},deleteActiveLayer:function(t){t.project.layers.splice(Pt.a.project.activeLayer.index,1),Pt.a.project.activeLayer.remove()},setProjectName:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value:e,t.project.name=a},setSelectedItems:function(t,e){t.selectedItems=e}},fo={resetAnnotationState:function(t){var e=t.commit;e("resetAnnotationState")},refreshAnnotationState:function(t,e){var a=t.commit;a("refreshAnnotationState",e)},setupAnnotation:function(t,e){var a=t.commit;a("setupAnnotation",e)},loadAnnotation:function(t,e){var a=t.dispatch,i=t.rootState;"object"===Object(uo["a"])(e)?a("loadAidaAnnotation",{annotation:e,activeLayer:i.editor.activeLayer}):"string"===typeof e&&a("loadPaperStringAnnotation",{annotation:e,activeLayer:i.editor.activeLayer}).then(function(){a("refreshAnnotationState")})},loadAidaAnnotation:function(t,e){var a=t.commit;a("loadAidaAnnotation",e)},loadPaperStringAnnotation:function(t,e){var a=t.commit;a("loadPaperStringAnnotation",e)},prepareCanvas:function(t,e){var a=t.commit,i=t.rootState;a("prepareCanvas",i)},newLayer:function(t,e){var a=t.commit;a("newLayer")},setActiveLayer:function(t,e){var a=t.commit,i=t.dispatch;a("setActiveLayer",e),i("editor/setEditorActiveLayer",e,{root:!0})},setLayerOpacity:function(t,e){var a=t.commit;a("setLayerOpacity",e)},setLayerName:function(t,e){var a=t.commit;a("setLayerName",e)},deleteActiveLayer:function(t){var e=t.commit;e("deleteActiveLayer")},setProjectName:function(t,e){var a=t.commit;a("setProjectName",e)},setSelectedItems:function(t,e){var a=t.commit;a("setSelectedItems",e)}},ho={getColor:function(t,e,a){if(a.editor.steps&&a.editor.steps[a.editor.activeStep].color)return a.editor.steps[a.editor.activeStep].color;var i=a.editor.activeLayer;return t.defaultColors[i%t.defaultColors.length]},getMegas:function(t){var e=t.project.layers.filter(function(t){return"Megas"===t.name});return e.length>0?e[0].items:-1}},mo={project:{name:"An AIDA project",layers:[]},selectedItems:[],currentColor:null,defaultColors:vo.defaultColors()},go={namespaced:!0,state:mo,getters:ho,actions:fo,mutations:po},bo={getStepTools:function(t){return t.steps&&t.steps[t.activeStep].tools?t.steps[t.activeStep].tools:["pan","circle","rectangle","path","pencil","move","node","count","delete","megas","filter"]}},wo={resetEditorState:function(t){var e=t.commit;e("resetEditorState")},setActiveStep:function(t,e){var a=t.commit,i=t.dispatch;"number"===typeof e.specificLayer&&i("annotation/setActiveLayer",e.specificLayer,{root:!0}),a("setActiveStep",e.id-1)},setEditorActiveLayer:function(t,e){var a=t.commit;a("setEditorActiveLayer",e)},loadConfig:function(t,e){var a=t.commit,i=t.rootState;a("loadConfig",{editor:e,rootState:i})},toggleSettings:function(t,e){var a=t.commit;a("toggleSettings")},toggleToolsDrawer:function(t){var e=t.commit;e("toggleToolsDrawer")},toolsDrawerOff:function(t){var e=t.commit;e("toolsDrawerOff")},toolsDrawerOn:function(t){var e=t.commit;e("toolsDrawerOn")},toggleStudioDrawer:function(t){var e=t.commit;e("toggleStudioDrawer")},studioDrawerOff:function(t){var e=t.commit;e("studioDrawerOff")},studioDrawerOn:function(t){var e=t.commit;e("studioDrawerOn")},setActiveValidationIndex:function(t,e){var a=t.commit;a("setActiveValidationIndex",e)}},yo={resetEditorState:function(t){({type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null})},setActiveStep:function(t,e){t.activeStep=e},setEditorActiveLayer:function(t,e){t.activeLayer=e},loadConfig:function(t,e){var a=Object(r["a"])({},t,e.editor);i["default"].set(e.rootState,"editor",a)},toggleSettings:function(t){t.settingsFlag=!t.settingsFlag},toggleToolsDrawer:function(t){t.toolsDrawer=!t.toolsDrawer},toolsDrawerOff:function(t){t.toolsDrawer=!1},toolsDrawerOn:function(t){t.toolsDrawer=!0},toggleStudioDrawer:function(t){t.studioDrawer=!t.studioDrawer},studioDrawerOff:function(t){t.studioDrawer=!1},studioDrawerOn:function(t){t.studioDrawer=!0},setActiveValidationIndex:function(t,e){t.activeValidationIndex=e}},Oo={type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null,settingsFlag:!1,toolsDrawer:!1,studioDrawer:!1,activeValidationIndex:0,strokeScale:10},ko={namespaced:!0,state:Oo,getters:bo,actions:wo,mutations:yo},Co=_o;function _o(t){var e={};for(var a in e["annotation"]=t.annotation,e["editor"]={type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:[]},t.steps){var i=t.steps[a];e.editor.steps.push({ROI:i.ROI,specificLayer:i.id-1,id:i.id,instruction:i.instruction,tools:i.tools,color:{fill:i.color.fill,stroke:i.color.stroke}})}for(var o in e["images"]=[],t.channels){var n=t.channels[o];e.images.push({name:n.name,source:n.url,type:"dzi"})}return e}var xo={projectEndpoint:""},So={resetStateToDefault:function(t){var e=t.dispatch;e("editor/resetEditorState","",{root:!0}),e("annotation/resetAnnotationState","",{root:!0}),e("image/resetImageState","",{root:!0})},loadProject:function(t,e){var a=t.dispatch,i=t.commit,o="https://aida-testing.firebaseio.com/"+e+".json ";i("setProjectEndpoint",o),He.a.get(o).then(function(t){var e=t.data;t.data.config&&(e=Co(t.data.config)),a("editor/loadConfig",e.editor,{root:!0}).then(function(){a("synchroniseAnnotationAndOSDCanvas")}),a("image/loadImages",e.images,{root:!0}),a("annotation/loadAnnotation",e.annotation,{root:!0})}).catch(function(t){console.log("Could not load all data from external source. Returned the following error: \n \n"+t)})},saveProject:function(t,e){var a=t.state,i=t.rootState,o=t.dispatch;o("annotation/refreshAnnotationState","",{root:!0}).then(function(){var t=a.projectEndpoint;He.a.put(t,{editor:i.editor,annotation:i.annotation.project,images:i.image.images}).then(function(t){console.log("Saved State.\nStatus response: "+t.statusText),console.log(t),e.notification&&o("app/activateSnackbar",{text:"Success: the annotations were successfully saved.",color:"success"},{root:!0})}).catch(function(t){console.log("Could not save state: \nReturned following Error: \n"+t),e.notification&&o("app/activateSnackbar",{text:"Error: the annotations could not be saved.",color:"error"},{root:!0})})})},synchroniseAnnotationAndOSDCanvas:function(t){var e=t.commit,a=t.rootState;e("synchroniseAnnotationAndOSDCanvas",{viewer:a.image.OSDviewer,strokeScale:a.editor.strokeScale})},setActiveStepAndLayer:function(t,e){var a=t.dispatch;a("setActiveLayer",e),a("setActiveStep",e)}},jo={synchroniseAnnotationAndOSDCanvas:function(t,e){var a=e.viewer,i=e.strokeScale;a.addHandler("update-viewport",function(){var t=a.viewport.getZoom(!0),e=a.world.getItemAt(0);Pt.a.view.zoom=e.viewportToImageZoom(t);var o=e.viewportToImageCoordinates(a.viewport.getCenter(!0));Pt.a.view.center=new Pt.a.Point(o.x,o.y),Pt.a.project.getItems({class:Pt.a.Path}).map(function(a){a.strokeWidth=e.getContentSize().x*i/(1e3*t)})})},setProjectEndpoint:function(t,e){t.projectEndpoint=e}},Do={namespaced:!0,state:xo,actions:So,mutations:jo},Io={toolbarOff:function(t){t.toolbar=!1},toolbarOn:function(t){t.toolbar=!0},toggleToolsDrawer:function(t){t.toolsDrawer=!t.toolsDrawer},toolsDrawerOff:function(t){t.toolsDrawer=!1},toolsDrawerOn:function(t){t.toolsDrawer=!0},toggleStudioDrawer:function(t){t.studioDrawer=!t.studioDrawer},studioDrawerOff:function(t){t.studioDrawer=!1},studioDrawerOn:function(t){t.studioDrawer=!0},dismissSnackbar:function(t){t.snackbar.active=!1},activateSnackbar:function(t,e){t.snackbar.active=!0,t.snackbar.text=e.text?e.text:"notification",t.snackbar.color=e.color?e.color:"info",t.snackbar.timeout=e.timeout?e.timeout:2e3}},Ao={toolbarOff:function(t){var e=t.commit;e("toolbarOff")},toolbarOn:function(t){var e=t.commit;e("toolbarOn")},toggleToolsDrawer:function(t){var e=t.commit;e("toggleToolsDrawer")},toolsDrawerOff:function(t){var e=t.commit;e("toolsDrawerOff")},toolsDrawerOn:function(t){var e=t.commit;e("toolsDrawerOn")},toggleStudioDrawer:function(t){var e=t.commit;e("toggleStudioDrawer")},studioDrawerOff:function(t){var e=t.commit;e("studioDrawerOff")},studioDrawerOn:function(t){var e=t.commit;e("studioDrawerOn")},dismissSnackbar:function(t){var e=t.commit;e("dismissSnackbar")},activateSnackbar:function(t,e){var a=t.commit;a("activateSnackbar",e)}},To=a("c9eb"),Po=a.n(To),Mo={toolbar:!1,toolsDrawer:!0,studioDrawer:!0,snackbar:{active:!1,text:"this is a notification",color:"info",timeout:3e3}},Eo={namespaced:!0,state:Mo,getters:Po.a,actions:Ao,mutations:Io};i["default"].use(s["a"]);var Lo=new s["a"].Store({modules:{app:Eo,image:co,annotation:go,editor:ko,common:Do}}),Wo=(a("585e"),a("ce5b")),No=a.n(Wo);a("bf40");a.d(e,"eventBus",function(){return Zo}),i["default"].use(No.a),i["default"].config.productionTip=!1;var Zo=new i["default"];new i["default"]({router:oo,store:Lo,render:function(t){return t(li)}}).$mount("#app")},"585e":function(t,e,a){},"5a26":function(t,e,a){},"5dde":function(t,e,a){},"61ce":function(t,e,a){},"66db":function(t,e,a){},"6e3a":function(t,e,a){},"6e42":function(t,e,a){},7110:function(t,e,a){"use strict";var i=a("7796"),o=a.n(i);o.a},7329:function(t,e,a){"use strict";var i=a("34bc"),o=a.n(i);o.a},7796:function(t,e,a){},7964:function(t,e,a){},"7a2a":function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("c576"),o=a.n(i);o.a},"84b6":function(t,e,a){"use strict";var i=a("a0a1"),o=a.n(i);o.a},"85b0":function(t,e,a){},"86f5":function(t,e,a){},8731:function(t,e,a){"use strict";var i=a("02e2"),o=a.n(i);o.a},"882c":function(t,e,a){"use strict";var i=a("caed"),o=a.n(i);o.a},"89cf":function(t,e,a){"use strict";var i=a("a2c1"),o=a.n(i);o.a},"8a52":function(t,e,a){},"8b35":function(t,e,a){},"8e33":function(t,e,a){},9165:function(t,e,a){},"987e":function(t,e,a){},"9a3b":function(t,e,a){},"9c9c":function(t,e,a){},a03d:function(t,e,a){"use strict";var i=a("cdf6"),o=a.n(i);o.a},a0a1:function(t,e,a){},a2c1:function(t,e,a){},a45a:function(t,e,a){"use strict";var i=a("9c9c"),o=a.n(i);o.a},afe2:function(t,e,a){},c21b:function(t,e,a){},c576:function(t,e,a){},c8b2:function(t,e,a){"use strict";var i=a("dcde"),o=a.n(i);o.a},c9eb:function(t,e){},caed:function(t,e,a){},cb36:function(t,e,a){},cb52:function(t,e,a){},cd8c:function(t,e,a){},cdc8:function(t,e,a){"use strict";var i=a("987e"),o=a.n(i);o.a},cdf6:function(t,e,a){},d36d:function(t,e,a){"use strict";var i=a("1d95"),o=a.n(i);o.a},d5f7:function(t,e,a){"use strict";var i=a("6e3a"),o=a.n(i);o.a},d5fb:function(t,e,a){},da27:function(t,e,a){"use strict";var i=a("cd8c"),o=a.n(i);o.a},dc3a:function(t,e,a){},dcde:function(t,e,a){},df85:function(t,e,a){"use strict";var i=a("cb52"),o=a.n(i);o.a},dfa3:function(t,e,a){"use strict";var i=a("66db"),o=a.n(i);o.a},dfca:function(t,e,a){"use strict";var i=a("6e42"),o=a.n(i);o.a},e2b8:function(t,e){},e9a6:function(t,e,a){"use strict";var i=a("faa2"),o=a.n(i);o.a},eb36:function(t,e,a){"use strict";var i=a("e2b8"),o=a.n(i);e["default"]=o.a},f7b0:function(t,e,a){"use strict";var i=a("8e33"),o=a.n(i);o.a},f861:function(t,e,a){"use strict";var i=a("85b0"),o=a.n(i);o.a},faa2:function(t,e,a){},faa7:function(t,e,a){"use strict";var i=a("552a"),o=a.n(i);o.a},ff65:function(t,e,a){}});
//# sourceMappingURL=app.2ea01129.js.map