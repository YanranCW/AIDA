!function(t){function e(e){for(var a,s,l=e[0],r=e[1],c=e[2],v=0,p=[];v<l.length;v++)s=l[v],o[s]&&p.push(o[s][0]),o[s]=0;for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a]);for(u&&u(e);p.length;)p.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,l=1;l<n.length;l++){var r=n[l];0!==o[r]&&(a=!1)}a&&(i.splice(e--,1),t=s(s.s=n[0]))}return t}var a={},o={1:0},i=[];function s(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=a,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},s.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var l=window.webpackJsonp=window.webpackJsonp||[],r=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=r;i.push([74,0]),n()}({138:function(t,e,n){"use strict";var a=n(274);n.n(a).a},139:function(t,e,n){"use strict";var a=n(276);n.n(a).a},140:function(t,e,n){"use strict";var a=n(278);n.n(a).a},142:function(t,e,n){"use strict";var a=n(280);n.n(a).a},143:function(t,e,n){"use strict";var a=n(282);n.n(a).a},144:function(t,e,n){"use strict";var a=n(284);n.n(a).a},145:function(t,e,n){"use strict";var a=n(286);n.n(a).a},146:function(t,e,n){"use strict";var a=n(288);n.n(a).a},147:function(t,e,n){"use strict";var a=n(290);n.n(a).a},148:function(t,e,n){"use strict";var a=n(292);n.n(a).a},149:function(t,e,n){t.exports=n.p+"static/img/simple_example.2424b2f.png"},150:function(t,e,n){t.exports=n.p+"static/img/dzi_example.25ea708.png"},151:function(t,e,n){"use strict";var a=n(294);n.n(a).a},152:function(t,e,n){"use strict";var a=n(296);n.n(a).a},153:function(t,e,n){"use strict";var a=n(298);n.n(a).a},154:function(t,e,n){"use strict";var a=n(300);n.n(a).a},155:function(t,e,n){"use strict";var a=n(302);n.n(a).a},156:function(t,e,n){"use strict";var a=n(304);n.n(a).a},157:function(t,e,n){"use strict";var a=n(306);n.n(a).a},158:function(t,e,n){"use strict";var a=n(308);n.n(a).a},159:function(t,e,n){"use strict";var a=n(310);n.n(a).a},160:function(t,e,n){"use strict";var a=n(312);n.n(a).a},161:function(t,e,n){"use strict";var a=n(314);n.n(a).a},180:function(t,e,n){"use strict";var a=n(316);n.n(a).a},181:function(t,e,n){"use strict";var a=n(318);n.n(a).a},182:function(t,e,n){"use strict";var a=n(320);n.n(a).a},183:function(t,e,n){"use strict";var a=n(322);n.n(a).a},184:function(t,e,n){"use strict";var a=n(324);n.n(a).a},185:function(t,e,n){"use strict";var a=n(326);n.n(a).a},186:function(t,e,n){"use strict";var a=n(328);n.n(a).a},187:function(t,e,n){"use strict";var a=n(330);n.n(a).a},188:function(t,e,n){"use strict";var a=n(332);n.n(a).a},189:function(t,e){},191:function(t,e){},192:function(t,e,n){"use strict";var a=n(337);n.n(a).a},224:function(t,e){},274:function(t,e){},276:function(t,e){},278:function(t,e){},280:function(t,e){},282:function(t,e){},284:function(t,e){},286:function(t,e){},288:function(t,e){},290:function(t,e){},292:function(t,e){},294:function(t,e){},296:function(t,e){},298:function(t,e){},300:function(t,e){},302:function(t,e){},304:function(t,e){},306:function(t,e){},308:function(t,e){},310:function(t,e){},312:function(t,e){},314:function(t,e){},316:function(t,e){},318:function(t,e){},320:function(t,e){},322:function(t,e){},324:function(t,e){},326:function(t,e){},328:function(t,e){},330:function(t,e){},332:function(t,e){},337:function(t,e){},74:function(t,e,n){"use strict";n.r(e);var a=n(4),o=n(1),i=Object(o.a)({},function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{toolbar:"","pointer-events":"none"}},[e("v-content",[e("router-view")],1)],1)},[],!1,null,null,null).exports,s=n(35),l=n(3),r=n.n(l),c=n(2),u={mounted:function(){this.resetState()},methods:r()({},Object(c.b)(["resetState"]))},v=(n(192),Object(o.a)(u,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{id:"home"}},[n("v-layout",{attrs:{id:"hero",row:""}},[n("v-flex",{attrs:{xs12:"","text-xs-center":""}},[n("v-layout",{attrs:{row:"",wrap:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{id:"title-container",xs12:""}},[n("h1",{attrs:{id:"title"}},[t._v(" AIDA ")])]),t._v(" "),n("v-flex",{attrs:{id:"subtitle-container",xs12:""}},[n("h2",{attrs:{id:"subtitle"}},[t._v(" Annotate Image Data by Assignment ")])]),t._v(" "),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{dark:"",block:"",to:"/example"}},[n("v-icon",[t._v("web")]),t._v(" "),n("span",{staticClass:"button-text"},[t._v("\n              Example\n            ")])],1)],1),t._v(" "),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{light:"",block:"",href:"https://github.com/alanaberdeen/AIDA"}},[n("i",{staticClass:"icon text--darken-1 fab fa-github",attrs:{"aria-hidden":"true"}}),t._v(" "),n("span",{staticClass:"button-text"},[t._v("\n              Github\n            ")])])],1),t._v(" "),n("v-flex",{attrs:{id:"button-container",xs8:"",sm4:"",md3:"",lg2:"","text-xs-center":""}},[n("v-btn",{attrs:{light:"",block:"",href:"https://aida.gitbook.io/docs/"}},[n("v-icon",[t._v("fa-book")]),t._v(" "),n("span",{staticClass:"button-text"},[t._v("\n              Docs\n            ")])],1)],1)],1)],1)],1),t._v(" "),n("v-layout",{attrs:{row:"","align-center":"","justify-center":""}},[n("v-flex",{attrs:{xs12:"",lg8:""}},[n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            The Basic Idea\n          ")]),t._v(" "),n("p",[t._v("\n            AIDA brings an open source and web-based workflow to image annotation.\n          ")]),t._v(" "),n("p",[t._v("\n            Currently, image annotation is largely confined to single computer\n            shrink-wrapped software with limited interactive capabilities and\n            few, usually closed, data formats. AIDA is a web interface that enables distributed teams\n            of researchers to direclty annotate images with easy\n            to use on screen drawing tools. AIDA supports the\n            creation of well defined annotation trials which include\n            a series of high resolution images or video and a\n            specific set of annotation tasks.\n          ")]),t._v(" "),n("p",[t._v("\n            The trial and annotation data can be accessed\n            programatically via a "),n("a",{attrs:{href:"https://aida.gitbook.io/docs/api-reference"}},[t._v("\n              documented API. ")])])])]),t._v(" "),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            How has it been implemented?\n          ")]),t._v(" "),n("p",[t._v("\n            The user interface is a "),n("a",{attrs:{href:"https://vuejs.org/"}},[t._v("VueJS")]),t._v(" Single Page Application\n            built to web standards, encapsulating and interacting\n            with two other significant JavaScript libraries:\n            "),n("a",{attrs:{href:"https://openseadragon.github.io/"}},[t._v("\n            OpenSeaDragon")]),t._v(" to manipulate the high-res images\n            and "),n("a",{attrs:{href:"http://paperjs.org/"}},[t._v("PaperJS")]),t._v(" to\n            provide the drawing functionality.\n            This interface generates a JSON file that is written\n            to a database via a web API. Login enables specific\n            configuration of the tool for different trials\n            and tasks.\n          ")])])]),t._v(" "),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            What's planned?\n          ")]),t._v(" "),n("p",[t._v("\n            The software is published as Open Source under the permissive\n            "),n("a",{attrs:{href:"https://github.com/alanaberdeen/AIDA/blob/master/LICENSE"}},[t._v("\n            MIT license ")]),t._v(" and can be modified by anyone.\n            The "),n("a",{attrs:{href:"https://aida.gitbook.io/docs/api-reference"}},[t._v(" API ")]),t._v("\n            will also be public.\n\n            The next stage of development will be to integrate\n            intelligent tools that leverage machine learning techniques.\n            We hope to enhance the ability of the user to quickly and\n            accuratley mark up images.\n          ")])])]),t._v(" "),n("v-card",{staticClass:"info-card"},[n("div",{staticClass:"info-content"},[n("h4",[t._v("\n            About\n          ")]),t._v(" "),n("p",[t._v("\n            This is a project of Alan Aberdeen, Jens Rittscher,\n            and Nasullah Khalid at the University of Oxford,\n            specifically the\n            "),n("a",{attrs:{href:"http://www.ludwig.ox.ac.uk/jens-rittscher-group-page"}},[t._v("\n              Quantitative Biological Imaging Group\n            ")]),t._v(".\n\n          ")])])])],1)],1)],1)},[],!1,null,"8f4d568a",null).exports),p=n(0),d=n.n(p),h={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCircle:null,strokeWidth:400,radius:2e3}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.editor.activeStep}})),created:function(){var t=this;this.toolCircle=new d.a.Tool,this.toolCircle.onMouseDown=function(e){t.toolCircle.minDistance=4*t.strokeWidth},this.toolCircle.onMouseDrag=function(e){t.toolCircle.minDistance=0,t.radius=t.calculateDistance(e.downPoint,e.point);var n=new d.a.Path.Line(e.downPoint,e.point);n.strokeColor=new d.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.add(e.point),n.removeOn({drag:!0,down:!0,up:!0});var a=new d.a.Path.Circle(e.downPoint,t.radius);a.strokeColor=new d.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),a.strokeWidth=t.strokeWidth,a.removeOn({drag:!0,down:!0,up:!0})},this.toolCircle.onMouseUp=function(e){var n=new d.a.Path.Circle(e.downPoint,t.radius);n.strokeColor=new d.a.Color(t.getDefaultLayerColor().stroke),n.strokeWidth=t.strokeWidth,n.fillColor=new d.a.Color(t.getDefaultLayerColor().fill),n.data.countable=!0,n.data.subType="circle",ve.$emit("updateMarkerCount")}},methods:r()({},Object(c.b)(["prepareCanvas"]),Object(c.c)(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolCircle.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)},calculateDistance:function(t,e){var n=t.x,a=t.y,o=e.x,i=e.y;return Math.sqrt(Math.pow(o-n,2)+Math.pow(i-a,2))}})},f=(n(188),Object(o.a)(h,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-circle":!0,faIcons:!t.active,faIconsActive:t.active}})]),t._v(" "),n("span",[t._v(" Circle Tool ")])],1)],1)},[],!1,null,"80871c68",null).exports),m={props:{active:{type:Boolean,default:!1}},data:function(){return{toolRect:null,strokeWidth:400}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this;this.toolRect=new d.a.Tool,this.toolRect.onMouseDrag=function(e){var n=new d.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new d.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,up:!0})},this.toolRect.onMouseUp=function(e){var n=new d.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new d.a.Color(t.getDefaultLayerColor().stroke),n.fillColor=new d.a.Color(t.getDefaultLayerColor().fill),n.strokeWidth=t.strokeWidth,n.data.subType="rectangle"}},methods:r()({},Object(c.b)(["prepareCanvas"]),Object(c.c)(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolRect.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)}})},g=(n(187),Object(o.a)(m,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        crop_landscape\n      ")])],1),t._v(" "),n("span",[t._v(" Rectangel Tool ")])],1)],1)},[],!1,null,null,null).exports),b={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPen:null,strokeWidth:400,hitOptions:null,path:null}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this;this.toolPen=new d.a.Tool,this.toolPen.onMouseDown=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0);var n=t.path.hitTest(e.point,t.hitOptions);e.modifiers.option?(t.path.closed=!0,t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):n&&n.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new d.a.Color(t.getDefaultLayerColor().fill),t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):n&&n.segment===t.path.lastSegment?(t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.path.smooth())},this.toolPen.onMouseMove=function(e){var n=d.a.project.hitTest(e.point,t.hitOptions);n?n.segment===n.item.firstSegment?(t.path.closed=!0,t.path.selected=!1):n.segment!==n.item.firstSegment&&n.segment!==n.item.lastSegment||(t.path.selected=!1):t.path&&t.path.data.active&&(t.path.selected=!0,t.path.closed=!1)}},methods:r()({},Object(c.b)(["prepareCanvas"]),Object(c.c)(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolPen.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new d.a.Path;return t.strokeColor=new d.a.Color(this.getDefaultLayerColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},y=(n(186),Object(o.a)(b,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        timeline\n      ")])],1),t._v(" "),n("span",[t._v(" Path Tool ")])],1)],1)},[],!1,null,null,null).exports),_={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPencil:null,strokeWidth:400,hitOptions:null,path:null}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this;this.toolPencil=new d.a.Tool,this.toolPencil.onMouseDown=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0)},this.toolPencil.onMouseDrag=function(e){t.path.add(e.point);var n=t.path.hitTest(e.point,t.hitOptions);n&&n.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new d.a.Color(t.getDefaultLayerColor().fill)):(t.path.closed=!1,t.path.fillColor=new d.a.Color({hue:200,saturation:.7,lightness:.5,alpha:0}))},this.toolPencil.onMouseUp=function(e){var n=t.path.hitTest(e.point,t.hitOptions);n&&n.segment===t.path.firstSegment&&(t.path.closed=!0,t.path.fillColor=new d.a.Color(t.getDefaultLayerColor().fill)),t.path.selected=!1,t.path.simplify(),t.path.data.active=!1}},methods:r()({},Object(c.b)(["prepareCanvas"]),Object(c.c)(["getDefaultLayerColor"]),{initialiseTool:function(){this.prepareCanvas(),this.toolPencil.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth},this.toolPencil.minDistance=5*this.strokeWidth},newPath:function(){var t=new d.a.Path;return t.strokeColor=new d.a.Color(this.getDefaultLayerColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},w=(n(185),Object(o.a)(_,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-pencil-alt":!0,faIcons:!t.active,faIconsActive:t.active}})]),t._v(" "),n("span",[t._v(" Pencil Tool ")])],1)],1)},[],!1,null,null,null).exports),C={props:{active:{type:Boolean,default:!1}},data:function(){return{toolMove:null,selectOptions:null,strokeWidth:null}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=[],a=null,o="";this.toolMove=new d.a.Tool,this.toolMove.onMouseDown=function(i){if(!(e=d.a.project.hitTest(i.point,t.selectOptions))||"bounds"===e.type||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type?e&&"bounds"===e.type?o="transform":(n=[],o="select"):(a&&a.hitTest(i.point,t.selectOptions)||(i.modifiers.shift?n.push(e.item):n=[e.item]),o="move"),d.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var s in n)if(n[s].data.selectWith)for(var l in n[s].data.selectWith)n.push(n[s].data.selectWith[l]);(a=new d.a.Group(n)).selected=!0,a.bounds.selected=!0}},this.toolMove.onMouseDrag=function(i){if("select"===o){var s=new d.a.Shape.Rectangle(i.downPoint,i.point);if(s.strokeColor="#4D88D4",s.fillColor="#A3C5E8",s.opacity=.3,s.strokeWidth=t.strokeWidth,s.removeOn({drag:!0,down:!0,up:!0}),n=d.a.project.getItems({class:"Path",inside:s.bounds}),d.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var l in n)if(n[l].data.selectWith)for(var r in n[l].data.selectWith)n.push(n[l].data.selectWith[r]);(a=new d.a.Group(n)).selected=!0}}else if("move"===o)a.position=a.position.add(i.delta);else if("transform"===o){var c=null,u=null,v=null;e&&"top-left"===e.name?(c=i.point.x-a.bounds.topRight.x,u=i.point.y-a.bounds.bottomLeft.y,v=a.bounds.bottomRight):e&&"top-right"===e.name?(c=i.point.x-a.bounds.topLeft.x,u=i.point.y-a.bounds.bottomRight.y,v=a.bounds.bottomLeft):e&&"bottom-right"===e.name?(c=i.point.x-a.bounds.bottomLeft.x,u=i.point.y-a.bounds.topRight.y,v=a.bounds.topLeft):e&&"bottom-left"===e.name&&(c=i.point.x-a.bounds.bottomRight.x,u=i.point.y-a.bounds.topLeft.y,v=a.bounds.topRight);var p=Math.abs(c/a.bounds.width),h=Math.abs(u/a.bounds.height);a.scale(p,h,v)}},this.toolMove.onMouseUp=function(t){a&&(a.bounds.selected=!0),o="",ve.$emit("selectionChanged",d.a.project.selectedItems),ve.$emit("updateMarkerCount")},this.toolMove.onMouseMove=function(e){if(a&&a.hitTest(e.point,t.selectOptions)){var n=a.hitTest(e.point,t.selectOptions);"bottom-right"===n.name||"top-left"===n.name?d.a.view.element.style.cursor="nwse-resize":"bottom-left"===n.name||"top-right"===n.name?d.a.view.element.style.cursor="nesw-resize":"fill"===n.type&&(d.a.view.element.style.cursor="move")}else document.getElementById("annotation-canvas").style.cursor="auto"},this.toolMove.onKeyUp=function(t){"backspace"!==t.key&&"delete"!==t.key||(d.a.project.selectedItems&&d.a.project.selectedItems.forEach(function(t){"Layer"!==t.className&&t.remove()}),ve.$emit("selectionChanged",d.a.project.selectedItems),ve.$emit("updateMarkerCount"))}},methods:r()({},Object(c.b)(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolMove.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}})},k=(n(184),Object(o.a)(C,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!t.active,faIconsActive:t.active}})]),t._v(" "),n("span",[t._v(" Move Tool ")])],1)],1)},[],!1,null,null,null).exports),O={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPan:null}},mounted:function(){},methods:{initialiseTool:function(){document.getElementById("annotation-canvas").setAttribute("class","pointers-no")}}},x=(n(183),Object(o.a)(O,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[t.active?n("v-icon",{staticClass:"blue--text text--darken-1"},[t._v("\n        lock_open\n      ")]):n("v-icon",{staticClass:"grey--text text--darken-2"},[t._v("\n        lock_outline\n      ")])],1),t._v(" "),n("span",[t._v(" Lock View Tool ")])],1)],1)},[],!1,null,null,null).exports),S={props:{active:{type:Boolean,default:!1}},data:function(){return{toolNode:null,hitOptions:null}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=null;this.toolNode=new d.a.Tool,this.toolNode.onMouseDown=function(a){(e=d.a.project.hitTest(a.point,t.hitOptions))?e.item.selected?"stroke"===e.type?n="adding-node":"segment"===e.type?(d.a.project.deselectAll(),e.item.selected=!0,e.segment.selected=!0,e.segment.handleIn.selected=!0,e.segment.handleOut.selected=!0,n="adjusting-segment"):"handle-out"!==e.type&&"handle-in"!==e.type||(n="adjusting-handle"):(e.item.selected=!0,n="selecting"):d.a.project.deselectAll()},this.toolNode.onMouseDrag=function(t){e&&"adjusting-segment"===n?e.segment.point=e.segment.point.add(t.delta):e&&"handle-out"===e.type&&"adjusting-handle"===n?e.segment.handleOut=e.segment.handleOut.add(t.delta):e&&"handle-in"===e.type&&"adjusting-handle"===n&&(e.segment.handleIn=e.segment.handleIn.add(t.delta))}},methods:r()({},Object(c.b)(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolNode.activate();var t=this.imageWidth/(100*this.viewportZoom);this.hitOptions={segments:!0,stroke:!0,handles:!0,fill:!0,tolerance:t}}})},j=(n(182),Object(o.a)(S,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!t.active,faIconsActive:t.active}})]),t._v(" "),n("span",[t._v(" Node Tool ")])],1)],1)},[],!1,null,null,null).exports),T={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCount:null,strokeWidth:400}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this;ve.$on("updateMarkerCount",function(){var t=d.a.project.getItems({data:{type:"counter"}}),e=d.a.project.getItems({className:"Path",data:{countable:!0}});for(var n in t){var a=0;for(var o in e)e[o].isInside(t[n].data.rect.bounds)&&(a+=1);t[n].content=a}});this.toolCount=new d.a.Tool,this.toolCount.onMouseDrag=function(e){var n=new d.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new d.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1}),n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,up:!0})},this.toolCount.onMouseUp=function(e){var n=new d.a.Path.Rectangle(e.downPoint,e.point);n.strokeColor=new d.a.Color({hue:46,saturation:1,lightness:.65,alpha:1}),n.strokeWidth=t.strokeWidth;var a=new d.a.PointText(n.bounds.topLeft);a.translate(3*t.strokeWidth,2*-t.strokeWidth),a.fillColor="black",a.fontSize=12*t.strokeWidth+"px",a.data.rect=n,a.data.type="counter",ve.$emit("updateMarkerCount");var o=a.handleBounds.topRight.add(4*t.strokeWidth,0),i=new d.a.Path.Rectangle(n.strokeBounds.topLeft,o);i.fillColor=n.strokeColor,i.moveBelow(a),n.data.selectWith=[i,a],a.data.selectWith=[n,i,a],i.data.selectWith=[a,n]}},methods:r()({},Object(c.b)(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolCount.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom),d.a.project.deselectAll()}})},A=(n(181),Object(o.a)(T,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        filter_9_plus\n      ")])],1),t._v(" "),n("span",[t._v(" Count Tool ")])],1)],1)},[],!1,null,null,null).exports),D={props:{active:{type:Boolean,default:!1}},data:function(){return{toolDelete:null,selectOptions:null,strokeWidth:null}},computed:r()({},Object(c.d)({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,n=[],a=null;this.toolDelete=new d.a.Tool,this.toolDelete.onMouseDown=function(o){if(e=d.a.project.hitTest(o.point,t.selectOptions),n=!e||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type&&"bounds"!==e.type?[]:[e.item],d.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var i in n)if(n[i].data.selectWith)for(var s in n[i].data.selectWith)n.push(n[i].data.selectWith[s]);(a=new d.a.Group(n)).selected=!0}},this.toolDelete.onMouseDrag=function(e){var o=new d.a.Shape.Rectangle(e.downPoint,e.point);if(o.strokeColor="#4D88D4",o.fillColor="#A3C5E8",o.opacity=.3,o.strokeWidth=t.strokeWidth,o.removeOn({drag:!0,down:!0,up:!0}),n=d.a.project.getItems({class:"Path",inside:o.bounds}),d.a.project.deselectAll(),a&&(a.selected=!1,a.bounds.selected=!1,a=null),n.length>0){for(var i in n)if(n[i].data.selectWith)for(var s in n[i].data.selectWith)n.push(n[i].data.selectWith[s]);(a=new d.a.Group(n)).selected=!0}},this.toolDelete.onMouseUp=function(t){a&&a.remove(),ve.$emit("selectionChanged",d.a.project.selectedItems),ve.$emit("updateMarkerCount")}},methods:r()({},Object(c.b)(["prepareCanvas"]),{initialiseTool:function(){this.prepareCanvas(),this.toolDelete.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}})},I=(n(180),Object(o.a)(D,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-delete"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[n("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        delete\n      ")])],1),t._v(" "),n("span",[t._v(" Delete Tool ")])],1)],1)},[],!1,null,null,null).exports),L=n(14),P=n.n(L),W={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:r()({},Object(c.d)({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),methods:r()({},Object(c.c)(["getDefaultLayerColor"]),{activate:function(){var t=this;this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.loading=!0,P.a.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAeCFXV_oK3QjGQdypK_2hVTH_ck2mshFw",{requests:[{image:{source:{imageUri:this.imageUri}},features:{type:"FACE_DETECTION"},imageContext:{}}]}).then(function(e){t.loading=!1,console.log(e);var n=e.data.responses[0].faceAnnotations;for(var a in n){var o=[];for(var i in n[a].boundingPoly.vertices)o.push(new d.a.Point(n[a].boundingPoly.vertices[i].x,n[a].boundingPoly.vertices[i].y));var s=new d.a.Path(o);s.strokeColor=new d.a.Color(t.getDefaultLayerColor().stroke),s.closed=!0,s.strokeWidth=t.strokeWidth}}).catch(function(e){t.loading=!1,console.log("could not apply face detection, returned the following error: \n \n"+e)})},drawBoundingFaces:function(t){}})},E=(n(161),{components:{"app-circle":f,"app-rectangle":g,"app-pen":y,"app-move":k,"app-pan":x,"app-node":j,"app-pencil":w,"app-count":A,"app-delete":I,"app-faces":Object(o.a)(W,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-tile",{attrs:{id:"tool-tile"}},[n("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[n("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.activate(e)}},slot:"activator"},[n("i",{class:{fa:!0,"fa-user-tag":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),t._v(" "),n("span",[t._v(" Faces Tool ")])],1)],1)},[],!1,null,"7fbdfed3",null).exports},data:function(){return{activeTool:"pan"}},computed:r()({},Object(c.d)({activeStep:function(t){return t.editor.activeStep},tools:function(t){return t.editor.tools}})),methods:r()({},Object(c.c)(["getStepTools"]))}),M=(n(160),Object(o.a)(E,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pointers-please elevation-2",attrs:{id:"toolsPanel"}},[n("v-list",{attrs:{id:"toolList",dense:""}},[t.getStepTools().includes("pan")?n("app-pan",{attrs:{active:"pan"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pan"}}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),t.getStepTools().includes("move")?n("app-move",{attrs:{active:"move"===t.activeTool},nativeOn:{click:function(e){t.activeTool="move"}}}):t._e(),t._v(" "),t.getStepTools().includes("node")?n("app-node",{attrs:{active:"node"===t.activeTool},nativeOn:{click:function(e){t.activeTool="node"}}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),t.getStepTools().includes("circle")?n("app-circle",{attrs:{active:"circle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="circle"}}}):t._e(),t._v(" "),t.getStepTools().includes("rectangle")?n("app-rectangle",{attrs:{active:"rectangle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="rectangle"}}}):t._e(),t._v(" "),t.getStepTools().includes("pen")?n("app-pen",{attrs:{active:"pen"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pen"}}}):t._e(),t._v(" "),t.getStepTools().includes("pencil")?n("app-pencil",{attrs:{active:"pencil"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pencil"}}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),t.getStepTools().includes("count")?n("app-count",{attrs:{active:"count"===t.activeTool},nativeOn:{click:function(e){t.activeTool="count"}}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),t.getStepTools().includes("delete")?n("app-delete",{attrs:{active:"delete"===t.activeTool},nativeOn:{click:function(e){t.activeTool="delete"}}}):t._e(),t._v(" "),n("v-divider"),t._v(" "),t.getStepTools().includes("faces")?n("app-faces",{attrs:{active:"faces"===t.activeTool},nativeOn:{click:function(e){t.activeTool="faces"}}}):t._e()],1)],1)},[],!1,null,"b99135a0",null).exports),N={computed:r()({},Object(c.d)({layers:function(t){return t.annotation.project.layers},activeLayer:function(t){return t.editor.activeLayer}})),methods:r()({},Object(c.b)(["setLayerOpacity","newLayer","exportLayerJSON","setActiveLayer","setLayerOpacity","setLayerName","deleteLayer"]),{selectLayer:function(t){this.setActiveLayer(t)}})},$=(n(159),Object(o.a)(N,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Layers\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.newLayer(e)}}},[n("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          tab\n        ")])],1)],1),t._v(" "),n("v-list",{attrs:{id:"list"}},t._l(t.layers,function(e,a){return n("v-list-group",{key:a,attrs:{"no-action":""}},[n("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.selectLayer(a)}},slot:"activator"},[n("v-list-tile-content",[n("v-list-tile-title",{class:[t.activeLayer===a?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Layer "+a)+"\n            ")])],1)],1),t._v(" "),n("div",{attrs:{id:"controls"}},[n("v-tabs",{attrs:{left:"",color:"transparent"}},[n("v-tab",[n("v-icon",[t._v(" visibility ")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v(" text_format ")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v(" delete ")])],1),t._v(" "),n("v-tabs-items",{attrs:{id:"tab-items"}},[n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs9:""}},[n("v-slider",{attrs:{value:null!=e.opacity?100*e.opacity:100,max:"100"},on:{input:t.setLayerOpacity}})],1),t._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{value:e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setLayerOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerOpacity(e):null}}})],1)],1)],1)]),t._v(" "),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-text-field",{attrs:{value:e.name?e.name:"Layer "+a,"single-line":""},on:{change:t.setLayerName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerName(e):null}}})],1)]),t._v(" "),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteLayer}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},[],!1,null,"4f35ad6a",null).exports),Z={computed:r()({},Object(c.d)({viewer:function(t){return t.image.OSDviewer}}),Object(c.c)(["getChannels"])),methods:r()({},Object(c.b)(["setChannelOpacity","setActiveChannel","setChannelName","deleteChannel"]))},z=(n(158),Object(o.a)(Z,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Channels\n      ")]),t._v(" "),n("v-spacer"),t._v(" "),n("v-btn",{attrs:{icon:""}},[n("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          add\n        ")])],1)],1),t._v(" "),n("v-list",{attrs:{id:"list"}},t._l(t.getChannels,function(e,a){return n("v-list-group",{key:a,attrs:{"no-action":""}},[n("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.setActiveChannel(a)}},slot:"activator"},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n              "+t._s(e.name?e.name:"Channel "+a)+"\n            ")])],1)],1),t._v(" "),n("div",{attrs:{id:"controls"}},[n("v-tabs",{attrs:{left:"",color:"transparent"}},[n("v-tab",[n("v-icon",[t._v(" visibility ")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v(" text_format ")])],1),t._v(" "),n("v-tab",[n("v-icon",[t._v(" delete ")])],1),t._v(" "),n("v-tabs-items",{attrs:{id:"tab-items"}},[n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-flex",{attrs:{xs9:""}},[n("v-slider",{attrs:{step:"0",max:"1"},on:{input:t.setChannelOpacity},model:{value:e.opacity,callback:function(n){t.$set(e,"opacity",n)},expression:"channel.opacity"}})],1),t._v(" "),n("v-flex",{attrs:{xs3:""}},[n("v-text-field",{attrs:{value:null!==e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setChannelOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelOpacity(e):null}}})],1)],1)],1)]),t._v(" "),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-text-field",{attrs:{value:e.name?e.name:"Channel "+a,"single-line":""},on:{change:t.setChannelName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelName(e):null}}})],1)]),t._v(" "),n("v-tab-item",[n("div",{attrs:{id:"tab-item"}},[n("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteChannel}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}))],1)],1)},[],!1,null,"64650fac",null).exports),R={components:{"colour-picker":n(73).Chrome},props:{color:{type:Object,default:function(){return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}},type:{type:String,default:function(){return"fill"}}},data:function(){return{dialog:!1,colorPick:this.color.obj}},computed:r()({},Object(c.d)({paperScope:function(t){return t.annotation.paperScope}})),watch:{dialog:function(t){if(!0===t)this.colorPick=this.color.obj;else if(d.a.project.selectedItems.length>1){var e=d.a.project.getItem({selected:!0,className:"Group"});"fill"===this.type&&this.colorPick.hsl?e.fillColor=new d.a.Color({hue:this.colorPick.hsl.h,saturation:this.colorPick.hsl.s,lightness:this.colorPick.hsl.l,alpha:this.colorPick.hsl.a}):"stroke"===this.type&&this.colorPick.hsl&&(e.strokeColor=new d.a.Color({hue:this.colorPick.hsl.h,saturation:this.colorPick.hsl.s,lightness:this.colorPick.hsl.l,alpha:this.colorPick.hsl.a})),ve.$emit("selectionChanged",d.a.project.selectedItems)}}}},V=(n(157),{components:{"colour-picker":Object(o.a)(R,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{attrs:{width:"225px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("a",{attrs:{slot:"activator"},slot:"activator"},[n("div",{staticClass:"color-tile",style:{"background-color":t.color.style}})]),t._v(" "),n("v-card",[n("colour-picker",{attrs:{id:"picker"},model:{value:t.colorPick,callback:function(e){t.colorPick=e},expression:"colorPick"}})],1)],1)},[],!1,null,"23f87616",null).exports},data:function(){return{numItems:0,groupFillColor:{style:"transparent",obj:{h:0,s:0,l:0,a:0}},groupStrokeWidth:"",groupStrokeColor:{style:"transparent",obj:{h:0,s:0,l:0,a:0}},color:"blue"}},created:function(){var t=this;ve.$on("selectionChanged",function(e){e.length>=1?(t.numItems=0,e.forEach(function(e){if("Group"===e.className){if(e.fillColor){var n=e.fillColor.hue,a=100*e.fillColor.saturation+"%",o=100*e.fillColor.lightness+"%",i=e.fillColor.alpha;t.groupFillColor.style="hsla("+n+", "+a+", "+o+", "+i+")",t.groupFillColor.obj={h:n,s:a,l:o,a:i}}else t.groupFillColor.style="transparent",t.groupFillColor.obj={h:0,s:0,l:0,a:0};if(e.strokeColor){var s=e.strokeColor.hue,l=100*e.strokeColor.saturation+"%",r=100*e.strokeColor.lightness+"%",c=e.strokeColor.alpha;t.groupStrokeColor.style="hsla("+s+", "+l+", "+r+", "+c+")",t.groupStrokeColor.obj={h:s,s:l,l:r,a:c}}else t.groupStrokeColor.style="transparent",t.groupStrokeColor.obj={h:0,s:0,l:0,a:0}}else t.numItems++})):(t.numItems=0,t.groupFillColor={style:"transparent",obj:{h:0,s:0,l:0,a:0}},t.groupStrokeWidth="",t.groupStrokeColor={style:"transparent",obj:{h:0,s:0,l:0,a:0}})})}}),B=(n(156),{components:{"app-layers":$,"app-channels":z,"app-properties":Object(o.a)(V,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"elevation-1"},[n("v-card",{staticClass:"panel"},[n("v-toolbar",{attrs:{id:"toolbar",dense:""}},[n("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Properties\n      ")]),t._v(" "),n("v-spacer")],1),t._v(" "),n("v-list",{attrs:{id:"list"}},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            No. selected items:\n          ")])],1),t._v(" "),n("v-list-tile-action",[t._v("\n          "+t._s(t.numItems)+"\n        ")])],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Fill colour:\n          ")])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[n("colour-picker",{staticClass:"pointers-please",attrs:{color:t.groupFillColor,type:"fill"}})],1)],1)],1),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Stroke colour:\n          ")])],1),t._v(" "),n("v-list-tile-action",[n("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[n("colour-picker",{staticClass:"pointers-please",attrs:{color:t.groupStrokeColor,type:"stroke"}})],1)],1)],1)],1)],1)],1)},[],!1,null,"eae21b6c",null).exports}}),F=(n(155),Object(o.a)(B,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"pointers-please studioPanel elevation-2"},[e("app-layers"),this._v(" "),e("app-channels"),this._v(" "),e("app-properties")],1)},[],!1,null,"741ad53f",null).exports),J={computed:r()({},Object(c.d)({activeStep:function(t){return t.editor.activeStep},steps:function(t){return t.editor.steps}})),methods:r()({},Object(c.b)(["setActiveStep","setActiveStepAndLayer"]))},U=(n(154),Object(o.a)(J,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.steps?n("div",[n("v-stepper",{staticClass:"pointers-please",attrs:{id:"stepper",value:t.activeStep+1,"non-linear":""}},[n("v-stepper-header",{attrs:{id:"stepper-header"}},[t._l(t.steps,function(e,a){return[n("v-stepper-step",{key:a,attrs:{step:e.id,editable:""},nativeOn:{click:function(n){t.setActiveStep(e)}}}),t._v(" "),e.id!==t.steps.length?n("v-divider",{key:e.length}):t._e()]})],2)],1),t._v(" "),n("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},[n("p",{attrs:{id:"hint"}},[t._v("\n      "+t._s(t.steps[t.activeStep].instruction)+"\n    ")])])],1):t._e()},[],!1,null,"68094e7a",null).exports),G={mounted:function(){this.setupOSDCanvas("osd-canvas")},methods:r()({},Object(c.b)(["setupOSDCanvas"]))},q=(n(153),Object(o.a)(G,function(){var t=this.$createElement;return(this._self._c||t)("div",{attrs:{id:"osd-canvas"}})},[],!1,null,null,null).exports),K={computed:r()({},Object(c.d)({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}})),watch:{viewSize:function(){d.a.view.viewSize.width=this.viewSize[0],d.a.view.viewSize.height=this.viewSize[1]},imageZoom:function(){},imageCenter:function(){}},mounted:function(){this.setupAnnotation("annotation-canvas")},methods:r()({},Object(c.b)(["setupAnnotation"]))},H=(n(152),{components:{"app-osd-canvas":q,"app-annotation-canvas":Object(o.a)(K,function(){var t=this.$createElement;return(this._self._c||t)("canvas",{attrs:{id:"annotation-canvas"}})},[],!1,null,null,null).exports},props:{type:{type:String,default:"examples"}},mounted:function(){this.synchroniseAnnotationAndOSDCanvas(),this.loadProject(this.type)},methods:r()({},Object(c.b)(["synchroniseAnnotationAndOSDCanvas","loadProject"]))}),Q=(n(151),Object(o.a)(H,function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"elevation-2 pointers-please",attrs:{id:"view"}},[e("app-osd-canvas"),this._v(" "),e("app-annotation-canvas")],1)},[],!1,null,"27a71252",null).exports),X={},Y=(n(148),Object(o.a)(X,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",{attrs:{"fill-height":"",fluid:""}},[a("v-layout",{attrs:{row:"","fill-height":"","justify-space-around":""}},[a("v-flex",{attrs:{xs10:"",sm5:""}},[a("v-card",{attrs:{to:"/example/dzi"}},[a("v-card-media",{attrs:{src:n(150),height:"200px"}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n              Deep Zoom\n            ")]),t._v(" "),a("div",[t._v("\n              Annotate a super hi-res Deep Zoom image with multiple tiled\n              layers.\n            ")])])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n          ")])],1)],1)],1),t._v(" "),a("v-flex",{attrs:{xs10:"",sm5:""}},[a("v-card",{attrs:{to:"/example/simple"}},[a("v-card-media",{attrs:{src:n(149),height:"200px"}}),t._v(" "),a("v-card-title",{attrs:{"primary-title":""}},[a("div",[a("h3",{staticClass:"headline mb-0"},[t._v("\n              Simple\n            ")]),t._v(" "),a("div",[t._v("\n              Annotate a standard image (no fancy Deep Zooming).\n            ")])])]),t._v(" "),a("v-card-actions",[a("v-btn",{attrs:{flat:"",color:"primary"}},[t._v(" Try it out\n          ")])],1)],1)],1)],1)],1)},[],!1,null,"6050b6fe",null).exports),tt={props:{editor:{type:Object,default:function(){return{}}}}},et=Object(o.a)(tt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-flex",{attrs:{xs12:""}},[n("v-list",{attrs:{"two-line":"",subheader:""}},t._l(t.editor.tools,function(e){return n("v-list-item",{key:e.name},[n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-action",[n("v-checkbox",{model:{value:e.include,callback:function(n){t.$set(e,"include",n)},expression:"tool.include"}})],1),t._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[t._v(" "+t._s(e.name)+" ")]),t._v(" "),n("v-list-tile-sub-title",[t._v(" "+t._s(e.caption))])],1)],1)],1)}))],1)},[],!1,null,null,null).exports,nt={props:{editor:{type:Object,default:function(){return{}}},step:{type:Number,default:1}},data:function(){return{title:""}}},at=(n(147),Object(o.a)(nt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h6",{staticClass:"step-id"},[t._v(" Step "+t._s(t.step+1)+" ")]),t._v(" "),n("div",[n("p",{staticClass:"label"},[t._v(" Tools required: ")]),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.pan,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.pan=!t.editor.steps[t.step].tools.pan}}},[n("i",{class:{fa:!0,"fa-lock":!0,faIcons:!0}})]),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.circle,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.circle=!t.editor.steps[t.step].tools.circle}}},[n("i",{class:{fa:!0,"fa-circle":!0,faIcons:!0}})]),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.rectangle,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.rectangle=!t.editor.steps[t.step].tools.rectangle}}},[n("v-icon",[t._v("\n        crop_landscape\n      ")])],1),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.pen,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.pen=!t.editor.steps[t.step].tools.pen}}},[n("v-icon",[t._v("\n        timeline\n      ")])],1),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.pencil,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.pencil=!t.editor.steps[t.step].tools.pencil}}},[n("i",{class:{fa:!0,"fa-pencil":!0,faIcons:!0}})]),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.move,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.move=!t.editor.steps[t.step].tools.move}}},[n("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!0}})]),t._v(" "),n("v-btn",{staticClass:"tool elevation-1",attrs:{flat:!t.editor.steps[t.step].tools.node,small:""},nativeOn:{click:function(e){t.editor.steps[t.step].tools.node=!t.editor.steps[t.step].tools.node}}},[n("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!0}})])],1)])},[],!1,null,"4bee4112",null).exports),ot={props:{editor:{type:Object,default:function(){return{}}},osdViewer:{type:Object,default:function(){return{}}}},data:function(){return{imageName:"",imagePath:"",errorToggle:!1,errorMessage:"",successToggle:!1}},methods:{addImage:function(){this.osdViewer.addTiledImage({tileSource:this.imagePath,x:0,y:0,opacity:.5,success:this.success,error:this.error})},error:function(t){var e=this;console.log(t.message),this.errorMessage=t.message,this.errorToggle=!0,setTimeout(function(){e.errorToggle=!1},3e3)},success:function(){var t=this,e=this.editor.images.length+1;this.editor.images.push({id:e,name:this.imageName,url:this.imagePath}),this.successToggle=!0,setTimeout(function(){t.successToggle=!1},3e3),this.imageName="",this.imagePath=""}}},it=(n(146),Object(o.a)(ot,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h6",{staticClass:"step-id"},[t._v("\n    Add a new image\n  ")]),t._v(" "),n("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.imageName,callback:function(e){t.imageName=e},expression:"imageName"}}),t._v(" "),n("v-text-field",{attrs:{label:"Tile Source URL",required:""},model:{value:t.imagePath,callback:function(e){t.imagePath=e},expression:"imagePath"}}),t._v(" "),n("v-btn",{staticClass:"indigo--text add-button",attrs:{outline:""},nativeOn:{click:function(e){t.addImage()}}},[t._v("\n    Add\n  ")]),t._v(" "),n("v-alert",{attrs:{value:t.successToggle,success:"",transition:"scale-transition"}},[t._v("\n    Image successfully added.\n  ")]),t._v(" "),n("v-alert",{attrs:{value:t.errorToggle,error:"",transition:"scale-transition"}},[t._v("\n    Error: "+t._s(t.errorMessage)+"\n  ")])],1)},[],!1,null,"4df8c06b",null).exports),st={props:{editor:{type:Object,default:function(){return{}}},osdViewer:{type:Object,default:function(){return{}}},paperScope:{type:Object,default:function(){return{}}}},data:function(){return{annotationName:"",annotationString:"",errorToggle:!1,errorMessage:"",successToggle:!1}},methods:{addAnnotation:function(){this.paperScope.project.importJSON(this.annotationString)},error:function(t){var e=this;console.log(t.message),this.errorMessage=t.message,this.errorToggle=!0,setTimeout(function(){e.errorToggle=!1},3e3)},success:function(){var t=this;this.successToggle=!0,setTimeout(function(){t.successToggle=!1},3e3),this.annotationName="",this.annotationString=""}}},lt=(n(145),{components:{"app-tool-settings":et,"app-step-settings":at,"app-add-image":it,"app-add-annotation":Object(o.a)(st,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h6",{staticClass:"step-id"},[t._v(" Add a new annotation ")]),t._v(" "),n("v-text-field",{attrs:{label:"Name",required:""},model:{value:t.annotationName,callback:function(e){t.annotationName=e},expression:"annotationName"}}),t._v(" "),n("v-text-field",{attrs:{label:"JSON string",required:""},model:{value:t.annotationString,callback:function(e){t.annotationString=e},expression:"annotationString"}}),t._v(" "),n("v-btn",{staticClass:"indigo--text add-button",attrs:{outline:""},nativeOn:{click:function(e){t.addAnnotation()}}},[t._v("\n    Add\n  ")]),t._v(" "),n("v-alert",{attrs:{value:t.successToggle,success:"",transition:"scale-transition"}},[t._v("\n    Annotation successfully added.\n  ")]),t._v(" "),n("v-alert",{attrs:{value:t.errorToggle,error:"",transition:"scale-transition"}},[t._v("\n    Error: "+t._s(t.errorMessage)+"\n  ")])],1)},[],!1,null,"436a3f57",null).exports},props:{editor:{type:Object,default:function(){return{}}},osdViewer:{type:Object,default:function(){return{}}},paperScope:{type:Object,default:function(){return{}}}},data:function(){return{dialog:!1,active:"Task",steps:!1,images:!1,annotations:!1,activeAnnotation:0,activeImage:0,activeStep:0}}}),rt=(n(144),Object(o.a)(lt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-dialog",{staticClass:"pointers-please",attrs:{scrollable:"",width:"75%"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[n("v-icon",{attrs:{slot:"activator"},slot:"activator"},[t._v("\n    settings\n  ")]),t._v(" "),n("v-card",[n("v-card-title",[t._v("\n      Settings\n    ")]),t._v(" "),n("v-divider"),t._v(" "),n("v-layout",[n("v-flex",{attrs:{id:"tabs-column",xs3:""}},[n("v-list",{attrs:{id:"settings-list",dense:""}},[n("v-list-group",{attrs:{"no-action":""},model:{value:t.steps,callback:function(e){t.steps=e},expression:"steps"}},[n("v-list-tile",{attrs:{slot:"item"},slot:"item"},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[t._v("\n                  Task\n                ")])],1),t._v(" "),n("v-list-tile-action",{staticClass:"action"},[n("v-icon",[t._v("\n                  keyboard_arrow_down\n                ")])],1)],1),t._v(" "),t._l(t.editor.steps,function(e,a){return n("v-list-tile",{key:a,class:{"option-active":t.editor.activeStep===a},nativeOn:{click:function(e){t.editor.activeStep=a,t.active=""}}},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[t._v("\n                  Step "+t._s(a+1)+"\n                ")])],1)],1)}),t._v(" "),n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title",nativeOn:{click:function(e){t.active="addStep"}}},[n("v-icon",{staticClass:"add_icon"},[t._v("\n                    add_circle_outline\n                  ")])],1)],1)],1)],2),t._v(" "),n("v-list-group",{attrs:{"no-action":""},model:{value:t.images,callback:function(e){t.images=e},expression:"images"}},[n("v-list-tile",{attrs:{slot:"item"},slot:"item"},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[t._v("\n                  Images\n                ")])],1),t._v(" "),n("v-list-tile-action",{staticClass:"action"},[n("v-icon",[t._v("\n                  keyboard_arrow_down\n                ")])],1)],1),t._v(" "),t._l(t.editor.images,function(e,a){return n("v-list-tile",{key:a,class:{"option-active":t.activeImage===a},nativeOn:{click:function(e){t.activeImage=a,t.active=""}}},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[t._v("\n                  "+t._s(e.name)+"\n                ")])],1)],1)}),t._v(" "),n("v-list-tile",{class:{"option-active":"add"===t.activeImage},nativeOn:{click:function(e){t.activeImage="add",t.active="addImage"}}},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[n("v-icon",{staticClass:"add_icon"},[t._v("\n                    add_circle_outline\n                  ")])],1)],1)],1)],2),t._v(" "),n("v-list-group",{attrs:{"no-action":""},model:{value:t.annotations,callback:function(e){t.annotations=e},expression:"annotations"}},[n("v-list-tile",{attrs:{slot:"item"},slot:"item"},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title",nativeOn:{click:function(e){t.active=""}}},[t._v("\n                  Annotations\n                ")])],1),t._v(" "),n("v-list-tile-action",{staticClass:"action"},[n("v-icon",[t._v("keyboard_arrow_down")])],1)],1),t._v(" "),n("v-list-tile",{class:{"option-active":"add"===t.activeAnnotation},nativeOn:{click:function(e){t.activeAnnotation="add",t.active="addAnnotation"}}},[n("v-list-tile-content",[n("v-list-tile-title",{staticClass:"tile-title"},[n("v-icon",{staticClass:"add_icon"},[t._v("\n                    add_circle_outline\n                  ")])],1)],1)],1)],1)],1)],1),t._v(" "),n("v-flex",{attrs:{xs9:""}},[n("v-layout",[n("v-flex",[n("v-card-text",[t.steps?n("app-step-settings",{attrs:{editor:t.editor,step:t.editor.activeStep}}):t._e(),t._v(" "),t.images&&"addImage"===t.active?n("app-add-image",{attrs:{editor:t.editor,"osd-viewer":t.osdViewer}}):t._e(),t._v(" "),t.annotations&&"addAnnotation"===t.active?n("app-add-annotation",{attrs:{editor:t.editor,"osd-viewer":t.osdViewer,"paper-scope":t.paperScope}}):t._e()],1)],1)],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-layout",{attrs:{actions:""}},[n("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n        Close\n      ")])],1)],1)],1)},[],!1,null,"79695d95",null).exports),ct={},ut=(n(143),Object(o.a)(ct,function(){var t=this.$createElement,e=this._self._c||t;return e("v-menu",{staticClass:"pointers-please",attrs:{"nudge-right":30,"nudge-bottom":5,"offset-y":""}},[e("v-icon",{attrs:{slot:"activator"},slot:"activator"},[this._v("\n    account_circle\n  ")]),this._v(" "),e("v-list",{staticClass:"pointers-please",attrs:{dense:""}},[e("v-list-tile",[e("v-list-tile-title",{attrs:{id:"title"}},[this._v("\n        Log out\n      ")])],1)],1)],1)},[],!1,null,"222df3de",null).exports),vt={methods:r()({},Object(c.b)(["saveProject"]))},pt=(n(142),Object(o.a)(vt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.saveProject(e)}}},[n("v-icon",[t._v("\n    save\n  ")])],1)},[],!1,null,null,null).exports),dt=n(72),ht=n.n(dt),ft={computed:r()({},Object(c.d)({dataToExport:function(t){return"data:text/json;charset=utf-8,"+encodeURIComponent(ht()(t.annotation.project))}}))},mt=(n(140),{components:{"app-settings":rt,"app-account":ut,"app-save":pt,"app-export":Object(o.a)(ft,function(){var t=this.$createElement,e=this._self._c||t;return e("a",{attrs:{href:this.dataToExport,download:"AIDA_annotation.json"}},[e("v-btn",{attrs:{icon:""}},[e("v-icon",{attrs:{small:""}},[this._v("\n      fa-download\n    ")])],1)],1)},[],!1,null,null,null).exports}}),gt=(n(139),{components:{"app-tools":M,"app-studio":F,"app-stepper":U,"app-view":Q,"app-examples":Y,"app-toolbar":Object(o.a)(mt,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:!0,dark:"",dense:""}},[n("div",{attrs:{id:"toolbar-side-icon-spacer"}}),t._v(" "),n("router-link",{attrs:{to:"/"}},[n("v-toolbar-title",{staticClass:"white--text"},[t._v("\n      AIDA\n    ")])],1),t._v(" "),n("v-spacer"),t._v(" "),n("app-export"),t._v(" "),n("app-save"),t._v(" "),n("v-btn",{attrs:{icon:"",href:"https://imageannotation.nds.ox.ac.uk:8443/AIDA/"}},[n("v-icon",[t._v(" apps ")])],1),t._v(" "),n("v-btn",{attrs:{icon:"",href:"https://aida.gitbook.io/docs/"}},[n("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1),t._v(" "),n("v-btn",{staticClass:"pointers-no",attrs:{icon:""}},[n("app-account")],1)],1)},[],!1,null,"5dff67ec",null).exports},props:{type:{type:String,default:"examples"}}}),bt=(n(138),Object(o.a)(gt,function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("header",[e("app-toolbar")],1),this._v(" "),e("v-container",{attrs:{id:"content-container",fluid:""}},[e("v-layout",{attrs:{row:""}},[e("v-flex",{attrs:{id:"left-panel","d-flex":""}},[e("app-tools")],1),this._v(" "),e("v-flex",{attrs:{"d-flex":""}},[e("div",{attrs:{id:"centre-container"}},[e("div",{attrs:{id:"stepper"}},[e("app-stepper")],1),this._v(" "),"examples"===this.type?e("app-examples"):e("div",{attrs:{id:"view-container"}},[e("app-view",{attrs:{type:this.type}})],1)],1)]),this._v(" "),e("v-flex",{attrs:{id:"right-panel","d-flex":""}},[e("app-studio")],1)],1)],1)],1)},[],!1,null,"743f9bd0",null).exports);a.a.use(s.a);var yt=new s.a({routes:[{path:"/",name:"Landing",component:v},{path:"/example/dzi",name:"DZI Example",component:bt,props:{default:!0,type:"dzi"}},{path:"/example/simple",name:"Simple Example",component:bt,props:{default:!0,type:"simple"}},{path:"/example",name:"Examples",component:bt,props:{default:!0,type:"examples"}}]}),_t=n(71),wt=n.n(_t),Ct={state:{OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}},getters:{getImageWidth:function(t){if(t.OSDviewer)return t.OSDviewer.world.getItemCount()>0?t.OSDviewer.world.getItemAt(0).getContentSize.x:0},getChannels:function(t,e,n){var a=[];if(t.OSDviewer)for(var o=t.OSDviewer.world.getItemCount(),i=0;i<o;i++)a.push({channel:t.OSDviewer.world.getItemAt(i),id:i,opacity:t.OSDviewer.world.getItemAt(i).getOpacity(),name:t.images[i].name,visible:t.OSDviewer.world.getItemAt(i).getOpacity()>0,opacityCache:0});return a}},actions:{resetImageState:function(t){(0,t.commit)("resetImageState")},setupOSDCanvas:function(t,e){(0,t.commit)("setupOSDCanvas",e)},loadImages:function(t,e){var n=t.state,a=t.dispatch;n.images=[],a("addImagesToState",e).then(function(){for(var t in e)a("addOSDImage",e[t])})},addImagesToState:function(t,e){(0,t.commit)("addImagesToState",e)},addOSDImage:function(t,e){(0,t.commit)("addOSDImage",e)},setActiveChannel:function(t,e){(0,t.commit)("setActiveChannel",e)},toggleChannelOpacity:function(t,e){(0,t.commit)("toggleChannelOpacity",e)},setChannelOpacity:function(t,e){var n=t.commit,a=t.rootState;n("setChannelOpacity",{input:e,activeChannel:a.editor.activeChannel,rootState:a})},setChannelName:function(t,e){var n=t.commit;t.rootState,n("setChannelName",e)}},mutations:{resetImageState:function(t){({OSDviewer:null,OSDworld:null,images:[],activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null}})},setupOSDCanvas:function(t,e){t.OSDviewer=new wt.a.Viewer({id:e,showNavigationControl:!1}),t.OSDviewer.addHandler("resize",function(e){t.view.viewSize=[e.newContainerSize.x,e.newContainerSize.y];var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]}),t.OSDviewer.addHandler("zoom",function(e){t.view.imageZoom=t.OSDviewer.viewport.viewportToImageZoom(t.OSDviewer.viewport.getZoom(!0));var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]}),t.OSDviewer.addHandler("pan",function(e){var n=t.OSDviewer.viewport.viewportToImageCoordinates(t.OSDviewer.viewport.getCenter(!0));t.view.imageCenter=[n.x,n.y]})},addImagesToState:function(t,e){for(var n in e)t.images.push(e[n])},addOSDImage:function(t,e){"dzi"===e.type?t.OSDviewer.addTiledImage({tileSource:e.source,x:0,y:0,opacity:.8}):"simple"===e.type&&t.OSDviewer.addSimpleImage({url:e.source,x:0,y:0,opacity:.8})},setActiveChannel:function(t,e){t.activeChannel=e},toggleChannelOpacity:function(t,e){e.opacity>0?e.channel.setOpacity(0):e.channel.setOpacity(.7)},setChannelOpacity:function(t,e){var n=e.input,a=1;"string"==typeof n||"number"==typeof n?a=(n=Number(n))>1?n/100:n:n instanceof KeyboardEvent&&(a=n.target.value/100),t.OSDviewer.world.getItemAt(e.activeChannel).setOpacity(a)},setChannelName:function(t,e){var n=void 0;n=e instanceof KeyboardEvent?e.target.value:e,a.a.set(t.images[t.activeChannel],"name",n)}}},kt={state:{project:{name:"An AIDA project",layers:[]},defaultColors:[{stroke:{alpha:1,hue:170,lightness:.69,saturation:.44},fill:{alpha:.7,hue:170,lightness:.69,saturation:.44}},{stroke:{alpha:1,hue:6,lightness:.72,saturation:.94},fill:{alpha:.7,hue:6,lightness:.72,saturation:.94}},{stroke:{alpha:1,hue:60,lightness:.85,saturation:1},fill:{alpha:.7,hue:60,lightness:.85,saturation:1}},{stroke:{alpha:1,hue:190,lightness:.79,saturation:.3},fill:{alpha:.7,hue:190,lightness:.79,saturation:.3}},{stroke:{alpha:1,hue:6,lightness:.72,saturation:.94},fill:{alpha:.7,hue:6,lightness:.72,saturation:.94}},{stroke:{alpha:1,hue:205,lightness:.66,saturation:.49},fill:{alpha:.7,hue:205,lightness:.66,saturation:.49}}]},getters:{getDefaultLayerColor:function(t){var e=d.a.project.activeLayer.index,n=t.project.layers.length;return t.defaultColors[e%n]}},actions:{resetAnnotationState:function(t){(0,t.commit)("resetAnnotationState")},refreshAnnotationState:function(t,e){(0,t.commit)("refreshAnnotationState",e)},setupAnnotation:function(t,e){(0,t.commit)("setupAnnotation",e)},loadAnnotation:function(t,e){(0,t.commit)("loadAnnotation",e)},exportLayerJSON:function(t,e){(0,t.commit)("exportLayerJSON",e)},prepareCanvas:function(t,e){(0,t.commit)("prepareCanvas",e)},newLayer:function(t,e){(0,t.commit)("newLayer")},setActiveLayer:function(t,e){var n=t.commit,a=t.dispatch;n("setActiveLayer",e),a("setConfigActiveLayer",e)},setLayerOpacity:function(t,e){(0,t.commit)("setLayerOpacity",e)},setLayerName:function(t,e){(0,t.commit)("setLayerName",e)},deleteLayer:function(t,e){(0,t.commit)("deleteLayer",e)}},mutations:{resetAnnotationState:function(t){({project:null})},refreshAnnotationState:function(t,e){t.project.layers.forEach(function(t){t.items=[]}),d.a.project.getItems({className:"Path"}).forEach(function(e){"circle"===e.data.subType?t.project.layers[e.layer.index].items.push({class:e.data.class,subType:"circle",center:{x:e.position.x,y:e.position.y},radius:e.bounds.width/2}):"rectangle"===e.data.subType?t.project.layers[e.layer.index].items.push({class:e.data.class,subType:"rectangle",from:{x:e.bounds.topLeft.x,y:e.bounds.topRight.y},to:{x:e.bounds.bottomRight.x,y:e.bounds.bottomRight.y}}):t.project.layers[e.layer.index].items.push({class:e.data.class,subType:"path",segments:function(t){var e=[];return t.segments.forEach(function(t){e.push({point:{x:t.point.x,y:t.point.y},handleIn:{x:t.handleIn.x,y:t.handleIn.y},handleOut:{x:t.handleOut.x,y:t.handleOut.y}})}),e}(e),closed:e.closed})}),console.log(t.project)},setupAnnotation:function(t,e){d.a.setup(e)},loadAnnotation:function(t,e){t.project=e.project,t.project.layers.forEach(function(e){(new d.a.Layer).opacity=e.opacity,e.items&&e.items.forEach(function(e){var n=void 0;(n="circle"===e.subType?new d.a.Path.Circle({center:e.center,radius:e.radius,data:{subType:"circle",countable:!0}}):"rectangle"===e.subType?new d.a.Path.Rectangle({from:e.from,to:e.to,data:{subType:"rectangle"}}):new d.a.Path({segments:e.segments,closed:e.closed,data:{subType:"path"}})).closed&&(n.fillColor=t.defaultColors[n.layer.index].fill),n.strokeColor=t.defaultColors[n.layer.index].stroke})}),d.a.project.layers[0].activate()},exportLayerJSON:function(t,e){console.log("Layer to be exported: "),console.log(e.name),console.log(e.exportJSON())},prepareCanvas:function(t,e){d.a.view.element.classList.contains("pointers-no")&&d.a.view.element.classList.remove("pointers-no")},newLayer:function(t){var e=new d.a.Layer({position:d.a.view.center});e.opacity=1,t.project.layers.push({name:"Layer "+(t.project.layers.length+1),opacity:1,items:[]})},setActiveLayer:function(t,e){d.a.project.layers[e].activate()},setLayerOpacity:function(t,e){var n=void 0;(n=e instanceof KeyboardEvent?e.target.value/100:e/100)>1?n=1:e<0&&(n=0),d.a.project.activeLayer.opacity=n,a.a.set(t.project.layers[d.a.project.activeLayer.index],"opacity",n)},setLayerName:function(t,e){var n=void 0;n=e instanceof KeyboardEvent?e.target.value:e,d.a.project.activeLayer.name=n,a.a.set(t.project.layers[d.a.project.activeLayer.index],"name",n)},deleteLayer:function(t,e){t.project.layers.splice(d.a.project.activeLayer.index,1),d.a.project.activeLayer.remove()}}},Ot={state:{type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null},getters:{getStepTools:function(t){return t.steps?t.steps[t.activeStep].tools:[]}},actions:{resetEditorState:function(t){(0,t.commit)("resetEditorState")},setActiveStep:function(t,e){var n=t.commit,a=t.dispatch;"number"==typeof e.specificLayer&&a("setActiveLayer",e.specificLayer),n("setActiveStep",e.id-1)},setConfigActiveLayer:function(t,e){(0,t.commit)("setConfigActiveLayer",e)},loadConfig:function(t,e){(0,t.commit)("loadConfig",{editor:e,rootState:t.rootState})}},mutations:{resetEditorState:function(t){({})},setActiveStep:function(t,e){t.activeStep=e},setConfigActiveLayer:function(t,e){t.activeLayer=e},loadConfig:function(t,e){a.a.set(e.rootState,"editor",e.editor)}}},xt={state:{},getters:{},actions:{resetState:function(t){var e=t.dispatch;e("resetEditorState"),e("resetAnnotationState"),e("resetImageState")},loadProject:function(t,e){var n=t.dispatch,a="https://aida-testing.firebaseio.com/"+e+".json";P.a.get(a).then(function(t){n("loadConfig",t.data.editor,{root:!0}),n("loadImages",t.data.images,{root:!0}),n("loadAnnotation",t.data.annotation,{root:!0})}).catch(function(t){console.log("Could not load all data from external source. Returned the following error: \n \n"+t)})},saveProject:function(t){var e=t.rootState,n=t.dispatch,a="https://aida-testing.firebaseio.com/"+e.editor.type+".json";n("refreshAnnotationState").then(P.a.put(a,{editor:e.editor,annotation:e.annotation,images:e.image.images}).then(function(t){console.log(t)}))},synchroniseAnnotationAndOSDCanvas:function(t){t.state;(0,t.commit)("synchroniseAnnotationAndOSDCanvas",t.rootState.image.OSDviewer)},setActiveStepAndLayer:function(t,e){var n=t.dispatch;n("setActiveLayer",e),n("setActiveStep",e)}},mutations:{synchroniseAnnotationAndOSDCanvas:function(t,e){e.addHandler("update-viewport",function(){var t=e.viewport.getZoom(!0),n=e.world.getItemAt(0);d.a.view.zoom=n.viewportToImageZoom(t);var a=n.viewportToImageCoordinates(e.viewport.getCenter(!0));d.a.view.center=new d.a.Point(a.x,a.y),d.a.project.layers.forEach(function(e){e.children.forEach(function(e){"Path"===e.className&&(e.strokeWidth=n.getContentSize().x/(500*t))})})})}}};a.a.use(c.a);var St=new c.a.Store({state:{},getters:{},actions:{},mutations:{},modules:{image:Ct,annotation:kt,editor:Ot,common:xt}}),jt=n(70),Tt=n.n(jt),At=n(69),Dt=n.n(At),It=n(68),Lt=n.n(It),Pt=n(67),Wt=n.n(Pt),Et=n(66),Mt=n.n(Et),Nt=n(34),$t=n.n(Nt),Zt=n(12),zt=n.n(Zt),Rt=n(65),Vt=n.n(Rt),Bt=n(64),Ft=n.n(Bt),Jt=n(11),Ut=n.n(Jt),Gt=n(63),qt=n.n(Gt),Kt=n(62),Ht=n.n(Kt),Qt=n(61),Xt=n.n(Qt),Yt=n(60),te=n.n(Yt),ee=n(59),ne=n.n(ee),ae=n(58),oe=n.n(ae),ie=n(57),se=n.n(ie),le=n(56),re=n.n(le),ce=n(55),ue=n.n(ce);n(226),n(224);n.d(e,"eventBus",function(){return ve}),a.a.use(Tt.a,{components:{VApp:Dt.a,VNavigationDrawer:Lt.a,VFooter:Wt.a,VList:Mt.a,VBtn:$t.a,VIcon:zt.a,VGrid:Vt.a,VToolbar:Ft.a,transitions:Ut.a,Vcard:qt.a,VMenu:Ht.a,VDivider:Xt.a,VStepper:te.a,VSlider:ne.a,VDialog:oe.a,VTabs:se.a,VTextField:re.a,VTooltip:ue.a}}),a.a.config.productionTip=!1;var ve=new a.a;new a.a({el:"#app",router:yt,store:St,components:{App:i},template:"<App/>"})}});
//# sourceMappingURL=app.c29db5cae2fb47afa7ce.js.map