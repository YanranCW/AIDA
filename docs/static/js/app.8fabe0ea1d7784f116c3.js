webpackJsonp([0],[,,,function(e,t,n){n(30),n(31);var o=n(0)(n(7),n(54),null,null);e.exports=o.exports},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o),a=n(2),s=(n.n(a),n(43)),r=n.n(s),l=n(34),c=n.n(l),p=n(33),d=n.n(p),u=n(36),v=n.n(u);t.default={data:function(){return{paperScope:null,osdViewer:null,config:{tools:{circle:{active:!0,name:"Circle",caption:"Plot filled circles"},rectangle:{active:!0,name:"Rectangle",caption:"Draw rectangles"},path:{active:!0,name:"Path",caption:"Draw smooth paths"},move:{active:!0,name:"Move",caption:"Move and scale annotation items"},pan:{active:!0,name:"Pan and Zoom",caption:"Pan and zoom the image and annotations"},node:{active:!0,name:"Node",caption:"Manipulate path node and handles"}}}}},created:function(){var e=this;this.osdViewer=OpenSeadragon({id:"osd-canvas",prefixUrl:"https://openseadragon.github.io/openseadragon/images/",tileSources:"https://openseadragon.github.io/example-images/duomo/duomo.dzi",showNavigationControl:!1}),this.paperScope=i.a.setup(document.getElementById("paper-canvas")),this.paperScope.data={activeTool:null},this.osdViewer.addHandler("update-viewport",function(){var t=document.getElementById("canvas").clientWidth,n=document.getElementById("canvas").clientHeight;e.paperScope.view.viewSize=new i.a.Size(t,n);var o=e.osdViewer.viewport.getZoom(!0),a=e.osdViewer.world.getItemAt(0);e.paperScope.view.zoom=a.viewportToImageZoom(o);var s=e.osdViewer.viewport.viewportToImageCoordinates(e.osdViewer.viewport.getCenter(!0));e.paperScope.view.center=new i.a.Point(s.x,s.y)}),i.a.project.addLayer(new i.a.Layer({name:"Layer 1"}))},components:{"app-tools":r.a,"app-layers":c.a,"app-image-loader":d.a,"app-toolbar":v.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope"],data:function(){return{imageData:""}},methods:{chooseFile:function(){this.$refs.uploadFile.click()},onFileChange:function(e){var t=e.target.files||e.dataTransfer.files;t.length&&(this.createImage(t[0]),this.imageFile=t[0])},createImage:function(e){var t=new FileReader,n=this;t.onload=function(e){n.imageData=e.target.result},t.readAsDataURL(e),this.addToPaper(e)},addToPaper:function(e){new i.a.Layer({name:e.name,position:this.paperScope.view.center}),new i.a.Raster(img)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope"],data:function(){return{editedLayer:null,beforeEditCache:null}},methods:{sayHello:function(){console.log("Hi there")},editLayerName:function(e){this.beforeEditCache=e.name,this.editedLayer=e.id},doneEdit:function(e){this.editedLayer&&(this.editedLayer=null,void 0==e.name?e.name="Untitled Layer":e.name=e.name.trim())},cancelEdit:function(e){this.editedLayer=null,e.name=this.beforeEditCache},newLayer:function(){var e=new i.a.Layer({name:"New Layer",position:this.paperScope.view.center});this.selectLayer(e)},selectLayer:function(e){this.paperScope.project.layers.forEach(function(e){e.selected=!1}),e.selected=!0,e.activate()},addToSelection:function(e){e.selected=!0},exportJSON:function(e){e.activate(),console.log(this.paperScope.project.activeLayer.exportJSON())}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["config"],data:function(){return{dialog:!1}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(35),i=n.n(o);t.default={props:["config"],data:function(){return{}},components:{"app-settings":i.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope"],data:function(){return{toolCircle:null}},methods:{stateDialog:function(){console.log("Current dialog value is: "+this.dialog)},initialiseTool:function(){this.paperScope.view.element.classList.contains("pointers-no")&&this.paperScope.view.element.classList.remove("pointers-no"),this.toolCircle.activate()}},computed:{dependentClasses:function(){return{"btn--light-flat-pressed":"circle"==this.paperScope.data.activeTool,fa:!0,"fa-circle":!0,"fa-icons":!0}}},created:function(){function e(e){var t=Math.round(e.point.x),n=Math.round(e.point.y);new i.a.Path.Circle(new i.a.Point(t,n),3e3).fillColor="red"}this.toolCircle=new i.a.Tool,this.toolCircle.onMouseDown=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope","osdViewer"],data:function(){return{toolMove:null,hitOptions:null}},methods:{initialiseTool:function(){this.paperScope.view.element.classList.contains("pointers-no")&&this.paperScope.view.element.classList.remove("pointers-no"),this.toolMove.activate();var e=this.osdViewer.viewport.getZoom(!0),t=100/e;this.hitOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}},created:function(){function e(e){a.paperScope.project.deselectAll(),l=i.a.project.hitTest(e.point,a.hitOptions),l?"segment"==l.type||"fill"==l.type||"stroke"==l.type?(r&&r.remove(),r=new i.a.Path.Rectangle(l.item.handleBounds),r.fullySelected=!0,s=l.item,c="moving"):"bounds"==l.type&&(r.fullySelected=!0,c="scaling"):r&&r.contains(e.point)?c="moving":(s=null,c=null)}function t(e){!(l=i.a.project.hitTest(e.point,a.hitOptions))||"segments"!=l.type&&"fill"!=l.type&&"stroke"!=l.type||(r&&r.remove(),r=new i.a.Path.Rectangle(l.item.handleBounds),r.fullySelected=!0)}function n(e){if("moving"==c)s.position=s.position.add(e.delta),r.position=r.position.add(e.delta),r.fullySelected=!0;else if("scaling"==c){var t=r.bounds;if("top-left"==l.name){var n=e.point.x-t.topRight.x,o=Math.abs(n/t.width),i=e.point.y-t.bottomLeft.y,a=Math.abs(i/t.height);s.scale(o,a,t.bottomRight),r.scale(o,a,t.bottomRight)}else if(l&&"top-right"==l.name){var n=e.point.x-t.topLeft.x,o=Math.abs(n/t.width),i=e.point.y-t.bottomRight.y,a=Math.abs(i/t.height);s.scale(o,a,t.bottomLeft),r.scale(o,a,t.bottomLeft)}else if(l&&"bottom-right"==l.name){var n=e.point.x-t.bottomLeft.x,o=Math.abs(n/t.width),i=e.point.y-t.topRight.y,a=Math.abs(i/t.height);s.scale(o,a,t.topLeft),r.scale(o,a,t.topLeft)}else if(l&&"bottom-left"==l.name){var n=e.point.x-t.bottomRight.x,o=Math.abs(n/t.width),i=e.point.y-t.topLeft.y,a=Math.abs(i/t.height);s.scale(o,a,t.topRight),r.scale(o,a,t.topRight)}}}function o(e){l=null}var a=this,s=null,r=null,l=null,c=null;this.toolMove=new i.a.Tool,this.toolMove.onMouseDown=e,this.toolMove.onMouseDrag=n,this.toolMove.onMouseUp=o,this.toolMove.onMouseMove=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope","osdViewer"],data:function(){return{toolNode:null,hitOptions:null}},methods:{initialiseTool:function(){this.paperScope.view.element.classList.contains("pointers-no")&&this.paperScope.view.element.classList.remove("pointers-no"),this.toolNode.activate();var e=this.osdViewer.viewport.getZoom(!0),t=100/e;this.hitOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t}}},created:function(){function e(e){n.paperScope.project.deselectAll(),(o=i.a.project.hitTest(e.point,n.hitOptions))&&(console.log("The hitResult is: "+o),o.item.fullySelected=!0,"fill"==o.type||"stroke"==o.type?a="selecting":"segment"!=o.type&&"handle-out"!=o.type&&"handle-in"!=o.type||(a="adjusting"))}function t(e){"adjusting"==a&&("segment"==o.type?o.segment.point=o.segment.point.add(e.delta):"handle-out"==o.type?o.segment.handleOut=o.segment.handleOut.add(e.delta):"handle-in"==o.type&&(o.segment.handleIn=o.segment.handleIn.add(e.delta)))}var n=this,o=null,a=null;this.toolNode=new i.a.Tool,this.toolNode.onMouseDown=e,this.toolNode.onMouseDrag=t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=(n.n(o),n(2));n.n(i);t.default={props:["paperScope","osdViewer"],data:function(){return{toolPan:null}},methods:{initialiseTool:function(){this.paperScope.view.element.setAttribute("class","pointers-no")}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope"],data:function(){return{toolPencil:null}},methods:{initialiseTool:function(){this.paperScope.view.element.classList.contains("pointers-no")&&this.paperScope.view.element.classList.remove("pointers-no"),this.toolPencil.activate()}},created:function(){function e(e){e.modifiers.option?(t.closed=!0,t.smooth()):(t.add(e.point),t.smooth())}var t=new i.a.Path;t.strokeColor="red",t.strokeWidth=100,this.toolPencil=new i.a.Tool,this.toolPencil.onMouseDown=e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n.n(o);t.default={props:["paperScope"],data:function(){return{toolRect:null}},methods:{initialiseTool:function(){this.paperScope.view.element.classList.contains("pointers-no")&&this.paperScope.view.element.classList.remove("pointers-no"),this.toolRect.activate()}},created:function(){function e(e){var t=e.point.x-e.downPoint.x,o=e.point.y-e.downPoint.y;n.remove(),n=new i.a.Path.Rectangle(e.downPoint.x,e.downPoint.y,t,o),n.strokeColor="red",n.strokeWidth=1}function t(e){n.clone()}var n=new i.a.Path.Rectangle([100,100],100);n.remove(),this.toolRect=new i.a.Tool,this.toolRect.onMouseDrag=e,this.toolRect.onMouseUp=t,this.toolRect.activate()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=(n.n(o),n(37)),a=n.n(i),s=n(42),r=n.n(s),l=n(41),c=n.n(l),p=n(38),d=n.n(p),u=n(40),v=n.n(u),f=n(39),h=n.n(f);t.default={props:["paperScope","osdViewer","config"],components:{"app-circle":a.a,"app-rectangle":r.a,"app-path":c.a,"app-move":d.a,"app-pan":v.a,"app-node":h.a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(5),a=n.n(i),s=n(3),r=n.n(s);o.a.use(a.a),o.a.config.productionTip=!1,new o.a({el:"#app",template:"<App/>",components:{App:r.a}})},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){n(21);var o=n(0)(n(8),n(45),"data-v-234a7745",null);e.exports=o.exports},function(e,t,n){n(22);var o=n(0)(n(9),n(46),"data-v-482e511b",null);e.exports=o.exports},function(e,t,n){n(26);var o=n(0)(n(10),n(50),null,null);e.exports=o.exports},function(e,t,n){n(25);var o=n(0)(n(11),n(49),null,null);e.exports=o.exports},function(e,t,n){n(20);var o=n(0)(n(12),n(44),null,null);e.exports=o.exports},function(e,t,n){n(32);var o=n(0)(n(13),n(55),null,null);e.exports=o.exports},function(e,t,n){n(24);var o=n(0)(n(14),n(48),null,null);e.exports=o.exports},function(e,t,n){n(27);var o=n(0)(n(15),n(51),null,null);e.exports=o.exports},function(e,t,n){n(29);var o=n(0)(n(16),n(53),null,null);e.exports=o.exports},function(e,t,n){n(23);var o=n(0)(n(17),n(47),null,null);e.exports=o.exports},function(e,t,n){n(28);var o=n(0)(n(18),n(52),null,null);e.exports=o.exports},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("i",{class:e.dependentClasses,attrs:{"aria-hidden":"true"}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointers-please tools-container"},[n("v-card",[n("v-toolbar",[n("v-toolbar-title",[e._v("Image")]),e._v(" "),n("v-spacer")],1),e._v(" "),n("v-list",[n("v-list-item",[n("input",{ref:"uploadFile",attrs:{type:"file",id:"uploadFile"},on:{change:e.onFileChange}}),e._v(" "),n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.chooseFile(t)}}},[n("v-icon",{staticClass:"white--text text--lighten-1"},[e._v("file_upload")])],1),e._v(" "),n("img",{attrs:{src:e.imageData,id:"img"}})],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointers-please layer-panel elevation-2"},[n("v-card",[n("v-toolbar",[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Layers")]),e._v(" "),n("v-btn",{attrs:{icon:"",ripple:""},nativeOn:{click:function(t){e.newLayer(t)}}},[n("v-icon",{staticClass:"white--text"},[e._v("tab")])],1)],1),e._v(" "),n("v-list",{attrs:{dense:""}},e._l(e.paperScope.project.layers,function(t){return n("v-list-item",{key:t.id},[n("span",{on:{click:[function(n){e.selectLayer(t)},function(n){if(!n.shiftKey)return null;e.addToSelection(t)}]}},[n("v-list-tile",[n("v-list-tile-content",[n("v-list-tile-title",{class:{editing:t.id==e.editedLayer},on:{dblclick:function(n){e.editLayerName(t)}}},[e._v("\n                                "+e._s(t.name)+"\n                            ")]),e._v(" "),n("v-text-field",{staticClass:"editContent",class:{editing:t.id!=e.editedLayer},attrs:{name:"input-1-3","single-line":""},on:{blur:function(n){e.doneEdit(t)}},nativeOn:{keyup:[function(n){if(!("button"in n)&&e._k(n.keyCode,"enter",13))return null;e.doneEdit(t)},function(n){if(!("button"in n)&&e._k(n.keyCode,"esc",27))return null;e.cancelEdit(t)}]},model:{value:t.name,callback:function(e){t.name=e},expression:"layer.name"}},[e._v("\n                            >")])],1),e._v(" "),n("v-list-tile-action",[n("v-btn",{attrs:{icon:"",ripple:""},nativeOn:{click:function(n){e.exportJSON(t)}}},[n("v-icon",{staticClass:"grey--text"},[e._v("save")])],1)],1)],1),e._v(" "),n("v-divider")],1)])}))],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("v-icon",{staticClass:"white--text text--lighten-1"},[e._v("crop_landscape")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("i",{staticClass:"fa fa-location-arrow fa-icons",attrs:{"aria-hidden":"true"}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-toolbar",{staticClass:"pointers-please"},[n("v-toolbar-logo",{staticClass:"white--text"},[e._v("Annotate")]),e._v(" "),n("v-toolbar-items",[n("v-toolbar-item",[n("app-settings",{attrs:{config:e.config}})],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-layout",{attrs:{row:"","justify-center":""}},[n("v-dialog",{attrs:{scrollable:""},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[n("v-btn",{staticClass:"white--text",attrs:{icon:""},slot:"activator"},[n("v-icon",[e._v("settings")])],1),e._v(" "),n("v-card",[n("v-card-title",[e._v("Settings")]),e._v(" "),n("v-divider"),e._v(" "),n("v-card-row",{attrs:{height:"500px"}},[n("v-list",{staticClass:"options",attrs:{"two-line":"",subheader:""}},[n("v-subheader",[e._v("Tools")]),e._v(" "),e._l(e.config.tools,function(t){return n("v-list-item",{key:t.name},[n("v-list-tile",{attrs:{avatar:""}},[n("v-list-tile-action",[n("v-checkbox",{model:{value:t.active,callback:function(e){t.active=e},expression:"tool.active"}})],1),e._v(" "),n("v-list-tile-content",[n("v-list-tile-title",[e._v(" "+e._s(t.name)+" ")]),e._v(" "),n("v-list-tile-sub-title",[e._v(" "+e._s(t.caption))])],1)],1)],1)})],2)],1),e._v(" "),n("v-divider"),e._v(" "),n("v-card-row",{attrs:{actions:""}},[n("v-btn",{staticClass:"blue--text darken-1",attrs:{flat:""},nativeOn:{click:function(t){e.dialog=!1}}},[e._v("Close")])],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("i",{staticClass:"fa fa-hand-rock-o  fa-icons",attrs:{"aria-hidden":"true"}})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pointers-please tools-container elevation-2"},[n("v-card",{staticClass:"tools-panel"},[n("v-toolbar",{attrs:{primary:"",dark:""}},[n("v-toolbar-title",{staticClass:"white--text"},[e._v("Tools")])],1),e._v(" "),n("v-list",[n("v-list-item",[e.config.tools.circle.active?n("app-circle",{attrs:{paperScope:e.paperScope}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.config.tools.rectangle.active?n("app-rectangle",{attrs:{paperScope:e.paperScope}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.config.tools.path.active?n("app-path",{attrs:{paperScope:e.paperScope}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.config.tools.move.active?n("app-move",{attrs:{paperScope:e.paperScope,osdViewer:e.osdViewer}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.config.tools.pan.active?n("app-pan",{attrs:{paperScope:e.paperScope,osdViewer:e.osdViewer}}):e._e(),e._v(" "),n("v-divider"),e._v(" "),e.config.tools.node.active?n("app-node",{attrs:{paperScope:e.paperScope,osdViewer:e.osdViewer}}):e._e(),e._v(" "),n("v-divider")],1)],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("v-icon",{staticClass:"white--text text--lighten-1"},[e._v("timeline")])],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{"top-toolbar":"","pointer-events":"none"}},[n("header",[n("app-toolbar",{attrs:{config:e.config}})],1),e._v(" "),n("v-container",{attrs:{fluid:""}},[n("v-layout",[n("v-flex",{attrs:{xs2:""}},[n("app-tools",{attrs:{paperScope:e.paperScope,osdViewer:e.osdViewer,config:e.config}}),e._v(" "),n("app-layers",{attrs:{paperScope:e.paperScope}})],1),e._v(" "),n("v-flex",{attrs:{xs3:"","offset-xs9":""}})],1)],1)],1)},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-btn",{attrs:{primary:"",dark:""},nativeOn:{click:function(t){e.initialiseTool(t)}}},[n("i",{staticClass:"fa fa-mouse-pointer fa-icons",attrs:{"aria-hidden":"true"}})])},staticRenderFns:[]}},,,function(e,t){},function(e,t){}],[19]);
//# sourceMappingURL=app.8fabe0ea1d7784f116c3.js.map