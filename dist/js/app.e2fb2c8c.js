(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)r=s[d],n[r]&&p.push(n[r][0]),n[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,s=1;s<a.length;s++){var l=a[s];0!==n[l]&&(i=!1)}i&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={app:0},o=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0109":function(t,e,a){"use strict";var i=a("ec8b"),n=a.n(i);n.a},"0586":function(t,e,a){},"05da":function(t,e,a){},"073b":function(t,e,a){"use strict";var i=a("f147"),n=a.n(i);n.a},"0815":function(t,e,a){},"0a64":function(t,e,a){"use strict";var i=a("fd70"),n=a.n(i);n.a},"0e86":function(t,e,a){"use strict";var i=a("0815"),n=a.n(i);n.a},"0eab":function(t,e,a){"use strict";var i=a("6bba"),n=a.n(i);n.a},1:function(t,e){},"1ce3":function(t,e,a){"use strict";var i=a("cf97"),n=a.n(i);n.a},"1f95":function(t,e,a){"use strict";var i=a("8cc7"),n=a.n(i);n.a},2:function(t,e){},"20d1":function(t,e,a){"use strict";var i=a("568f"),n=a.n(i);n.a},2571:function(t,e,a){},"2b0a":function(t,e,a){},"2d34":function(t,e,a){},"2eb7":function(t,e,a){},"2fd4":function(t,e,a){"use strict";var i=a("5ac3"),n=a.n(i);n.a},"30cc":function(t,e,a){},"32e4":function(t,e,a){"use strict";var i=a("eb43"),n=a.n(i);n.a},"36a9":function(t,e,a){"use strict";var i=a("8381"),n=a.n(i);n.a},"39dd":function(t,e,a){"use strict";var i=a("0586"),n=a.n(i);n.a},"438d":function(t,e,a){"use strict";var i=a("cfca"),n=a.n(i);n.a},"46c1":function(t,e,a){},"4a11":function(t,e,a){"use strict";var i=a("fcd1"),n=a.n(i);n.a},5432:function(t,e,a){},"568f":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),n=a("bb71");a("da64");i["a"].use(n["a"],{iconfont:"md"});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("router-view")],1)],1)},r=[],s={name:"App"},l=s,c=a("2877"),u=a("6544"),d=a.n(u),p=a("7496"),v=a("549c"),h=Object(c["a"])(l,o,r,!1,null,null,null),f=h.exports;d()(h,{VApp:p["a"],VContent:v["a"]});var m=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("app-snackbar"),a("app-toolbar"),a("app-tools"),a("app-studio"),a("div",{attrs:{id:"stepper-item"}},[a("app-stepper")],1),a("div",{attrs:{id:"view-item"}},[a("app-view")],1)],1)},b=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading"].indexOf(t.$route.name)?a("v-navigation-drawer",{attrs:{id:"tools-drawer",fixed:"",clipped:"",value:this.toolsDrawer,"mini-variant":"","mini-variant-width":"60",app:"","mobile-break-point":"800"},on:{input:t.updateToolsDrawerState}},[a("v-list",{staticClass:"pointers-please",attrs:{id:"toolList",dense:""}},[t.getStepTools().includes("pan")?a("app-pan",{attrs:{active:"pan"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pan"}}}):t._e(),a("v-divider"),t.getStepTools().includes("move")?a("app-move",{attrs:{active:"move"===t.activeTool},nativeOn:{click:function(e){t.activeTool="move"}}}):t._e(),t.getStepTools().includes("node")?a("app-node",{attrs:{active:"node"===t.activeTool},nativeOn:{click:function(e){t.activeTool="node"}}}):t._e(),a("v-divider"),t.getStepTools().includes("circle")?a("app-circle",{attrs:{active:"circle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="circle"}}}):t._e(),t.getStepTools().includes("rectangle")?a("app-rectangle",{attrs:{active:"rectangle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="rectangle"}}}):t._e(),t.getStepTools().includes("path")?a("app-path",{attrs:{active:"path"===t.activeTool},nativeOn:{click:function(e){t.activeTool="path"}}}):t._e(),t.getStepTools().includes("pencil")?a("app-pencil",{attrs:{active:"pencil"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pencil"}}}):t._e(),t.getStepTools().includes("polygon")?a("app-polygon",{attrs:{active:"polygon"===t.activeTool},nativeOn:{click:function(e){t.activeTool="polygon"}}}):t._e(),t.getStepTools().includes("paint")?a("app-paint",{attrs:{active:"paint"===t.activeTool},nativeOn:{click:function(e){t.activeTool="paint"}}}):t._e(),t.getStepTools().includes("paste")?a("app-paste",{attrs:{active:"paste"===t.activeTool},nativeOn:{click:function(e){t.activeTool="paste"}}}):t._e(),t.getStepTools().includes("grid")?a("app-grid",{attrs:{active:"grid"===t.activeTool},nativeOn:{click:function(e){t.activeTool="grid"}}}):t._e(),a("v-divider"),t.getStepTools().includes("delete")?a("app-delete",{attrs:{active:"delete"===t.activeTool},nativeOn:{click:function(e){t.activeTool="delete"}}}):t._e(),a("v-divider"),t.getStepTools().includes("faces")?a("app-faces",{attrs:{active:"faces"===t.activeTool},nativeOn:{click:function(e){t.activeTool="faces"}}}):t._e(),t.getStepTools().includes("megas")?a("app-megas",{attrs:{active:"megas"===t.activeTool},nativeOn:{click:function(e){t.activeTool="megas"}}}):t._e(),t.getStepTools().includes("filter")?a("app-filter",{attrs:{active:"filter"===t.activeTool},nativeOn:{click:function(e){t.activeTool="filter"}}}):t._e()],1)],1):t._e()},w=[],k=a("cebc"),C=a("2f62"),x=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"circle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-circle":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Circle Tool [c] ")])],1)],1)},O=[],I=(a("6c7b"),a("2222")),j=a.n(I),S={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCircle:null,strokeWidth:2,radius:2e3}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.app.activeStep},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.toolCircle.minDistance=4*t.strokeWidth},a=function(e){t.toolCircle.minDistance=0,t.radius=t.calculateDistance(e.downPoint,e.point);var a=new j.a.Path.Line(e.downPoint,e.point);a.strokeColor=new j.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.add(e.point),a.removeOn({drag:!0,down:!0,up:!0});var i=new j.a.Path.Circle(e.downPoint,t.radius);i.strokeColor=new j.a.Color("#2661D8"),i.strokeColor.alpha=.7,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0})},i=function(e){var a=new j.a.Path.Circle(e.downPoint,t.radius);a.strokeColor=new j.a.Color(t.getColor().stroke),a.strokeWidth=t.strokeWidth,a.fillColor=new j.a.Color(t.getColor().fill),a.data.countable=!0,a.data.type="circle",a.data.class=""};this.toolCircle=new j.a.Tool,this.toolCircle.onMouseDown=e,this.toolCircle.onMouseDrag=a,this.toolCircle.onMouseUp=i},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolCircle.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,n=e.x,o=e.y,r=Math.sqrt(Math.pow(n-a,2)+Math.pow(o-i,2));return r}})},T=S,_=(a("2fd4"),a("8336")),V=a("ba95"),A=a("3a2f"),D=Object(c["a"])(T,x,O,!1,null,"63ba4c88",null),P=D.exports;d()(D,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"rectangle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        crop_landscape\n      ")])],1),a("span",[t._v(" Rectangel Tool [r] ")])],1)],1)},W=[],B={props:{active:{type:Boolean,default:!1}},data:function(){return{toolRect:null,strokeWidth:2}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){var a=new j.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new j.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.removeOn({drag:!0,up:!0})},a=function(e){var a=new j.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new j.a.Color(t.getColor().stroke),a.fillColor=new j.a.Color(t.getColor().fill),a.strokeWidth=t.strokeWidth,a.data.type="rectangle",a.data.class=""};this.toolRect=new j.a.Tool,this.toolRect.onMouseDrag=e,this.toolRect.onMouseUp=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolRect.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)}})},F=B,N=(a("f7b0"),a("132d")),M=Object(c["a"])(F,L,W,!1,null,null,null),E=M.exports;d()(M,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"path",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        timeline\n      ")])],1),a("span",[t._v(" Path Tool [p] ")])],1)],1)},Z=[],G={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPen:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path");var a=t.path.hitTest(e.point,t.hitOptions);e.modifiers.option?(t.path.closed=!0,t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new j.a.Color(t.getColor().fill),t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.lastSegment?(t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.path.smooth())},a=function(e){var a=j.a.project.hitTest(e.point,t.hitOptions);a?a.segment===a.item.firstSegment?(t.path.closed=!0,t.path.selected=!1):a.segment!==a.item.firstSegment&&a.segment!==a.item.lastSegment||(t.path.selected=!1):t.path&&t.path.data.active&&(t.path.selected=!0,t.path.closed=!1)};this.toolPen=new j.a.Tool,this.toolPen.onMouseDown=e,this.toolPen.onMouseMove=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPen.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new j.a.Path;return t.strokeColor=new j.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},$=G,z=(a("438d"),Object(c["a"])($,R,Z,!1,null,null,null)),H=z.exports;d()(z,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pencil",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-pencil-alt":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Pencil Tool [m] ")])],1)],1)},U=[],q={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPencil:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path")},a=function(e){t.path.add(e.point);var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new j.a.Color(t.getColor().fill)):(t.path.closed=!1,t.path.fillColor&&(t.path.fillColor.alpha=0))},i=function(e){var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment&&(t.path.closed=!0,t.path.fillColor=new j.a.Color(t.getColor().fill)),t.path.selected=!1,t.path.simplify(),t.path.data.active=!1};this.toolPencil=new j.a.Tool,this.toolPencil.onMouseDown=e,this.toolPencil.onMouseDrag=a,this.toolPencil.onMouseUp=i},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPencil.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:this.strokeWidth},this.toolPencil.minDistance=this.strokeWidth},newPath:function(){var t=new j.a.Path;return t.strokeColor=new j.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},J=q,Q=(a("7db0"),Object(c["a"])(J,K,U,!1,null,null,null)),X=Q.exports;d()(Q,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"move",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Move Tool [v]")])],1)],1)},tt=[],et=(a("7f7f"),a("ac6a"),a("f3e2"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolMove:null,hitOptions:null,strokeWidth:2,selectionGroup:null,toolMode:""}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=function(a){e=j.a.project.hitTest(a.point,t.hitOptions),t.selectionGroup.bounds.selected=!1,e?"bounds"===e.type?t.toolMode="transform":a.modifiers.shift&&!e.item.selected?e.item.selected=!0:a.modifiers.shift&&e.item.selected?e.item.selected=!1:e.item.selected?t.toolMode="move":(j.a.project.deselectAll(),e.item.selected=!0,t.toolMode="move"):(j.a.project.deselectAll(),t.toolMode="select")},i=function(a){if("select"===t.toolMode){var i=new j.a.Shape.Rectangle(a.downPoint,a.point);i.strokeColor="#4D88D4",i.fillColor="#A3C5E8",i.opacity=.3,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0}),j.a.project.deselectAll(),j.a.project.getItems({class:"Path",inside:i.bounds,match:t.matchFilter}).forEach(function(t){t.selected=!0})}else if("move"===t.toolMode)t.selectionGroup.children.length>0?t.selectionGroup.position=t.selectionGroup.position.add(a.delta):e.item.position=e.item.position.add(a.delta);else if("transform"===t.toolMode){var n=null,o=null,r=null;e&&"top-left"===e.name?(n=a.point.x-t.selectionGroup.bounds.topRight.x,o=a.point.y-t.selectionGroup.bounds.bottomLeft.y,r=t.selectionGroup.bounds.bottomRight):e&&"top-right"===e.name?(n=a.point.x-t.selectionGroup.bounds.topLeft.x,o=a.point.y-t.selectionGroup.bounds.bottomRight.y,r=t.selectionGroup.bounds.bottomLeft):e&&"bottom-right"===e.name?(n=a.point.x-t.selectionGroup.bounds.bottomLeft.x,o=a.point.y-t.selectionGroup.bounds.topRight.y,r=t.selectionGroup.bounds.topLeft):e&&"bottom-left"===e.name&&(n=a.point.x-t.selectionGroup.bounds.bottomRight.x,o=a.point.y-t.selectionGroup.bounds.topLeft.y,r=t.selectionGroup.bounds.topRight);var s=Math.abs(n/t.selectionGroup.bounds.width),l=Math.abs(o/t.selectionGroup.bounds.height);t.selectionGroup.scale(s,l,r)}},n=function(e){t.selectionGroup=new j.a.Group(j.a.project.selectedItems),t.selectionGroup.isEmpty()||(t.selectionGroup.bounds.selected=!0),t.setSelectedItems(j.a.project.selectedItems)},o=function(e){if(t.selectionGroup&&t.selectionGroup.hitTest(e.point,t.hitOptions)){var a=t.selectionGroup.hitTest(e.point,t.hitOptions);"bottom-right"===a.name||"top-left"===a.name?j.a.view.element.style.cursor="nwse-resize":"bottom-left"===a.name||"top-right"===a.name?j.a.view.element.style.cursor="nesw-resize":"fill"===a.type&&(j.a.view.element.style.cursor="move")}else{var i=document.getElementById("annotation-canvas");i.style.cursor="auto"}},r=function(e){t.active&&("backspace"!==e.key&&"delete"!==e.key||j.a.project.selectedItems&&(t.selectionGroup.bounds.selected=!1,j.a.project.selectedItems.forEach(function(t){"Layer"!==t.className&&t.remove()})))};this.toolMove=new j.a.Tool,this.toolMove.onMouseDown=a,this.toolMove.onMouseDrag=i,this.toolMove.onMouseMove=o,this.toolMove.onKeyUp=r,this.toolMove.onMouseUp=n},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas",setSelectedItems:"annotation/setSelectedItems"}),{initialiseTool:function(){this.prepareCanvas(),this.toolMove.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.hitOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter,class:j.a.Path},this.selectionGroup=new j.a.Group(j.a.project.selectedItems)},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&((!t.layer||"guide"!==t.layer.name)&&(!t.locked||void 0))}})}),at=et,it=(a("36a9"),Object(c["a"])(at,Y,tt,!1,null,null,null)),nt=it.exports;d()(it,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pan",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[t.active?a("v-icon",{staticClass:"blue--text text--darken-1"},[t._v("\n        lock_open\n      ")]):a("v-icon",{staticClass:"grey--text text--darken-2"},[t._v("\n        lock_outline\n      ")])],1),a("span",[t._v(" Lock View Tool [space] ")])],1)],1)},rt=[],st={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPan:null}},methods:{initialiseTool:function(){document.getElementById("annotation-canvas").setAttribute("class","pointers-no"),document.getElementById("osd-canvas").style.cursor="grab"}}},lt=st,ct=(a("dfca"),Object(c["a"])(lt,ot,rt,!1,null,null,null)),ut=ct.exports;d()(ct,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"node",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Node Tool [a] ")])],1)],1)},pt=[],vt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolNode:null,hitOptions:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=null,i=function(i){e=j.a.project.hitTest(i.point,t.hitOptions),e?e.item.selected?"stroke"===e.type?a="adding-node":"segment"===e.type?(j.a.project.deselectAll(),e.item.selected=!0,e.segment.selected=!0,e.segment.handleIn.selected=!0,e.segment.handleOut.selected=!0,a="adjusting-segment"):"handle-out"!==e.type&&"handle-in"!==e.type||(a="adjusting-handle"):(j.a.project.deselectAll(),e.item.selected=!0,a="selecting"):j.a.project.deselectAll()},n=function(t){e&&"adjusting-segment"===a?e.segment.point=e.segment.point.add(t.delta):e&&"handle-out"===e.type&&"adjusting-handle"===a?e.segment.handleOut=e.segment.handleOut.add(t.delta):e&&"handle-in"===e.type&&"adjusting-handle"===a&&(e.segment.handleIn=e.segment.handleIn.add(t.delta))};this.toolNode=new j.a.Tool,this.toolNode.onMouseDown=i,this.toolNode.onMouseDrag=n},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolNode.activate();var t=this.imageWidth/(300*this.viewportZoom);this.hitOptions={segments:!0,stroke:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},ht=vt,ft=(a("1f95"),Object(c["a"])(ht,dt,pt,!1,null,null,null)),mt=ft.exports;d()(ft,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-delete"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        delete\n      ")])],1),a("span",[t._v(" Delete Tool ")])],1)],1)},bt=[],yt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolDelete:null,selectOptions:null,strokeWidth:2}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=[],i=null,n=function(n){if(e=j.a.project.hitTest(n.point,t.selectOptions),a=!e||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type&&"bounds"!==e.type?[]:[e.item],j.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var o in a)if(a[o].data.selectWith)for(var r in a[o].data.selectWith)a.push(a[o].data.selectWith[r]);i=new j.a.Group(a),i.selected=!0}},o=function(e){var n=new j.a.Shape.Rectangle(e.downPoint,e.point);if(n.strokeColor="#4D88D4",n.fillColor="#A3C5E8",n.opacity=.3,n.strokeWidth=t.strokeWidth,n.removeOn({drag:!0,down:!0,up:!0}),a=j.a.project.getItems({class:"Path",inside:n.bounds,match:t.matchFilter}),j.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var o in a)if(a[o].data.selectWith)for(var r in a[o].data.selectWith)a.push(a[o].data.selectWith[r]);i=new j.a.Group(a),i.selected=!0}},r=function(t){i&&i.remove()};this.toolDelete=new j.a.Tool,this.toolDelete.onMouseDown=n,this.toolDelete.onMouseDrag=o,this.toolDelete.onMouseUp=r},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolDelete.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},wt=yt,kt=(a("39dd"),Object(c["a"])(wt,gt,bt,!1,null,null,null)),Ct=kt.exports;d()(kt,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-paint-brush":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Paint Tool ")])],1)],1)},Ot=[],It={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPaint:null,strokeWidth:2,radius:2e3,brush:null,overlap:null,path:null,combinedPath:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.app.activeStep}})),created:function(){var t=this,e=function(e){t.brush=new j.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:new j.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1})}),t.brush.removeOn({move:!0,drag:!0})},a=function(e){t.path=new j.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:t.getColor().stroke,fillColor:t.getColor().fill}).removeOn({drag:!0,up:!0,move:!0});var a=j.a.project.getItem({class:"Path",match:function(t){if("megakaryocyte"!==t.data.class)return!0},overlapping:t.path.bounds});a&&(e.modifiers.alt?t.combinedPath=a.subtract(t.path):t.combinedPath=a.unite(t.path),a.remove())};this.toolPaint=new j.a.Tool,this.toolPaint.onMouseMove=e,this.toolPaint.onMouseDrag=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPaint.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,n=e.x,o=e.y,r=Math.sqrt(Math.pow(n-a,2)+Math.pow(o-i,2));return r}})},jt=It,St=(a("9fee"),Object(c["a"])(jt,xt,Ot,!1,null,"54a48388",null)),Tt=St.exports;d()(St,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var _t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        grid_on\n      ")])],1),a("v-card",[a("v-list",[a("v-list-tile",[a("v-flex",{attrs:{xs5:"","justify-space-around":""}},[a("div",{attrs:{id:"switch"}},[a("v-switch",{attrs:{"input-value":t.visible},on:{change:t.toggleLayerVisibility}})],1)]),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Visibility\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridWidth,suffix:"px","single-line":""},on:{change:t.setGridWidth},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setGridWidth(e)}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Width\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridHeight,suffix:"px","single-line":""},on:{change:t.setGridHeight},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setGridHeight(e)}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Height\n          ")])],1)],1)],1)],1)],1)},Vt=[],At=(a("c5f6"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolGrid:null,strokeWidth:2,gridLayer:!1,gridWidth:0,gridHeight:0,menu:!1,visible:!0}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},imageHeight:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().y},strokeScale:function(t){return t.app.strokeScale}})),created:function(){this.toolGrid=new j.a.Tool},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.gridLayer||this.createGrid(),this.toolGrid.activate()},createGrid:function(){this.gridLayer=new j.a.Layer({name:"guide"}),this.gridWidth=this.imageWidth/10,this.gridHeight=this.imageHeight/10,this.redrawGrid()},redrawGrid:function(){this.gridLayer.activate(),this.gridLayer.removeChildren();for(var t=Math.ceil(this.imageHeight/this.gridHeight),e=Math.ceil(this.imageWidth/this.gridWidth),a=0;a<t;a++)for(var i=0;i<e;i++){var n=new j.a.Path.Rectangle({from:[this.gridWidth*i,this.gridHeight*a],to:[this.gridWidth*i+this.gridWidth,this.gridHeight*a+this.gridHeight],strokeColor:"grey",strokeWidth:this.strokeWidth});n.strokeColor.alpha=.7}},toggleLayerVisibility:function(){this.visible=!this.visible,this.gridLayer.visible=!this.gridLayer.visible},setGridWidth:function(t){var e=this.gridWidth;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridWidth=Number(e),this.redrawGrid()},setGridHeight:function(t){var e=this.gridHeight;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridHeight=Number(e),this.redrawGrid()}})}),Dt=At,Pt=(a("20d1"),a("b0af")),Lt=a("0e8f"),Wt=a("8860"),Bt=a("e449"),Ft=a("b73d"),Nt=a("2677"),Mt=Object(c["a"])(Dt,_t,Vt,!1,null,null,null),Et=Mt.exports;d()(Mt,{VBtn:_["a"],VCard:Pt["a"],VFlex:Lt["a"],VIcon:N["a"],VList:Wt["a"],VListTile:V["a"],VMenu:Bt["a"],VSwitch:Ft["a"],VTextField:Nt["a"]});var Rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"polygon",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        polymer\n      ")])],1),a("span",[t._v(" Polygon Tool ")])],1)],1)},Zt=[],Gt=a("0a0d"),$t=a.n(Gt),zt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPolygon:null,strokeWidth:2,hitOptions:null,path:null,clickTime:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active?t.clickTime&&$t()()-t.clickTime<200?(t.path.fillColor=new j.a.Color(t.getColor().fill),t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.clickTime=$t()()):(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path",t.path.closed=!0,t.path.add(e.point))},a=function(e){"escape"===e.key&&(t.path.fillColor=new j.a.Color(t.getColor().fill),t.path.selected=!1,t.path.data.active=!1)};this.toolPolygon=new j.a.Tool,this.toolPolygon.onMouseDown=e,this.toolPolygon.onKeyDown=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPolygon.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new j.a.Path;return t.strokeColor=new j.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},Ht=zt,Kt=(a("8b38"),Object(c["a"])(Ht,Rt,Zt,!1,null,null,null)),Ut=Kt.exports;d()(Kt,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        format_paint\n      ")])],1),a("span",[t._v(" Paste Tool ")])],1)],1)},Jt=[],Qt=a("aa78"),Xt=a.n(Qt),Yt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPaste:null,strokeWidth:2,radius:2e3,pasteBrush:null,currentColor:"#000000",currentRaster:null}},computed:Object(k["a"])({},Object(C["d"])({OSDviewer:function(t){return t.image.OSDviewer},OSDworld:function(t){return t.image.world},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.app.activeStep}})),created:function(){var t=this,e=function(e){t.pasteBrush=new j.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:new j.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1})}),t.pasteBrush.removeOn({move:!0,drag:!0})},a=function(e){var a=new j.a.Path.Circle({radius:t.radius,position:e.point,fillColor:t.currentColor,strokeColor:t.currentColor,locked:!0,data:{type:"path"}}),i=j.a.project.getItem({fillColor:t.currentColor,match:function(t){return t.locked},overlapping:a.bounds});i&&(t.combinedPath=i.unite(a),t.combinedPath.locked=!0,i.remove(),a.remove())},i=function(e){"alt"===e.key?j.a.view.element.style.cursor="crosshair":"1"===e.key?t.currentColor="#000000":"2"===e.key?t.currentColor="#808080":"3"===e.key&&(t.currentColor="#FFFFFF")},n=function(t){"alt"===t.key&&(j.a.view.element.style.cursor="auto")};this.toolPaste=new j.a.Tool,this.toolPaste.onMouseMove=e,this.toolPaste.onMouseDrag=a,this.toolPaste.onKeyDown=i,this.toolPaste.onKeyUp=n},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPaste.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)}})},te=Yt,ee=(a("5930"),Object(c["a"])(te,qt,Jt,!1,null,"0c8df55e",null)),ae=ee.exports;d()(ee,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"filter",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-filter":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Create class filter group",box:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.createFilterGroup(e)}}})],1)],1),a("v-list",t._l(t.listOfFilters,function(e,i){return a("v-list-tile",{key:e.class,attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.class)}})],1),a("v-list-tile-action",[a("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(e){return t.popFilter(i)}}},[a("v-icon",[t._v("close")])],1)],1)],1)}),1)],1)],1)],1)],1)},ne=[],oe=(a("d25f"),a("6762"),a("2fdb"),a("6d67"),{props:{active:{type:Boolean,default:!1}},data:function(){return{menu:!1,loading:!1,toggle_multiple:[0,1,2],predictions:{correct:[],flagged:[],incorrect:[],alan:{correct:[],flagged:[],incorrect:[]},gabi:{correct:[],flagged:[],incorrect:[]},gareth:{correct:[],flagged:[],incorrect:[]}},correctPredictions:[],flaggedPredictions:[],incorrectPredictions:[],visiblePredictions:{alan:[0,1,2],gareth:[0,1,2],gabi:[0,1,2]},listOfFilters:[]}},watch:{visiblePrediction:function(t){},listOfFilters:function(t){t.map(function(t){var e=j.a.project.getItems({data:{class:t.class}});e.map(function(t){return t.remove()})})},toggle_multiple:function(t){this.toggle_multiple.includes(0)?(j.a.project.activeLayer.addChildren(this.correctPredictions),this.correctPredictions=[]):(this.correctPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.correctPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(1)?(j.a.project.activeLayer.addChildren(this.flaggedPredictions),this.flaggedPredictions=[]):(this.flaggedPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.flaggedPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(2)?(j.a.project.activeLayer.addChildren(this.incorrectPredictions),this.incorrectPredictions=[]):(this.incorrectPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.incorrectPredictions.map(function(t){return t.remove()}))}},methods:{initialiseTool:function(){var t=j.a.project.getItems({data:{class:"megakaryocyte"}});this.predictions.correct=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.flagged=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.incorrect=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision})},createFilterGroup:function(t){this.listOfFilters.push({class:t.target.value,active:!1})},popFilter:function(t){this.listOfFilters.splice(t,1)}}}),re=oe,se=(a("0a64"),a("a523")),le=a("a722"),ce=a("40fe"),ue=a("5d23"),de=Object(c["a"])(re,ie,ne,!1,null,"50445868",null),pe=de.exports;d()(de,{VBtn:_["a"],VCard:Pt["a"],VContainer:se["a"],VFlex:Lt["a"],VIcon:N["a"],VLayout:le["a"],VList:Wt["a"],VListTile:V["a"],VListTileAction:ce["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VMenu:Bt["a"],VTextField:Nt["a"]});var ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.activate(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-user-tag":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Faces Tool ")])],1)],1)},he=[],fe=a("62c3"),me=a.n(fe),ge={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:Object(k["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),methods:Object(k["a"])({},Object(C["c"])({getColor:"annotation/getColor"}),{activate:function(){var t=this;this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.loading=!0,me.a.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAeCFXV_oK3QjGQdypK_2hVTH_ck2mshFw",{requests:[{image:{source:{imageUri:this.imageUri}},features:{type:"FACE_DETECTION"},imageContext:{}}]}).then(function(e){t.loading=!1,console.log(e);var a=e.data.responses[0].faceAnnotations;for(var i in a){var n=[];for(var o in a[i].boundingPoly.vertices)n.push(new j.a.Point(a[i].boundingPoly.vertices[o].x,a[i].boundingPoly.vertices[o].y));var r=new j.a.Path(n);r.strokeColor=new j.a.Color(t.getColor()),r.closed=!0,r.strokeWidth=t.strokeWidth,r.data.type="rectangle",r.data.class="face"}}).catch(function(e){t.loading=!1,console.log("could not apply face detection, returned the following error: \n \n"+e)})},drawBoundingFaces:function(t){}})},be=ge,ye=(a("a45a"),Object(c["a"])(be,ve,he,!1,null,"fd4de720",null)),we=ye.exports;d()(ye,{VBtn:_["a"],VListTile:V["a"],VTooltip:A["a"]});var ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        youtube_searched_for\n      ")])],1),a("span",[t._v(" Megakaryocyte Classifier ")])],1)],1)},Ce=[],xe=a("f499"),Oe=a.n(xe),Ie={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1,trackingRect:null}},computed:Object(k["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},tileSource:function(t){return t.image.OSDviewer.world.getItemAt(0).source},viewport:function(t){return t.image.OSDviewer.viewport},tiledImage:function(t){return t.image.OSDviewer.world.getItemAt(0)}})),created:function(){this.toolMega=new j.a.Tool},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){var t=this;this.prepareCanvas(),this.toolMega.activate(),this.strokeWidth=this.imageWidth/(300*this.viewportZoom),me.a.get("https://aida-private.firebaseio.com/megas.json ").then(function(e){var a=e.data;console.log(a),a.map(t.drawMega)}).then()},overlapsImage:function(t){return!(t.topLeft.x>this.tiledImage.getBounds().width||t.bottomRight.x<0)&&!(t.topLeft.y>this.tiledImage.getBounds().height||t.bottomRight.y<0)},saveToJSON:function(t,e){var a="data:text/json;charset=utf-8,"+encodeURIComponent(Oe()(t,null,2)),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.remove()},drawMega:function(t){var e=new j.a.Path.Rectangle({from:new j.a.Point(t.x_min,t.y_min),to:new j.a.Point(t.x_max,t.y_max),data:{type:"rectangle",class:t.class,data:{score:t.score,validations:[]}}});e.strokeColor=new j.a.Color(this.getColor().stroke),e.strokeWidth=this.strokeWidth}})},je=Ie,Se=(a("0e86"),Object(c["a"])(je,ke,Ce,!1,null,"c8715034",null)),Te=Se.exports;d()(Se,{VBtn:_["a"],VIcon:N["a"],VListTile:V["a"],VTooltip:A["a"]});var _e={components:{"app-circle":P,"app-rectangle":E,"app-path":H,"app-move":nt,"app-pan":ut,"app-node":mt,"app-pencil":X,"app-delete":Ct,"app-faces":we,"app-megas":Te,"app-paint":Tt,"app-grid":Et,"app-filter":pe,"app-polygon":Ut,"app-paste":ae},data:function(){return{activeTool:"pan"}},mounted:function(){window.addEventListener("keydown",this.keyDown)},computed:Object(k["a"])({},Object(C["d"])({toolsDrawer:function(t){return t.app.toolsDrawer},activeStep:function(t){return t.app.activeStep},tools:function(t){return t.app.tools}})),methods:Object(k["a"])({},Object(C["c"])({getStepTools:"app/getStepTools"}),Object(C["b"])({setToolsDrawerState:"app/setToolsDrawerState"}),{updateToolsDrawerState:function(t){t||this.setToolsDrawerState(t)},keyDown:function(t){switch(t.keyCode){case 32:document.getElementById("pan").click();break;case 86:document.getElementById("move").click();break;case 65:document.getElementById("node").click();break;case 67:document.getElementById("circle").click();break;case 82:document.getElementById("rectangle").click();break;case 80:document.getElementById("path").click();break;case 77:document.getElementById("pencil").click();break}}})},Ve=_e,Ae=(a("cda9"),a("ce7e")),De=a("f774"),Pe=Object(c["a"])(Ve,y,w,!1,null,"782dea00",null),Le=Pe.exports;d()(Pe,{VDivider:Ae["a"],VList:Wt["a"],VNavigationDrawer:De["a"]});var We=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading","landing","examples"].indexOf(t.$route.name)?a("v-navigation-drawer",{attrs:{id:"studio-drawer",fixed:"",clipped:"",value:this.studioDrawer,app:"",right:"","mobile-break-point":"1000"},on:{input:t.updateStudioDrawerState}},[a("div",{staticClass:"pointers-please studioPanel elevation-2"},[a("app-navigator"),a("app-layers"),a("app-images"),a("app-properties")],1)]):t._e()},Be=[],Fe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Navigator\n      ")])],1),a("div",{attrs:{id:"nav-container"}},[a("div",{attrs:{id:"navigator"}})]),a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{xs10:""}},[a("v-slider",{staticClass:"pad-slider-right",attrs:{value:t.getZoom,max:t.getMaxZoom,min:"0",step:"0"},on:{input:t.setZoom}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{value:t.getZoom,suffix:"x","single-line":""},on:{change:t.setZoom},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setZoom(e)}}})],1)],1)],1)],1)],1)},Ne=[],Me={computed:Object(k["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])("image",["getZoom","getMaxZoom"])),methods:Object(k["a"])({},Object(C["b"])({setZoom:"image/setZoom"}))},Ee=Me,Re=(a("9d7a"),a("ba0d")),Ze=a("71d9"),Ge=a("2a7f"),$e=Object(c["a"])(Ee,Fe,Ne,!1,null,"783383ce",null),ze=$e.exports;d()($e,{VCard:Pt["a"],VFlex:Lt["a"],VLayout:le["a"],VSlider:Re["a"],VTextField:Nt["a"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"]});var He=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Layers\n      ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.newLayer(e)}}},[a("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          add\n        ")])],1)],1),a("v-list",{attrs:{id:"list"}},t._l(t.layers,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){return t.selectLayer(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{class:[t.activeLayer===i?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Layer "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" opacity ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",{on:{mousedown:function(e){return t.selectLayer(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("v-slider",{staticClass:"pad-slider-right",attrs:{value:100*e.opacity,max:"100","prepend-icon":e.opacity>0?"visibility":"visibility_off"},on:{input:t.setActiveLayerOpacity,"click:prepend":function(a){return t.toggleOpacity(e.opacity)}}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{value:Math.round(100*e.opacity),suffix:"%","single-line":"",mask:"###"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setActiveLayerOpacity(e)}}})],1)],1)],1)]),a("v-tab-item",{on:{mousedown:function(e){return t.selectLayer(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Layer "+i,"single-line":""},on:{change:t.setActiveLayerName},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setActiveLayerName(e)}}})],1)]),a("v-tab-item",{on:{mousedown:function(e){return t.selectLayer(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:function(e){t.deleteActiveLayer().then(function(){t.setActiveLayer(0)})}}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}),1)],1)],1)},Ke=[],Ue=(a("96cf"),a("3b8d")),qe={data:function(){return{opacityCache:1}},computed:Object(k["a"])({},Object(C["d"])({layers:function(t){return t.annotation.project.layers},activeLayer:function(t){return t.app.activeLayer},steps:function(t){return t.app.steps},activeStep:function(t){return t.app.activeStep}})),methods:Object(k["a"])({},Object(C["b"])("annotation",["setActiveLayerOpacity","createLayer","exportLayerJSON","setActiveLayer","setActiveLayerName","deleteActiveLayer"]),Object(C["b"])("editor",["setActiveStep"]),{newLayer:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.createLayer();case 2:this.setActiveLayer(this.layers.length-1);case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),selectLayer:function(t){this.setActiveLayer(t)},toggleOpacity:function(t){t>0?(this.opacityCache=t,this.setActiveLayerOpacity(0)):this.setActiveLayerOpacity(100*this.opacityCache)}})},Je=qe,Qe=(a("faf1"),a("56b0")),Xe=a("9910"),Ye=a("71a3"),ta=a("c671"),ea=a("fe57"),aa=a("aac8"),ia=Object(c["a"])(Je,He,Ke,!1,null,"83ead040",null),na=ia.exports;d()(ia,{VBtn:_["a"],VCard:Pt["a"],VFlex:Lt["a"],VIcon:N["a"],VLayout:le["a"],VList:Wt["a"],VListGroup:Qe["a"],VListTile:V["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VSlider:Re["a"],VSpacer:Xe["a"],VTab:Ye["a"],VTabItem:ta["a"],VTabs:ea["a"],VTabsItems:aa["a"],VTextField:Nt["a"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"]});var oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Channels\n      ")])],1),a("v-list",{attrs:{id:"list"}},t._l(t.getChannels,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){return t.setActiveChannel(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{class:[t.activeChannel===i?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Channel "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" opacity ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",{on:{mousedown:function(e){return t.setActiveChannel(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("v-slider",{staticClass:"pad-slider-right",attrs:{value:100*e.opacity,max:"100","prepend-icon":e.opacity>0?"visibility":"visibility_off"},on:{input:t.setActiveChannelOpacity,"click:prepend":function(a){return t.toggleOpacity(e.opacity)}}})],1),a("v-flex",{attrs:{xs2:""}},[a("v-text-field",{attrs:{value:Math.round(100*e.opacity),suffix:"%","single-line":"",mask:"###"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setActiveChannelOpacity(e)}}})],1)],1)],1)]),a("v-tab-item",{on:{mousedown:function(e){return t.setActiveChannel(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Channel "+i,"single-line":""},on:{change:t.setActiveChannelName},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setActiveChannelName(e)}}})],1)]),a("v-tab-item",{on:{mousedown:function(e){return t.setActiveChannel(i)}}},[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteChannel}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}),1)],1)],1)},ra=[],sa={data:function(){return{opacityCache:1}},computed:Object(k["a"])({},Object(C["d"])({activeChannel:function(t){return t.image.activeChannel}}),Object(C["c"])({getChannels:"image/getChannels"})),methods:Object(k["a"])({},Object(C["b"])({setActiveChannelOpacity:"image/setActiveChannelOpacity",setActiveChannel:"image/setActiveChannel",setActiveChannelName:"image/setActiveChannelName",deleteChannel:"image/deleteChannel"}),{toggleOpacity:function(t){t>0?(this.opacityCache=t,this.setActiveChannelOpacity(0)):this.setActiveChannelOpacity(100*this.opacityCache)}})},la=sa,ca=(a("ba0b"),Object(c["a"])(la,oa,ra,!1,null,"9b13e958",null)),ua=ca.exports;d()(ca,{VBtn:_["a"],VCard:Pt["a"],VFlex:Lt["a"],VIcon:N["a"],VLayout:le["a"],VList:Wt["a"],VListGroup:Qe["a"],VListTile:V["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VSlider:Re["a"],VTab:Ye["a"],VTabItem:ta["a"],VTabs:ea["a"],VTabsItems:aa["a"],VTextField:Nt["a"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"]});var da=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Properties\n      ")]),a("v-spacer")],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            No. selected items:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(t.selectedItems.length)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Fill colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedFillColor,type:"fill"}})],1)],1)],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Stroke colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedStrokeColor,type:"stroke"}})],1)],1)],1)],1)],1)],1)},pa=[],va=(a("2caf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"225px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("a",{attrs:{slot:"activator"},slot:"activator"},[a("div",{staticClass:"color-tile",style:{"background-color":t.color.style}})]),a("v-card",[a("colour-picker",{attrs:{id:"picker"},model:{value:t.colorPick,callback:function(e){t.colorPick=e},expression:"colorPick"}})],1)],1)}),ha=[],fa=a("c345"),ma={components:{"colour-picker":fa["Chrome"]},props:{color:{type:Object,default:function(){return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}},type:{type:String,default:function(){return"fill"}}},data:function(){return{dialog:!1,colorPick:{hsl:this.color.obj}}},computed:Object(k["a"])({},Object(C["d"])({selectedItems:function(t){return t.annotation.selectedItems}})),watch:{dialog:function(t){t?this.colorPick={hsl:this.color.obj}:t||this.selectedItems.length>0&&("fill"===this.type?this.changeItemsFillColor(this.selectedItems):"stroke"===this.type&&this.changeItemsStrokeColor(this.selectedItems))}},methods:{changeItemsFillColor:function(t){var e=this;t.map(function(t){t.fillColor=new j.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})},changeItemsStrokeColor:function(t){var e=this;t.map(function(t){t.strokeColor=new j.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})}}},ga=ma,ba=(a("882c"),a("169a")),ya=Object(c["a"])(ga,va,ha,!1,null,"2af7e386",null),wa=ya.exports;d()(ya,{VCard:Pt["a"],VDialog:ba["a"]});var ka={components:{"colour-picker":wa},computed:Object(k["a"])({},Object(C["d"])({selectedItems:function(t){return t.annotation.selectedItems}}),{selectedFillColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.fillColor&&t.fillColor.hue===a[0].fillColor.hue&&t.fillColor.saturation===a[0].fillColor.saturation&&t.fillColor.lightness===a[0].fillColor.lightness&&t.fillColor.alpha===a[0].fillColor.alpha})){var t={h:this.selectedItems[0].fillColor.hue,s:this.selectedItems[0].fillColor.saturation,l:this.selectedItems[0].fillColor.lightness,a:this.selectedItems[0].fillColor.alpha};return{style:this.selectedItems[0].fillColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}},selectedStrokeColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.strokeColor&&t.strokeColor.hue===a[0].strokeColor.hue&&t.strokeColor.saturation===a[0].strokeColor.saturation&&t.strokeColor.lightness===a[0].strokeColor.lightness&&t.strokeColor.alpha===a[0].strokeColor.alpha})){var t={h:this.selectedItems[0].strokeColor.hue,s:this.selectedItems[0].strokeColor.saturation,l:this.selectedItems[0].strokeColor.lightness,a:this.selectedItems[0].strokeColor.alpha};return{style:this.selectedItems[0].strokeColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}}),methods:Object(k["a"])({},Object(C["c"])({getSelectedItems:"annotation/getSelectedItems"}))},Ca=ka,xa=(a("1ce3"),Object(c["a"])(Ca,da,pa,!1,null,"c537d106",null)),Oa=xa.exports;d()(xa,{VBtn:_["a"],VCard:Pt["a"],VList:Wt["a"],VListTile:V["a"],VListTileAction:ce["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VSpacer:Xe["a"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"]});var Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Validations\n      ")])],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Prediction:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.prediction)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Score:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.score)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Weight:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.weight)+"\n        ")])],1),a("v-list-group",{attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n                Validation labels\n              ")])],1)],1),t._l(t.users,function(e,i){return a("v-list-tile",{key:i,attrs:{id:"tab-item"}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n\n                "+t._s(e)+"\n\n              ")])],1)],1)})],2)],1)],1)],1)},ja=[],Sa=(a("57e7"),{computed:Object(k["a"])({},Object(C["d"])({selected:function(t){return t.annotation.selectedItems[0]}}),{prediction:function(){return this.selected?this.selected.data.class:""},score:function(){return this.selected?Math.round(100*this.selected.data.data.score)/100:""},weight:function(){return this.selected?Math.round(100*this.selected.data.data.validationWeight)/100:""},validations:function(){return this.selected?this.selected.data.data.validations:""},users:function(){if(this.selected){var t=[];return this.selected.data.data.validations.map(function(e){return t.indexOf(e.user)>-1||t.push(e.user),t}),t}return""},userValidations:function(){if(this.selected){var t={};return this.selected.data.data.validations.map(function(e){t[e.user]=e}),console.log(t),t}return""}}),methods:Object(k["a"])({},Object(C["b"])({}))}),Ta=Sa,_a=(a("0109"),Object(c["a"])(Ta,Ia,ja,!1,null,"6625936a",null)),Va=_a.exports;d()(_a,{VCard:Pt["a"],VList:Wt["a"],VListGroup:Qe["a"],VListTile:V["a"],VListTileAction:ce["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"]});var Aa={components:{"app-navigator":ze,"app-layers":na,"app-images":ua,"app-properties":Oa,"app-validations":Va},computed:Object(k["a"])({},Object(C["d"])({studioDrawer:function(t){return t.app.studioDrawer}})),methods:Object(k["a"])({},Object(C["b"])({setStudioDrawerState:"app/setStudioDrawerState"}),{updateStudioDrawerState:function(t){t||this.setStudioDrawerState(t)}})},Da=Aa,Pa=(a("073b"),Object(c["a"])(Da,We,Be,!1,null,"b71f88e8",null)),La=Pa.exports;d()(Pa,{VNavigationDrawer:De["a"]});var Wa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.steps?a("div",{attrs:{id:"stepper-container"}},[a("v-stepper",{staticClass:"pointers-please",attrs:{id:"stepper",value:t.activeStep+1,"non-linear":""}},[a("v-stepper-header",{attrs:{id:"stepper-header"}},[t._l(t.steps,function(e,i){return[a("v-stepper-step",{key:i,staticClass:"step-icon",attrs:{step:e.id,editable:""},nativeOn:{click:function(a){return t.activateStep(e)}}}),e.id!==t.steps.length?a("v-divider",{key:e.length}):t._e()]})],2)],1),a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},["validate"===t.steps[t.activeStep].type?a("app-validate"):a("p",{attrs:{id:"hint"}},[t._v("\n      "+t._s(t.steps[t.activeStep].instruction)+"\n    ")])],1)],1):t._e()},Ba=[],Fa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},[a("div",{attrs:{id:"hint"}},[t._v("\n    "+t._s(t.steps[t.activeStep].instruction)+"\n\n    "),a("v-divider"),this.validationStarted?a("v-container",{attrs:{fluid:"",id:"validation-controls"}},[a("v-layout",[a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(e){return t.incrementActiveItemBy(-1)}}},[a("v-icon",[t._v(" arrow_back ")])],1)],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("span",{attrs:{id:"item-title"}},[t._v("\n                "+t._s(this.activeItemIndex+1)+" / "+t._s(this.getItemsForValidation().length)+"\n              ")])]),a("v-divider"),a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-btn",{attrs:{small:"",color:"success",outline:!("correct"===this.activeValidationButton),depressed:"correct"===this.activeValidationButton},on:{click:t.markCorrect}},[t._v("\n              Correct\n            ")]),a("v-btn",{attrs:{small:"",color:"warning",outline:!("flag"===this.activeValidationButton),depressed:"flag"===this.activeValidationButton},on:{click:t.flagForReview}},[t._v("\n              Flag for review\n            ")]),a("v-btn",{attrs:{small:"",color:"error",outline:!("incorrect"===this.activeValidationButton),depressed:"incorrect"===this.activeValidationButton},on:{click:t.markIncorrect}},[t._v("\n              Incorrect\n            ")]),a("v-btn",{attrs:{small:"",color:"blue",outline:""},on:{click:function(e){return e.stopPropagation(),t.createNewItem(e)}}},[t._v("\n              Create\n            ")])],1)],1),a("v-flex",{attrs:{xs2:"","text-xs-right":""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:function(e){return t.incrementActiveItemBy(1)}}},[a("v-icon",[t._v(" arrow_forward ")])],1)],1)],1)],1):a("div",[a("v-btn",{staticClass:"primary",attrs:{small:"",disabled:0===this.getItemsForValidation().length},on:{click:t.startValidation}},[t._v(" \n        Start \n      ")])],1)],1)])},Na=[],Ma={computed:Object(k["a"])({},Object(C["d"])({activeStep:function(t){return t.app.activeStep},steps:function(t){return t.app.steps},viewport:function(t){return t.image.OSDviewer.viewport},activeValidationIndex:function(t){return t.app.activeValidationIndex},uid:function(t){return t.backend.user.uid},validatorRole:function(t){return t.backend.user.validatorRole}})),data:function(){return{label:"",validationStarted:!1,activeItemIndex:0,activeValidationButton:"",paperItem:null,validationStartTime:0,initialItemData:{},neutralColor:{hue:170,saturation:.44,lightness:.69,alpha:1},highlightColor:{hue:60,saturation:1,lightness:.85,alpha:1}}},mounted:function(){window.addEventListener("keydown",this.keyDown)},destroyed:function(){window.removeEventListener("keydown",this.keyDown)},methods:Object(k["a"])({},Object(C["c"])({getItemsForValidation:"annotation/getItemsForValidation"}),Object(C["b"])({setActiveValidationIndex:"app/setActiveValidationIndex",saveClassValidation:"backend/saveClassValidation",saveBoundingBox:"backend/saveBoundingBox",validateItemsBoundingBox:"backend/validateItemsBoundingBox",createNewItemInDB:"backend/createNewItem"}),{startValidation:function(){0===this.activeValidationIndex?this.activeItemIndex=this.getItemsForValidation().length-1:this.activeItemIndex=this.activeValidationIndex-1,this.incrementActiveItemBy(1),this.validationStarted=!0},incrementActiveItemBy:function(t){this.validationStarted&&(this.checkToSaveValidation(),this.label="",this.paperItem.strokeColor=this.neutralColor),this.activeItemIndex===this.getItemsForValidation().length-1&&t>0?this.activeItemIndex=0:0===this.activeItemIndex&&t<0?this.activeItemIndex=this.getItemsForValidation().length-1:this.activeItemIndex=this.activeItemIndex+t,this.goToItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem=this.findPaperItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem.strokeColor=this.highlightColor,this.validationStartTime=$t()(),this.initialItemData={x:this.paperItem.bounds.x,y:this.paperItem.bounds.y,width:this.paperItem.bounds.width,height:this.paperItem.bounds.height}},markCorrect:function(){var t=this;this.label="megakaryocyte",this.paperItem.strokeColor="#4CAF50",this.paperItem.fillColor="#4CAF50",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.incrementActiveItemBy(1),t.setActiveValidationIndex(t.activeItemIndex)},500)},flagForReview:function(){var t=this;this.label="flag",this.paperItem.strokeColor="#FFC107",this.paperItem.fillColor="#FFC107",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.incrementActiveItemBy(1),t.setActiveValidationIndex(t.activeItemIndex)},500)},markIncorrect:function(){var t=this;this.label="negative",this.paperItem.strokeColor="#FF5252",this.paperItem.fillColor="#FF5252",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.incrementActiveItemBy(1),t.setActiveValidationIndex(t.activeItemIndex)},500)},flashAndFadeFillColor:function(t){t.fillColor.alpha=.6;var e=window.setInterval(function(){t.fillColor.alpha=t.fillColor.alpha-.05},100);window.setTimeout(function(){window.clearInterval(e)},800)},createNewItem:function(){var t=j.a.project.getItems({selected:!0,class:j.a.Path})[0];this.createNewItemInDB({timestamp:new Date,boundingBox:{height:t.bounds.height,width:t.bounds.width,x:t.bounds.x,y:t.bounds.y}})},removeItem:function(){console.log("want to remove item");var t=j.a.project.getItems({selected:!0,class:j.a.Path})[0];console.log(t)},goToItem:function(t){this.viewport.fitBoundsWithConstraints(this.viewport.imageToViewportRectangle(new Xt.a.Rect(t.x,t.y,t.width,t.height)),!0)},findPaperItem:function(t){return j.a.project.getItem({inside:new j.a.Rectangle(t.x,t.y,t.width,t.height),class:"Path"})},keyDown:function(t){switch(t.keyCode){case 39:this.incrementActiveItemBy(1);break;case 37:this.incrementActiveItemBy(-1);break;case 49:t.getModifierState("Meta")||this.markCorrect();break;case 50:t.getModifierState("Meta")||this.flagForReview();break;case 51:t.getModifierState("Meta")||this.markIncorrect();break;case 52:t.getModifierState("Meta")||this.createNewItem();break}},checkToSaveValidation:function(){var t=this.checkIfLabelAdded();if(t&&this.saveClassValidation({validation:t,docName:this.paperItem.data.name}),"basic"===this.validatorRole){var e=this.checkIfBoundingBoxAdjusted();e?this.saveBoundingBox({boundingBox:e,docName:this.paperItem.data.name,timestamp:new Date,uid:this.uid}):this.validateItemsBoundingBox(this.paperItem.data.name)}},checkIfLabelAdded:function(){return!!this.label&&{uid:this.uid,class:this.label,decisionTimeInMs:$t()()-this.validationStartTime,timestamp:new Date}},checkIfBoundingBoxAdjusted:function(){var t={x:this.paperItem.bounds.x,y:this.paperItem.bounds.y,width:this.paperItem.bounds.width,height:this.paperItem.bounds.height};return Oe()(t)!==Oe()(this.initialItemData)&&t}})},Ea=Ma,Ra=(a("4a11"),Object(c["a"])(Ea,Fa,Na,!1,null,"40f86d9f",null)),Za=Ra.exports;d()(Ra,{VBtn:_["a"],VContainer:se["a"],VDivider:Ae["a"],VFlex:Lt["a"],VIcon:N["a"],VLayout:le["a"]});var Ga={components:{"app-validate":Za},computed:Object(k["a"])({},Object(C["d"])({activeStep:function(t){return t.app.activeStep},steps:function(t){return t.app.steps}})),methods:Object(k["a"])({},Object(C["b"])({setActiveStep:"app/setActiveStep",saveProject:"app/saveProject"}),{activateStep:function(t){this.setActiveStep(t),this.saveProject({notification:!1})}})},$a=Ga,za=(a("86f9"),a("7e85")),Ha=a("9c54"),Ka=a("56a4"),Ua=Object(c["a"])($a,Wa,Ba,!1,null,"1a5cb083",null),qa=Ua.exports;d()(Ua,{VDivider:Ae["a"],VStepper:za["a"],VStepperHeader:Ha["a"],VStepperStep:Ka["a"]});var Ja=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2 pointers-please",attrs:{id:"view"}},[a("app-osd-canvas"),a("app-annotation-canvas")],1)},Qa=[],Xa=(a("a481"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"osd-canvas"}})}),Ya=[],ti={mounted:function(){this.setupOsdCanvas("osd-canvas")},methods:Object(k["a"])({},Object(C["b"])({setupOsdCanvas:"image/setupOsdCanvas"}))},ei=ti,ai=(a("dfa3"),Object(c["a"])(ei,Xa,Ya,!1,null,null,null)),ii=ai.exports,ni=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:"annotation-canvas"}})},oi=[],ri={mounted:function(){j.a.setup("annotation-canvas"),document.getElementById("pan").click()}},si=ri,li=(a("89cf"),Object(c["a"])(si,ni,oi,!1,null,null,null)),ci=li.exports,ui={components:{"app-osd-canvas":ii,"app-annotation-canvas":ci},computed:Object(k["a"])({},Object(C["d"])({projectImageName:function(t){return t.image.projectImageName}})),mounted:function(){this.projectImageName?this.loadProject():this.$router.replace("/")},methods:Object(k["a"])({},Object(C["b"])({loadProject:"app/loadProject"}))},di=ui,pi=(a("7751"),Object(c["a"])(di,Ja,Qa,!1,null,"4a6ec4a6",null)),vi=pi.exports,hi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading"].indexOf(t.$route.name)?a("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:"",dark:"",dense:"",app:"","clipped-right":"","clipped-left":""}},[a("div",{attrs:{id:"toolbar-toggle"}},[a("v-toolbar-side-icon",{on:{click:function(e){return t.toggleToolsDrawer()}}})],1),a("v-toolbar-title",{staticClass:"white--text"},[t._v("\n    AIDA\n  ")]),a("v-spacer"),a("app-save"),a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[t._v("\n        apps\n      ")])],1),a("v-btn",{attrs:{icon:"",href:"https://github.com/alanaberdeen/AIDA/wiki"}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1),a("div",[a("v-toolbar-side-icon",{on:{click:function(e){return t.toggleStudioDrawer()}}})],1)],1):t._e()},fi=[],mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{staticClass:"pointers-please",attrs:{"max-width":"900"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("\n        settings\n      ")])],1),a("v-card",[a("v-container",{attrs:{id:"container"}},[a("v-layout",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[a("v-list",{staticClass:"pa-0"},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-icon",[t._v(" settings ")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Settings")])],1)],1)],1)],1),a("v-list",[a("v-divider"),a("v-list-tile",{class:["project"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="project"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Project ")])],1)],1),a("v-list-tile",{class:["annotation"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="annotation"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Upload Annotation ")])],1)],1),a("v-list-tile",{class:["image"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="image"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Add an Image ")])],1)],1),a("v-list-tile",{class:["steps"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="steps"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Steps ")])],1)],1),a("v-list-tile",{class:["tools"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="tools"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Tools ")])],1)],1)],1)],1),a("div",{attrs:{id:"content"}},["project"===t.settings?a("app-project-settings"):t._e(),"annotation"===t.settings?a("app-annotation-settings"):t._e(),"image"===t.settings?a("app-image-settings"):t._e(),"steps"===t.settings?a("app-step-settings"):t._e(),"tools"===t.settings?a("app-tool-settings"):t._e()],1)],1),a("v-divider"),a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")])],1)],1)],1)],1)],1)},gi=[],bi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{value:t.projectName,name:"input-3",label:"Project Name"},on:{change:t.setProjectName},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.setProjectName(e)}}})],1)],1)],1)},yi=[],wi={computed:Object(k["a"])({},Object(C["d"])({projectName:function(t){return t.annotation.project.name}})),methods:Object(k["a"])({},Object(C["b"])({setProjectName:"annotation/setProjectName"}))},ki=wi,Ci=Object(c["a"])(ki,bi,yi,!1,null,null,null),xi=Ci.exports;d()(Ci,{VContainer:se["a"],VFlex:Lt["a"],VLayout:le["a"],VTextField:Nt["a"]});var Oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[t._v("\n\n      Plan to add upload functionality for annotation data.\n\n    ")])],1)],1)},Ii=[],ji={computed:Object(k["a"])({},Object(C["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}}))},Si=ji,Ti=Object(c["a"])(Si,Oi,Ii,!1,null,null,null),_i=Ti.exports;d()(Ti,{VContainer:se["a"],VFlex:Lt["a"],VLayout:le["a"]});var Vi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),a("v-radio-group",{model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}},[a("v-radio",{attrs:{label:"Simple",value:"simple"}}),a("v-radio",{attrs:{label:"DZI",value:"dzi"}})],1),a("v-text-field",{attrs:{rules:t.sourceRules,label:"Source",required:""},model:{value:t.newSource,callback:function(e){t.newSource=e},expression:"newSource"}}),a("v-btn",{attrs:{disabled:!t.valid},on:{click:function(e){return t.loadImages([{name:t.newName,type:t.newType,source:t.newSource}])}}},[t._v("\n          submit\n        ")])],1)],1)],1)],1)},Ai=[],Di={data:function(){return{valid:!1,newName:"",nameRules:[function(t){return!!t||"Name is required"}],newType:"simple",newSource:"",sourceRules:[function(t){return!!t||"Source location is required"}]}},computed:Object(k["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])({getChannels:"images/getChannels"})),methods:Object(k["a"])({},Object(C["b"])({loadImages:"images/loadImages"}),{submit:function(){this.$refs.form.validate()&&console.log("good to go")}})},Pi=Di,Li=a("4bd4"),Wi=a("67b6"),Bi=a("43a6"),Fi=Object(c["a"])(Pi,Vi,Ai,!1,null,null,null),Ni=Fi.exports;d()(Fi,{VBtn:_["a"],VContainer:se["a"],VFlex:Lt["a"],VForm:Li["a"],VLayout:le["a"],VRadio:Wi["a"],VRadioGroup:Bi["a"],VTextField:Nt["a"]});var Mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Tools\n")])},Ei=[],Ri={props:{editor:{type:Object,default:function(){return{}}}}},Zi=Ri,Gi=Object(c["a"])(Zi,Mi,Ei,!1,null,null,null),$i=Gi.exports,zi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Steps\n")])},Hi=[],Ki={props:{editor:{type:Object,default:function(){return{}}},step:{type:Number,default:1}},data:function(){return{title:""}}},Ui=Ki,qi=(a("dc2a"),Object(c["a"])(Ui,zi,Hi,!1,null,"4e5a9117",null)),Ji=qi.exports,Qi={components:{"app-project-settings":xi,"app-annotation-settings":_i,"app-image-settings":Ni,"app-step-settings":Ji,"app-tool-settings":$i},data:function(){return{dialog:!1,settings:"project"}}},Xi=Qi,Yi=(a("0eab"),a("c954")),tn=Object(c["a"])(Xi,mi,gi,!1,null,"347b9618",null),en=tn.exports;d()(tn,{VBtn:_["a"],VCard:Pt["a"],VContainer:se["a"],VDialog:ba["a"],VDivider:Ae["a"],VIcon:N["a"],VLayout:le["a"],VList:Wt["a"],VListTile:V["a"],VListTileAction:ce["a"],VListTileAvatar:Yi["a"],VListTileContent:ue["a"],VListTileTitle:ue["b"],VNavigationDrawer:De["a"],VToolbar:Ze["a"]});var an=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{id:"save-button",icon:""},nativeOn:{click:function(e){return t.save()}}},[t.savingInProgress?a("v-progress-circular",{attrs:{indeterminate:"",color:"white",size:20}}):a("v-icon",[t._v("\n    save\n  ")])],1)},nn=[],on={data:function(){return{savingInProgress:!1}},mounted:function(){window.addEventListener("keydown",this.keyDown)},methods:Object(k["a"])({},Object(C["b"])({dispatchSave:"backend/saveAnnotation"}),{save:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.savingInProgress=!0,t.next=3,this.dispatchSave();case 3:this.savingInProgress=!1;case 4:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),keyDown:function(t){"s"!==t.key||!0!==t.metaKey&&!0!==t.ctrlKey||(t.preventDefault(),document.getElementById("save-button").click())}})},rn=on,sn=a("490a"),ln=Object(c["a"])(rn,an,nn,!1,null,null,null),cn=ln.exports;d()(ln,{VBtn:_["a"],VIcon:N["a"],VProgressCircular:sn["a"]});var un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.exportData(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n    fa-download\n  ")])],1)},dn=[],pn={computed:Object(k["a"])({},Object(C["d"])({dataToExport:function(t){return t.annotation.project}})),methods:Object(k["a"])({},Object(C["b"])({refreshAnnotationState:"annotation/refreshAnnotationState"}),{exportData:function(){this.refreshAnnotationState();var t="data:text/json;charset=utf-8,"+encodeURIComponent(Oe()(this.dataToExport,null,2)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","AIDA_annotation.json"),document.body.appendChild(e),e.click(),e.remove()}})},vn=pn,hn=Object(c["a"])(vn,un,dn,!1,null,null,null),fn=hn.exports;d()(hn,{VBtn:_["a"],VIcon:N["a"]});var mn={components:{"app-settings":en,"app-save":cn,"app-export":fn},methods:Object(k["a"])({},Object(C["b"])({toggleToolsDrawer:"app/toggleToolsDrawer",toggleStudioDrawer:"app/toggleStudioDrawer"}))},gn=mn,bn=(a("32e4"),a("706c")),yn=Object(c["a"])(gn,hi,fi,!1,null,"4f76ba3a",null),wn=yn.exports;d()(yn,{VBtn:_["a"],VIcon:N["a"],VSpacer:Xe["a"],VToolbar:Ze["a"],VToolbarSideIcon:bn["a"],VToolbarTitle:Ge["a"]});var kn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-snackbar",{attrs:{value:t.active,color:t.color,timeout:0,top:""}},[t._v("\n  "+t._s(t.text)+"\n")])},Cn=[],xn={computed:Object(k["a"])({},Object(C["d"])({active:function(t){return t.app.snackbar.active},text:function(t){return t.app.snackbar.text},color:function(t){return t.app.snackbar.color},timeout:function(t){return t.app.snackbar.timeout}})),methods:Object(k["a"])({},Object(C["b"])({dismissSnackbar:"app/dismissSnackbar"})),watch:{active:function(t){var e=this;t&&this.timeout>0&&setTimeout(function(){e.dismissSnackbar()},this.timeout)}}},On=xn,In=a("2db4"),jn=Object(c["a"])(On,kn,Cn,!1,null,null,null),Sn=jn.exports;d()(jn,{VSnackbar:In["a"]});var Tn={components:{"app-tools":Le,"app-studio":La,"app-stepper":qa,"app-view":vi,"app-toolbar":wn,"app-snackbar":Sn}},_n=Tn,Vn=(a("7f95"),Object(c["a"])(_n,g,b,!1,null,"f3e000ee",null)),An=Vn.exports,Dn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:"",dark:"",dense:"",app:""}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("\n      AIDA\n    ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[t._v("\n        apps\n      ")])],1),a("v-btn",{attrs:{icon:"",href:"https://github.com/alanaberdeen/AIDA/wiki"}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1)],1),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("h4",{staticClass:"title mb-3"},[t._v(" Images ")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.availableImages,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{on:{mouseover:function(a){t.hoverImage=e.item},mouseout:function(e){t.hoverImage=null}}},[a("td",[t._v(t._s(e.item))]),a("td",[a("v-btn",{staticClass:"text-xs-right",attrs:{flat:"",icon:"",small:"",to:"/loading/"+e.item}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.hoverImage===e.item,expression:"hoverImage === props.item"}],attrs:{slot:"activator",small:"",color:"#0D47A1"},slot:"activator"},[t._v("launch")]),a("span",[t._v(" View in AIDA ")])],1)],1)],1)])]}}])})],1)],1)],1)],1)},Pn=[],Ln={components:{Toolbar:wn},data:function(){return{headers:[{text:"Name",align:"left",value:"name"},{text:"",sortable:!1}],hoverImage:null}},mounted:function(){this.getArrayOfImages()},computed:Object(C["d"])({availableImages:function(t){return t.backend.availableImages}}),methods:Object(k["a"])({},Object(C["b"])({getArrayOfImages:"backend/getArrayOfImages"}))},Wn=Ln,Bn=a("8fea"),Fn=Object(c["a"])(Wn,Dn,Pn,!1,null,null,null),Nn=Fn.exports;d()(Fn,{VBtn:_["a"],VContainer:se["a"],VDataTable:Bn["a"],VFlex:Lt["a"],VIcon:N["a"],VLayout:le["a"],VSpacer:Xe["a"],VToolbar:Ze["a"],VToolbarTitle:Ge["a"],VTooltip:A["a"]});var Mn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs10:"",sm6:"",md4:""}},[a("div",[a("p",{staticClass:"display-3 faded-title-text mb-0"},[t._v(" AIDA ")]),a("p",{staticClass:"headline faded-title-text pt-0"},[t._v(" Annotate Image Data by Assignment ")]),a("v-progress-linear",{attrs:{indeterminate:!0}})],1)])],1)],1)],1)],1)},En=[],Rn={props:{fileName:{type:String,default:null}},methods:Object(k["a"])({},Object(C["b"])({setProjectImageName:"image/setProjectImageName",setProjectFileName:"backend/setProjectFileName"})),computed:Object(C["d"])({projectImageName:function(t){return t.image.projectImageName}}),mounted:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.setProjectImageName(this.$route.params.fileName.replace(/\.[^\/.]+$/,""));case 3:return t.next=5,this.setProjectFileName(this.$route.params.fileName);case 5:this.$router.replace("/"+this.projectImageName),t.next=12;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log("could not load the data into AIDA"),console.log(t.t0);case 12:case"end":return t.stop()}},t,this,[[0,8]])}));function e(){return t.apply(this,arguments)}return e}()},Zn=Rn,Gn=(a("8ab2"),a("8e36")),$n=Object(c["a"])(Zn,Mn,En,!1,null,"af952a96",null),zn=$n.exports;d()($n,{VContainer:se["a"],VContent:v["a"],VFlex:Lt["a"],VLayout:le["a"],VProgressLinear:Gn["a"]}),i["a"].use(m["a"]);var Hn=new m["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Dashboard",component:Nn},{path:"/:image",name:"editor",component:An},{path:"/loading/:fileName",name:"loading",component:zn}]}),Kn={getArrayOfImages:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){var a,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.prev=1,t.next=4,me.a.post(location.origin+"/checkForImages");case 4:return i=location.origin+"/data/images.json",t.next=7,me.a.get(i);case 7:n=t.sent,a("setAvailableImages",n.data),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[1,11]])}));function e(e){return t.apply(this,arguments)}return e}(),saveAnnotation:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){var a,i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,i=e.rootState,t.prev=1,t.next=4,a("annotation/refreshAnnotationState",null,{root:!0});case 4:return n=location.origin+"/save",t.next=7,me.a.post(n,{projectImageName:i.image.projectImageName,annotationData:i.annotation.project});case 7:a("app/activateSnackbar",{text:"Saved annotation data",color:"success"},{root:!0}),t.next=14;break;case 10:t.prev=10,t.t0=t["catch"](1),console.log(t.t0),a("app/activateSnackbar",{text:"Annotation data could not be saved",color:"error"},{root:!0});case 14:case"end":return t.stop()}},t,this,[[1,10]])}));function e(e){return t.apply(this,arguments)}return e}(),getAnnotation:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){var a,i,n,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,i=e.rootState,n=location.origin+"/annotations/"+i.image.projectImageName+".json",t.prev=2,t.next=5,me.a.get(n);case 5:o=t.sent,a("annotation/loadAnnotation",o.data,{root:!0}),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("Annotation data either could not be found or could not be loaded");case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e){return t.apply(this,arguments)}return e}(),setProjectFileName:function(t,e){var a=t.commit;a("setProjectFileName",e)},getProjectImage:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){var a,i;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.state,i=e.dispatch,t.next=3,i("image/clearImages",null,{root:!0});case 3:a.projectFileName.indexOf(".dzi")>-1?i("image/addOSDImage",{name:a.projectFileName,fileType:"dzi",source:location.origin+"/images/"+a.projectFileName,function:"project",opacity:1},{root:!0}):i("image/addOSDImage",{name:a.projectFileName,fileType:"simple",source:location.origin+"/images/"+a.projectFileName,function:"project",opacity:1},{root:!0});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},Un={setAvailableImages:function(t,e){t.availableImages=e},setProjectFileName:function(t,e){t.projectFileName=e}},qn={availableImages:[],projectFileName:""},Jn={namespaced:!0,state:qn,actions:Kn,mutations:Un},Qn={setAppTask:function(t,e){var a=t.commit;a("setAppTask",e)},dismissSnackbar:function(t){var e=t.commit;e("dismissSnackbar")},activateSnackbar:function(t,e){var a=t.commit;a("activateSnackbar",e)},synchroniseAnnotationAndOSDCanvas:function(t){var e=t.commit,a=t.rootState;e("synchroniseAnnotationAndOSDCanvas",a.image.OSDviewer)},setActiveStepAndLayer:function(t,e){var a=t.dispatch;a("setActiveLayer",e),a("setActiveStep",e)},setActiveStep:function(t,e){var a=t.commit,i=t.dispatch;"number"===typeof e.specificLayer&&i("annotation/setActiveLayer",e.specificLayer,{root:!0}),a("setActiveStep",e.id-1)},setActiveLayer:function(t,e){var a=t.commit;a("setActiveLayer",e)},toggleSettings:function(t){var e=t.commit;e("toggleSettings")},setActiveValidationIndex:function(t,e){var a=t.commit;a("setActiveValidationIndex",e)},setupForValidation:function(t){var e=t.commit;e("setupForValidation")},loadProject:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,t.next=3,a("synchroniseAnnotationAndOSDCanvas");case 3:a("backend/getAnnotation",null,{root:!0}),a("backend/getProjectImage",null,{root:!0});case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),toggleToolsDrawer:function(t){var e=t.commit;e("toggleToolsDrawer")},setToolsDrawerState:function(t,e){var a=t.commit;a("setToolsDrawerState",e)},toggleStudioDrawer:function(t){var e=t.commit;e("toggleStudioDrawer")},setStudioDrawerState:function(t,e){var a=t.commit;a("setStudioDrawerState",e)},createNewItem:function(t,e){var a=t.state,i=t.rootState,n=t.commit;e["studyName"]=a.studyName,e["imageName"]=i.image.projectImageName,n("createNewItem",e)}},Xn={setAppTask:function(t,e){t.task=e},activateSnackbar:function(t,e){t.snackbar.active=!0,t.snackbar.text=e.text?e.text:"notification",t.snackbar.color=e.color?e.color:"info",t.snackbar.timeout=e.timeout?e.timeout:4e3},dismissSnackbar:function(t){t.snackbar.active=!1},synchroniseAnnotationAndOSDCanvas:function(t,e){var a=t.strokeScale;e.addHandler("update-viewport",function(t){var i=e.viewport.getZoom(!0),n=e.world.getItemAt(0);j.a.view.zoom=n.viewportToImageZoom(i);var o=n.viewportToImageCoordinates(e.viewport.getCenter(!0));j.a.view.center=new j.a.Point(o.x,o.y),j.a.project.getItems({class:j.a.Path}).map(function(t){t.strokeWidth=n.getContentSize().x*a/(1e3*i)})}),e.addHandler("resize",function(t){var a=e.world.getItemAt(0);j.a.view.viewSize.width=t.newContainerSize.x,j.a.view.viewSize.height=t.newContainerSize.y;var i=a.viewportToImageCoordinates(e.viewport.getCenter(!0));j.a.view.center=new j.a.Point(i.x,i.y)})},setActiveStep:function(t,e){t.activeStep=e},setActiveLayer:function(t,e){t.activeLayer=e},toggleSettings:function(t){t.settingsFlag=!t.settingsFlag},setActiveValidationIndex:function(t,e){t.activeValidationIndex=e},setSteps:function(t){t.toolsDrawer=!1,t.studioDrawer=!1,"review"===t.task?t.steps=[{id:1,instruction:"Review the data",type:"review"}]:"validate"===t.task?t.steps=[{id:1,instruction:"Cycle through each of the predicted Megakaryocyte classifications and verify whether the prediction is correct or incorrect. In cases where you are not certain, flag the prediction for review.",type:"validate"}]:(t.toolsDrawer=!0,t.studioDrawer=!0,t.steps=null)},toggleToolsDrawer:function(t){t.toolsDrawer=!t.toolsDrawer},toggleStudioDrawer:function(t){t.studioDrawer=!t.studioDrawer},setToolsDrawerState:function(t,e){t.toolsDrawer=e},setStudioDrawerState:function(t,e){t.studioDrawer=e}},Yn={getStepTools:function(t){return t.steps&&t.steps[t.activeStep].tools?t.steps[t.activeStep].tools:["pan","circle","rectangle","path","pencil","polygon","paint","paste","move","node","count","delete","megas","filter"]}},to={task:"",toolsDrawer:!0,studioDrawer:!0,snackbar:{active:!1,text:"this is a notification",color:"info",timeout:4e3},type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null,settingsFlag:!1,activeValidationIndex:0,strokeScale:5},eo={namespaced:!0,state:to,actions:Qn,mutations:Xn,getters:Yn},ao={getMaxZoom:function(t){return t.OSDviewer?Math.round(t.OSDviewer.viewport.getMaxZoom()):10},getZoom:function(t){if(t.OSDviewer){var e=t.OSDviewer.viewport.getZoom();return e<100?Math.round(10*e)/10:Math.round(e)}return"na"},getImageWidth:function(t){if(t.OSDviewer)return t.OSDviewer.world.getItemCount()>0?t.OSDviewer.world.getItemAt(0).getContentSize.x:0},getChannels:function(t){var e=t.images.filter(function(t){return"overlay"!==t.function});return t.OSDviewer&&t.OSDviewer.world.getItemCount()>0&&e.length>0?e.map(function(e){var a=t.OSDviewer.world.getItemAt(e.index);if(a)return{channel:a,id:e.index,opacity:a.getOpacity(),name:e.name,visible:a.getOpacity()>0,opacityCache:0}}):[]}},io={addOSDImage:function(t,e){var a=t.commit;a("addOSDImage",e)},clearImages:function(t){var e=t.commit;e("clearImages")},setProjectImageName:function(t,e){var a=t.commit;a("setProjectImageName",e)},setupOsdCanvas:function(t,e){var a=t.commit;a("setupOsdCanvas",e)},resetImageState:function(t){var e=t.commit,a=t.rootState;e("resetImageState",a)},setActiveChannel:function(t,e){var a=t.commit;a("setActiveChannel",e)},toggleChannelOpacity:function(t,e){var a=t.commit;a("toggleChannelOpacity",e)},setActiveChannelOpacity:function(t,e){var a=t.commit;a("setActiveChannelOpacity",e)},setActiveChannelName:function(t,e){var a=t.commit;a("setActiveChannelName",e)},setZoom:function(t,e){var a=t.commit;a("setZoom",e)}},no=(a("20d6"),{setProjectImageName:function(t,e){t.projectImageName=e},resetImageState:function(t){t.OSDviewer.navigator.destroy(),t.OSDviewer.destroy(),t={OSDviewer:null,OSDworld:null,activeChannel:0,view:{viewSize:[null,null],imageSize:[null,null],imageCenter:[null,null],imageZoom:null},image:"",imageAccessToken:""}},setupOsdCanvas:function(t,e){t.OSDviewer=new Xt.a.Viewer({id:e,showNavigationControl:!1,showNavigator:!0,navigatorId:"navigator",maxZoomPixelRatio:2}),t.OSDviewer.addHandler("canvas-key",function(t){"KeyR"!==t.originalEvent.code&&"KeyF"!==t.originalEvent.code||(t.preventDefaultAction=!0)})},setActiveChannel:function(t,e){"number"===typeof e?t.activeChannelIndex=e:"string"===typeof e&&(t.activeChannelIndex=t.images.findIndex(function(t){return t.name===e}))},toggleChannelOpacity:function(t,e){e.opacity>0?e.channel.setOpacity(0):e.channel.setOpacity(.7)},setActiveChannelOpacity:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value/100:e/100,a=Math.min(Math.max(a,0),1);var i=t.OSDviewer.world.getItemAt(t.activeChannelIndex);i&&i.setOpacity(a)},setActiveChannelName:function(t,e){e instanceof KeyboardEvent?i["a"].set(t.images[t.activeChannelIndex],"name",e.target.value):i["a"].set(t.images[t.activeChannelIndex],"name",e)},setZoom:function(t,e){var a;a=e instanceof KeyboardEvent?Number(e.target.value):Number(e),a>0&&t.OSDviewer.viewport.zoomTo(a)},addOSDImage:function(t,e){"dzi"===e.fileType?t.OSDviewer.addTiledImage({tileSource:e.source,opacity:e.opacity}):"simple"===e.fileType&&t.OSDviewer.addSimpleImage({url:e.source,opacity:e.opacity}),t.images.push(Object(k["a"])({},e,{index:t.OSDviewer.world.getItemCount()}))},clearImages:function(t){t.images=[]}}),oo={OSDviewer:null,OSDworld:null,activeChannelIndex:0,projectImageName:"",images:[]},ro={namespaced:!0,state:oo,getters:ao,actions:io,mutations:no},so=a("5d73"),lo=a.n(so),co={defaultColors:function(){return[{fill:{hue:170,saturation:.44,lightness:.69,alpha:.7},stroke:{hue:170,saturation:.44,lightness:.69,alpha:1}},{fill:{hue:60,saturation:1,lightness:.85,alpha:.7},stroke:{hue:60,saturation:1,lightness:.85,alpha:1}},{fill:{hue:248,saturation:.3,lightness:.79,alpha:.7},stroke:{hue:248,saturation:.3,lightness:.79,alpha:1}},{fill:{hue:6,saturation:.94,lightness:.72,alpha:.7},stroke:{hue:6,saturation:.94,lightness:.72,alpha:1}},{fill:{hue:205,saturation:.49,lightness:.66,alpha:.7},stroke:{hue:205,saturation:.49,lightness:.66,alpha:1}},{fill:{hue:32,saturation:.97,lightness:.69,alpha:.7},stroke:{hue:32,saturation:.97,lightness:.69,alpha:1}},{fill:{hue:82,saturation:.64,lightness:.64,alpha:.7},stroke:{hue:82,saturation:.64,lightness:.64,alpha:1}},{fill:{hue:329,saturation:.89,lightness:.9,alpha:.7},stroke:{hue:329,saturation:.89,lightness:.9,alpha:1}},{fill:{hue:0,saturation:0,lightness:.85,alpha:.7},stroke:{hue:0,saturation:0,lightness:.85,alpha:1}},{fill:{hue:299,saturation:.32,lightness:.62,alpha:.7},stroke:{hue:299,saturation:.32,lightness:.62,alpha:1}}]},drawItem:function(t){var e;if(t)if("circle"===t.type)e=new j.a.Path.Circle({center:t.center,radius:t.radius,data:{type:"circle",countable:!0,class:t.class,data:t.data},locked:t.locked}),this.drawItemColor(e,t);else if("rectangle"===t.type)e=new j.a.Path.Rectangle({point:[t.x,t.y],size:[t.width,t.height],data:{type:"rectangle",class:t.class,data:t.data},locked:t.locked}),this.drawItemColor(e,t);else if("path"===t.type)e=new j.a.Path({segments:t.segments,closed:!!t.closed&&t.closed,data:{type:"path",class:t.class,data:t.data},locked:t.locked}),this.drawItemColor(e,t);else if("raster"===t.type){var a=t.hasOwnProperty("position")?new j.a.Point(t.position.x,t.position.y):new j.a.Point(0,0);e=new j.a.Raster({crossOrigin:"anonymous",source:t.source,position:a,data:{type:"raster",countable:!1,class:t.class,data:t.data},locked:t.locked})}},getSegments:function(t){for(var e=[],a=0,i=t.segments.length;a<i;a++){var n=t.segments[a];n.hasHandles()?e.push({point:{x:n.point.x,y:n.point.y},handleIn:{x:n.handleIn.x,y:n.handleIn.y},handleOut:{x:n.handleOut.x,y:n.handleOut.y}}):e.push({point:{x:n.point.x,y:n.point.y}})}return e},getColor:function(t){return{fill:t.fillColor?{hue:t.fillColor.hue,saturation:t.fillColor.saturation,lightness:t.fillColor.lightness,alpha:t.fillColor.alpha}:null,stroke:t.strokeColor?{hue:t.strokeColor.hue,saturation:t.strokeColor.saturation,lightness:t.strokeColor.lightness,alpha:t.strokeColor.alpha}:null}},drawItemColor:function(t,e){var a=this.defaultColors();t.closed&&e.color&&e.color.fill&&("string"===typeof e.color.fill?(t.fillColor=e.color.fill,t.fillColor.alpha=.2):t.fillColor=new j.a.Color({hue:e.color.fill.hue,saturation:e.color.fill.saturation,lightness:e.color.fill.lightness,alpha:e.color.fill.alpha})),e.color&&e.color.stroke?"string"===typeof e.color.stroke?t.strokeColor=e.color.stroke:t.strokeColor=new j.a.Color({hue:e.color.stroke.hue,saturation:e.color.stroke.saturation,lightness:e.color.stroke.lightness,alpha:e.color.stroke.alpha}):t.strokeColor=a[t.layer.index%a.length].stroke}},uo={loadAnnotation:function(){var t=Object(Ue["a"])(regeneratorRuntime.mark(function t(e,a){var i,n,o,r,s,l,c,u,d,p,v,h,f,m;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=e.dispatch,n=e.commit,n("resetProjectState"),o=!0,r=!1,s=void 0,t.prev=5,l=lo()(a.layers);case 7:if(o=(c=l.next()).done){t.next=52;break}return u=c.value,t.next=11,i("createLayer");case 11:return t.next=13,i("setActiveLayerName",u.name);case 13:return t.next=15,i("setActiveLayerType",u.type);case 15:d=!0,p=!1,v=void 0,t.prev=18,h=lo()(u.items);case 20:if(d=(f=h.next()).done){t.next=34;break}if(m=f.value,"overlay"!==m.type){t.next=30;break}return t.next=25,i("image/addOSDImage",{function:"overlay",fileType:m.fileType,source:m.source,name:u.name,opacity:u.opacity},{root:!0});case 25:return t.next=27,i("image/setActiveChannel",u.name,{root:!0});case 27:n("addItemToActiveLayer",m),t.next=31;break;case 30:co.drawItem(m);case 31:d=!0,t.next=20;break;case 34:t.next=40;break;case 36:t.prev=36,t.t0=t["catch"](18),p=!0,v=t.t0;case 40:t.prev=40,t.prev=41,d||null==h.return||h.return();case 43:if(t.prev=43,!p){t.next=46;break}throw v;case 46:return t.finish(43);case 47:return t.finish(40);case 48:i("setActiveLayerOpacity",100*u.opacity);case 49:o=!0,t.next=7;break;case 52:t.next=58;break;case 54:t.prev=54,t.t1=t["catch"](5),r=!0,s=t.t1;case 58:t.prev=58,t.prev=59,o||null==l.return||l.return();case 61:if(t.prev=61,!r){t.next=64;break}throw s;case 64:return t.finish(61);case 65:return t.finish(58);case 66:a.activeLayer&&i("setActiveLayer",a.activeLayer);case 67:case"end":return t.stop()}},t,this,[[5,54,58,66],[18,36,40,48],[41,,43,47],[59,,61,65]])}));function e(e,a){return t.apply(this,arguments)}return e}(),resetAnnotationState:function(t){var e=t.commit;e("resetAnnotationState")},refreshAnnotationState:function(t,e){var a=t.commit;a("refreshAnnotationState",e)},prepareCanvas:function(t){var e=t.commit,a=t.rootState;e("prepareCanvas",a.app.activeLayer)},createLayer:function(t){var e=t.commit;e("createLayer")},setActiveLayer:function(t,e){var a=t.state,i=t.dispatch;if(j.a.project.layers[e].activate(),i("app/setActiveLayer",e,{root:!0}),"overlay"===a.project.layers[e].type){var n=a.project.layers[e].name;i("image/setActiveChannel",n,{root:!0})}},setActiveLayerOpacity:function(t,e){var a=t.state,i=t.dispatch,n=t.commit;n("setActiveLayerOpacity",e);var o=j.a.project.activeLayer.index;"overlay"===a.project.layers[o].type&&i("image/setActiveChannelOpacity",e,{root:!0})},setActiveLayerName:function(t,e){var a=t.commit;a("setActiveLayerName",e)},setActiveLayerType:function(t,e){var a=t.commit;a("setActiveLayerType",e)},deleteActiveLayer:function(t){var e=t.commit;e("deleteActiveLayer")},setProjectName:function(t,e){var a=t.commit;a("setProjectName",e)},setSelectedItems:function(t,e){var a=t.commit;a("setSelectedItems",e)},drawBoundingBoxes:function(t,e){var a=t.commit;a("drawBoundingBoxes",e)}},po={resetProjectState:function(t){i["a"].set(t,"project",{name:"An AIDA project",layers:[]})},addItemToActiveLayer:function(t,e){var a=t.project.layers[j.a.project.activeLayer.index];a.items.push(e)},refreshAnnotationState:function(t){j.a.project.layers.forEach(function(e){var a=t.project.layers[e.index];i["a"].set(t.project.layers,e.index,{name:a.name,opacity:e.opacity,type:a.type,items:a.items.filter(function(t){return"overlay"===t.type})})});var e=j.a.project.getItems({className:function(t){return"Path"===t||"Raster"===t}}),a=!0,n=!1,o=void 0;try{for(var r,s=lo()(e);!(a=(r=s.next()).done);a=!0){var l=r.value;if("circle"===l.data.type)t.project.layers[l.layer.index].items.push({class:l.data.class,type:"circle",color:co.getColor(l),center:{x:l.position.x,y:l.position.y},radius:l.bounds.width/2,locked:l.locked,data:l.data.data});else if("rectangle"===l.data.type)t.project.layers[l.layer.index].items.push(Object(k["a"])({},l.data,{color:co.getColor(l),x:l.bounds.x,y:l.bounds.y,width:l.bounds.width,height:l.bounds.height,locked:l.locked}));else if("path"===l.data.type)t.project.layers[l.layer.index].items.push({class:l.data.class,type:"path",color:co.getColor(l),segments:co.getSegments(l),closed:l.closed,locked:l.locked,data:l.data.data});else if("raster"===l.data.type){var c=l.layer.getItems({match:function(t){return t.locked},overlapping:l.bounds});c.unshift(l);var u=new j.a.Group(c);u.sendToBack();var d=u.rasterize(l.resolution.height,!1),p=d.toDataURL();t.project.layers[l.layer.index].items.push({class:l.data.class,type:"raster",source:p,position:{x:l.position.x,y:l.position.y},data:l.data.data})}}}catch(v){n=!0,o=v}finally{try{a||null==s.return||s.return()}finally{if(n)throw o}}t.projectStateRefreshIndex=t.projectStateRefreshIndex+1},prepareCanvas:function(t,e){j.a.view.element.classList.contains("pointers-no")&&j.a.view.element.classList.remove("pointers-no"),e&&j.a.project.layers[e].activate()},createLayer:function(t){var e=new j.a.Layer;t.project.layers.push({name:"Layer "+(t.project.layers.length+1),opacity:e.opacity,items:[]})},setActiveLayerOpacity:function(t,e){var a=e instanceof KeyboardEvent?e.target.value/100:e/100;a=Math.min(Math.max(a,0),1),j.a.project.activeLayer.opacity=a,i["a"].set(t.project.layers[j.a.project.activeLayer.index],"opacity",a)},setActiveLayerName:function(t,e){var a=e instanceof KeyboardEvent?e.target.value:e;j.a.project.activeLayer.name=a,i["a"].set(t.project.layers[j.a.project.activeLayer.index],"name",a)},setActiveLayerType:function(t,e){i["a"].set(t.project.layers[j.a.project.activeLayer.index],"type",e)},deleteActiveLayer:function(t){t.project.layers.splice(j.a.project.activeLayer.index,1),j.a.project.activeLayer.remove()},setProjectName:function(t,e){e instanceof KeyboardEvent?t.project.name=e.target.value:t.project.name=e},setSelectedItems:function(t,e){t.selectedItems=e},drawBoundingBoxes:function(t,e){var a=new j.a.Layer({name:"Validate"});a.opacity=1,e.forEach(function(e){var a=new j.a.Path.Rectangle({point:[e.boundingBox.x,e.boundingBox.y],size:[e.boundingBox.width,e.boundingBox.height],data:{name:e.name,type:"rectangle",predictionClass:e.class.predictionClass,predictionScore:e.class.predictionScore,validationClass:e.class.validationClass,validationScore:e.class.validationScore}});a.strokeColor=t.defaultColors[a.layer.index%t.defaultColors.length].stroke})}},vo={getColor:function(t,e,a){var i=a.app.activeLayer;return t.defaultColors[i%t.defaultColors.length]},getItemsForValidation:function(t){var e=t.project.layers.filter(function(t){return"Validate"===t.name});return e.length>0?e[0].items:[]}},ho={project:{name:"An AIDA project",layers:[]},projectStateRefreshIndex:0,selectedItems:[],currentColor:null,defaultColors:co.defaultColors()},fo={namespaced:!0,state:ho,getters:vo,actions:uo,mutations:po};i["a"].use(C["a"]);var mo=new C["a"].Store({modules:{backend:Jn,app:eo,image:ro,annotation:fo}});a("585e");i["a"].config.productionTip=!1,new i["a"]({router:Hn,store:mo,render:function(t){return t(f)}}).$mount("#app")},"585e":function(t,e,a){},5930:function(t,e,a){"use strict";var i=a("2b0a"),n=a.n(i);n.a},"5ac3":function(t,e,a){},"6b5f":function(t,e,a){},"6bba":function(t,e,a){},"76dc":function(t,e,a){},7751:function(t,e,a){"use strict";var i=a("30cc"),n=a.n(i);n.a},"79de":function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("af50"),n=a.n(i);n.a},"7f95":function(t,e,a){"use strict";var i=a("a032"),n=a.n(i);n.a},"816d":function(t,e,a){},8381:function(t,e,a){},"86f9":function(t,e,a){"use strict";var i=a("816d"),n=a.n(i);n.a},"882c":function(t,e,a){"use strict";var i=a("d7e8"),n=a.n(i);n.a},"89cf":function(t,e,a){"use strict";var i=a("79de"),n=a.n(i);n.a},"8ab2":function(t,e,a){"use strict";var i=a("05da"),n=a.n(i);n.a},"8b38":function(t,e,a){"use strict";var i=a("6b5f"),n=a.n(i);n.a},"8cc7":function(t,e,a){},"9a0c":function(t,e,a){},"9d7a":function(t,e,a){"use strict";var i=a("46c1"),n=a.n(i);n.a},"9fee":function(t,e,a){"use strict";var i=a("5432"),n=a.n(i);n.a},a032:function(t,e,a){},a45a:function(t,e,a){"use strict";var i=a("ab99"),n=a.n(i);n.a},a630:function(t,e,a){},ab99:function(t,e,a){},af50:function(t,e,a){},b8f3:function(t,e,a){},ba0b:function(t,e,a){"use strict";var i=a("a630"),n=a.n(i);n.a},cda9:function(t,e,a){"use strict";var i=a("b8f3"),n=a.n(i);n.a},cf97:function(t,e,a){},cfca:function(t,e,a){},d7e8:function(t,e,a){},dc2a:function(t,e,a){"use strict";var i=a("2d34"),n=a.n(i);n.a},dfa3:function(t,e,a){"use strict";var i=a("9a0c"),n=a.n(i);n.a},dfca:function(t,e,a){"use strict";var i=a("2571"),n=a.n(i);n.a},eb43:function(t,e,a){},ec8b:function(t,e,a){},f147:function(t,e,a){},f7b0:function(t,e,a){"use strict";var i=a("2eb7"),n=a.n(i);n.a},faf1:function(t,e,a){"use strict";var i=a("76dc"),n=a.n(i);n.a},fcd1:function(t,e,a){},fd70:function(t,e,a){}});
//# sourceMappingURL=app.e2fb2c8c.js.map