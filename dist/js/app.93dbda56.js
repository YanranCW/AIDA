(function(t){function e(e){for(var i,r,s=e[0],l=e[1],c=e[2],d=0,p=[];d<s.length;d++)r=s[d],o[r]&&p.push(o[r][0]),o[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);u&&u(e);while(p.length)p.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],i=!0,s=1;s<a.length;s++){var l=a[s];0!==o[l]&&(i=!1)}i&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},o={app:0},n=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var c=0;c<s.length;c++)e(s[c]);var u=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0109":function(t,e,a){"use strict";var i=a("ec8b"),o=a.n(i);o.a},"0443":function(t,e,a){"use strict";var i=a("44de"),o=a.n(i);o.a},"0586":function(t,e,a){},"0601":function(t,e,a){"use strict";var i=a("a84a"),o=a.n(i);o.a},"073b":function(t,e,a){"use strict";var i=a("f147"),o=a.n(i);o.a},"0815":function(t,e,a){},"0a64":function(t,e,a){"use strict";var i=a("fd70"),o=a.n(i);o.a},"0e86":function(t,e,a){"use strict";var i=a("0815"),o=a.n(i);o.a},"0eab":function(t,e,a){"use strict";var i=a("6bba"),o=a.n(i);o.a},1:function(t,e){},"1ce3":function(t,e,a){"use strict";var i=a("cf97"),o=a.n(i);o.a},"1d03":function(t,e,a){"use strict";var i=a("b517"),o=a.n(i);o.a},"1f95":function(t,e,a){"use strict";var i=a("8cc7"),o=a.n(i);o.a},2:function(t,e){},"20d1":function(t,e,a){"use strict";var i=a("568f"),o=a.n(i);o.a},2571:function(t,e,a){},"2d34":function(t,e,a){},"2e19":function(t,e,a){"use strict";var i=a("b294"),o=a.n(i);o.a},"2eb7":function(t,e,a){},"2fd4":function(t,e,a){"use strict";var i=a("5ac3"),o=a.n(i);o.a},"303f":function(t,e,a){"use strict";var i=a("643a"),o=a.n(i);o.a},"31c3":function(t,e,a){},"36a9":function(t,e,a){"use strict";var i=a("8381"),o=a.n(i);o.a},"39dd":function(t,e,a){"use strict";var i=a("0586"),o=a.n(i);o.a},"42a0":function(t,e,a){"use strict";var i=a("31c3"),o=a.n(i);o.a},"438d":function(t,e,a){"use strict";var i=a("cfca"),o=a.n(i);o.a},"44de":function(t,e,a){},"4de2":function(t,e,a){"use strict";var i=a("5beb"),o=a.n(i);o.a},"568f":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("097d");var i=a("2b0e"),o=a("bb71");a("da64");i["a"].use(o["a"],{iconfont:"md"});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-content",[a("router-view")],1)],1)},r=[],s={name:"App"},l=s,c=a("2877"),u=a("6544"),d=a.n(u),p=a("7496"),v=a("549c"),h=Object(c["a"])(l,n,r,!1,null,null,null);h.options.__file="App.vue";var m=h.exports;d()(h,{VApp:p["a"],VContent:v["a"]});var f=a("8c4f"),g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("app-toolbar"),a("app-tools"),a("app-studio"),a("div",{attrs:{id:"stepper-item"}},[a("app-stepper")],1),a("div",{attrs:{id:"view-item"}},[a("app-view")],1)],1)},b=[],y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading"].indexOf(t.$route.name)?a("v-navigation-drawer",{attrs:{id:"tools-drawer",fixed:"",clipped:"",value:this.toolsDrawer,"mini-variant":"","mini-variant-width":"60",app:"","mobile-break-point":"800"},on:{input:t.updateToolsDrawerState}},[a("v-list",{staticClass:"pointers-please",attrs:{id:"toolList",dense:""}},[t.getStepTools().includes("pan")?a("app-pan",{attrs:{active:"pan"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pan"}}}):t._e(),a("v-divider"),t.getStepTools().includes("move")?a("app-move",{attrs:{active:"move"===t.activeTool},nativeOn:{click:function(e){t.activeTool="move"}}}):t._e(),t.getStepTools().includes("node")?a("app-node",{attrs:{active:"node"===t.activeTool},nativeOn:{click:function(e){t.activeTool="node"}}}):t._e(),a("v-divider"),t.getStepTools().includes("circle")?a("app-circle",{attrs:{active:"circle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="circle"}}}):t._e(),t.getStepTools().includes("rectangle")?a("app-rectangle",{attrs:{active:"rectangle"===t.activeTool},nativeOn:{click:function(e){t.activeTool="rectangle"}}}):t._e(),t.getStepTools().includes("path")?a("app-path",{attrs:{active:"path"===t.activeTool},nativeOn:{click:function(e){t.activeTool="path"}}}):t._e(),t.getStepTools().includes("pencil")?a("app-pencil",{attrs:{active:"pencil"===t.activeTool},nativeOn:{click:function(e){t.activeTool="pencil"}}}):t._e(),t.getStepTools().includes("polygon")?a("app-polygon",{attrs:{active:"polygon"===t.activeTool},nativeOn:{click:function(e){t.activeTool="polygon"}}}):t._e(),t.getStepTools().includes("paint")?a("app-paint",{attrs:{active:"paint"===t.activeTool},nativeOn:{click:function(e){t.activeTool="paint"}}}):t._e(),t.getStepTools().includes("grid")?a("app-grid",{attrs:{active:"grid"===t.activeTool},nativeOn:{click:function(e){t.activeTool="grid"}}}):t._e(),a("v-divider"),t.getStepTools().includes("delete")?a("app-delete",{attrs:{active:"delete"===t.activeTool},nativeOn:{click:function(e){t.activeTool="delete"}}}):t._e(),a("v-divider"),t.getStepTools().includes("faces")?a("app-faces",{attrs:{active:"faces"===t.activeTool},nativeOn:{click:function(e){t.activeTool="faces"}}}):t._e(),t.getStepTools().includes("megas")?a("app-megas",{attrs:{active:"megas"===t.activeTool},nativeOn:{click:function(e){t.activeTool="megas"}}}):t._e(),t.getStepTools().includes("filter")?a("app-filter",{attrs:{active:"filter"===t.activeTool},nativeOn:{click:function(e){t.activeTool="filter"}}}):t._e()],1)],1):t._e()},w=[],k=a("cebc"),C=a("2f62"),O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"circle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-circle":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Circle Tool [c] ")])],1)],1)},x=[],I=(a("6c7b"),a("2222")),_=a.n(I),j={props:{active:{type:Boolean,default:!1}},data:function(){return{toolCircle:null,strokeWidth:2,radius:2e3}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.app.activeStep},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.toolCircle.minDistance=4*t.strokeWidth},a=function(e){t.toolCircle.minDistance=0,t.radius=t.calculateDistance(e.downPoint,e.point);var a=new _.a.Path.Line(e.downPoint,e.point);a.strokeColor=new _.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.add(e.point),a.removeOn({drag:!0,down:!0,up:!0});var i=new _.a.Path.Circle(e.downPoint,t.radius);i.strokeColor=new _.a.Color("#2661D8"),i.strokeColor.alpha=.7,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0})},i=function(e){var a=new _.a.Path.Circle(e.downPoint,t.radius);a.strokeColor=new _.a.Color(t.getColor().stroke),a.strokeWidth=t.strokeWidth,a.fillColor=new _.a.Color(t.getColor().fill),a.data.countable=!0,a.data.type="circle",a.data.class=""};this.toolCircle=new _.a.Tool,this.toolCircle.onMouseDown=e,this.toolCircle.onMouseDrag=a,this.toolCircle.onMouseUp=i},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolCircle.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,o=e.x,n=e.y,r=Math.sqrt(Math.pow(o-a,2)+Math.pow(n-i,2));return r}})},S=j,T=(a("2fd4"),a("8336")),V=a("ba95"),D=a("3a2f"),A=Object(c["a"])(S,O,x,!1,null,"63ba4c88",null);A.options.__file="Circle.vue";var L=A.exports;d()(A,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"rectangle",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        crop_landscape\n      ")])],1),a("span",[t._v(" Rectangel Tool [r] ")])],1)],1)},N=[],W={props:{active:{type:Boolean,default:!1}},data:function(){return{toolRect:null,strokeWidth:2}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){var a=new _.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new _.a.Color("#2661D8"),a.strokeColor.alpha=.7,a.strokeWidth=t.strokeWidth,a.removeOn({drag:!0,up:!0})},a=function(e){var a=new _.a.Path.Rectangle(e.downPoint,e.point);a.strokeColor=new _.a.Color(t.getColor().stroke),a.strokeWidth=t.strokeWidth,a.data.type="rectangle",a.data.class=""};this.toolRect=new _.a.Tool,this.toolRect.onMouseDrag=e,this.toolRect.onMouseUp=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolRect.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom)}})},E=W,M=(a("f7b0"),a("132d")),F=Object(c["a"])(E,P,N,!1,null,null,null);F.options.__file="Rectangle.vue";var B=F.exports;d()(F,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"path",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        timeline\n      ")])],1),a("span",[t._v(" Path Tool [p] ")])],1)],1)},G=[],R={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPen:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path");var a=t.path.hitTest(e.point,t.hitOptions);e.modifiers.option?(t.path.closed=!0,t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new _.a.Color(t.getColor().fill),t.path.smooth(),t.path.selected=!1,t.path.data.active=!1):a&&a.segment===t.path.lastSegment?(t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.path.smooth())},a=function(e){var a=_.a.project.hitTest(e.point,t.hitOptions);a?a.segment===a.item.firstSegment?(t.path.closed=!0,t.path.selected=!1):a.segment!==a.item.firstSegment&&a.segment!==a.item.lastSegment||(t.path.selected=!1):t.path&&t.path.data.active&&(t.path.selected=!0,t.path.closed=!1)};this.toolPen=new _.a.Tool,this.toolPen.onMouseDown=e,this.toolPen.onMouseMove=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPen.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new _.a.Path;return t.strokeColor=new _.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},$=R,z=(a("438d"),Object(c["a"])($,Z,G,!1,null,null,null));z.options.__file="Path.vue";var H=z.exports;d()(z,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var K=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pencil",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-pencil-alt":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Pencil Tool [m] ")])],1)],1)},U=[],q={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPencil:null,strokeWidth:2,hitOptions:null,path:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active||(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path")},a=function(e){t.path.add(e.point);var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment?(t.path.closed=!0,t.path.fillColor=new _.a.Color(t.getColor().fill)):(t.path.closed=!1,t.path.fillColor&&(t.path.fillColor.alpha=0))},i=function(e){var a=t.path.hitTest(e.point,t.hitOptions);a&&a.segment===t.path.firstSegment&&(t.path.closed=!0,t.path.fillColor=new _.a.Color(t.getColor().fill)),t.path.selected=!1,t.path.simplify(),t.path.data.active=!1};this.toolPencil=new _.a.Tool,this.toolPencil.onMouseDown=e,this.toolPencil.onMouseDrag=a,this.toolPencil.onMouseUp=i},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPencil.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:this.strokeWidth},this.toolPencil.minDistance=this.strokeWidth},newPath:function(){var t=new _.a.Path;return t.strokeColor=new _.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},J=q,Q=(a("7db0"),Object(c["a"])(J,K,U,!1,null,null,null));Q.options.__file="Pencil.vue";var X=Q.exports;d()(Q,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"move",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-mouse-pointer":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Move Tool [v]")])],1)],1)},tt=[],et=(a("7f7f"),a("ac6a"),a("f3e2"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolMove:null,hitOptions:null,strokeWidth:2,selectionGroup:null,toolMode:""}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=function(a){e=_.a.project.hitTest(a.point,t.hitOptions),t.selectionGroup.bounds.selected=!1,e?"bounds"===e.type?t.toolMode="transform":a.modifiers.shift?e.item.selected=!0:e.item.selected?t.toolMode="move":(_.a.project.deselectAll(),e.item.selected=!0,t.toolMode="move"):(_.a.project.deselectAll(),t.toolMode="select")},i=function(a){if("select"===t.toolMode){var i=new _.a.Shape.Rectangle(a.downPoint,a.point);i.strokeColor="#4D88D4",i.fillColor="#A3C5E8",i.opacity=.3,i.strokeWidth=t.strokeWidth,i.removeOn({drag:!0,down:!0,up:!0}),_.a.project.deselectAll(),_.a.project.getItems({class:"Path",inside:i.bounds,match:t.matchFilter}).forEach(function(t){t.selected=!0})}else if("move"===t.toolMode)t.selectionGroup.children.length>0?t.selectionGroup.position=t.selectionGroup.position.add(a.delta):e.item.position=e.item.position.add(a.delta);else if("transform"===t.toolMode){var o=null,n=null,r=null;e&&"top-left"===e.name?(o=a.point.x-t.selectionGroup.bounds.topRight.x,n=a.point.y-t.selectionGroup.bounds.bottomLeft.y,r=t.selectionGroup.bounds.bottomRight):e&&"top-right"===e.name?(o=a.point.x-t.selectionGroup.bounds.topLeft.x,n=a.point.y-t.selectionGroup.bounds.bottomRight.y,r=t.selectionGroup.bounds.bottomLeft):e&&"bottom-right"===e.name?(o=a.point.x-t.selectionGroup.bounds.bottomLeft.x,n=a.point.y-t.selectionGroup.bounds.topRight.y,r=t.selectionGroup.bounds.topLeft):e&&"bottom-left"===e.name&&(o=a.point.x-t.selectionGroup.bounds.bottomRight.x,n=a.point.y-t.selectionGroup.bounds.topLeft.y,r=t.selectionGroup.bounds.topRight);var s=Math.abs(o/t.selectionGroup.bounds.width),l=Math.abs(n/t.selectionGroup.bounds.height);t.selectionGroup.scale(s,l,r)}},o=function(e){t.selectionGroup=new _.a.Group(_.a.project.selectedItems),t.selectionGroup.isEmpty()||(t.selectionGroup.bounds.selected=!0),t.setSelectedItems(_.a.project.selectedItems)},n=function(e){if(t.selectionGroup&&t.selectionGroup.hitTest(e.point,t.hitOptions)){var a=t.selectionGroup.hitTest(e.point,t.hitOptions);"bottom-right"===a.name||"top-left"===a.name?_.a.view.element.style.cursor="nwse-resize":"bottom-left"===a.name||"top-right"===a.name?_.a.view.element.style.cursor="nesw-resize":"fill"===a.type&&(_.a.view.element.style.cursor="move")}else{var i=document.getElementById("annotation-canvas");i.style.cursor="auto"}},r=function(e){t.active&&("backspace"!==e.key&&"delete"!==e.key||_.a.project.selectedItems&&(t.selectionGroup.bounds.selected=!1,_.a.project.selectedItems.forEach(function(t){"Layer"!==t.className&&t.remove()})))};this.toolMove=new _.a.Tool,this.toolMove.onMouseDown=a,this.toolMove.onMouseDrag=i,this.toolMove.onMouseMove=n,this.toolMove.onKeyUp=r,this.toolMove.onMouseUp=o},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas",setSelectedItems:"annotation/setSelectedItems"}),{initialiseTool:function(){this.prepareCanvas(),this.toolMove.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.hitOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter},this.selectionGroup=new _.a.Group(_.a.project.selectedItems)},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})}),at=et,it=(a("36a9"),Object(c["a"])(at,Y,tt,!1,null,null,null));it.options.__file="Move.vue";var ot=it.exports;d()(it,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"pan",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[t.active?a("v-icon",{staticClass:"blue--text text--darken-1"},[t._v("\n        lock_open\n      ")]):a("v-icon",{staticClass:"grey--text text--darken-2"},[t._v("\n        lock_outline\n      ")])],1),a("span",[t._v(" Lock View Tool [space] ")])],1)],1)},rt=[],st={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPan:null}},methods:{initialiseTool:function(){document.getElementById("annotation-canvas").setAttribute("class","pointers-no"),document.getElementById("osd-canvas").style.cursor="grab"}}},lt=st,ct=(a("dfca"),Object(c["a"])(lt,nt,rt,!1,null,null,null));ct.options.__file="Pan.vue";var ut=ct.exports;d()(ct,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"node",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-location-arrow":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Node Tool [a] ")])],1)],1)},pt=[],vt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolNode:null,hitOptions:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=null,i=function(i){e=_.a.project.hitTest(i.point,t.hitOptions),e?e.item.selected?"stroke"===e.type?a="adding-node":"segment"===e.type?(_.a.project.deselectAll(),e.item.selected=!0,e.segment.selected=!0,e.segment.handleIn.selected=!0,e.segment.handleOut.selected=!0,a="adjusting-segment"):"handle-out"!==e.type&&"handle-in"!==e.type||(a="adjusting-handle"):(_.a.project.deselectAll(),e.item.selected=!0,a="selecting"):_.a.project.deselectAll()},o=function(t){e&&"adjusting-segment"===a?e.segment.point=e.segment.point.add(t.delta):e&&"handle-out"===e.type&&"adjusting-handle"===a?e.segment.handleOut=e.segment.handleOut.add(t.delta):e&&"handle-in"===e.type&&"adjusting-handle"===a&&(e.segment.handleIn=e.segment.handleIn.add(t.delta))};this.toolNode=new _.a.Tool,this.toolNode.onMouseDown=i,this.toolNode.onMouseDrag=o},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolNode.activate();var t=this.imageWidth/(300*this.viewportZoom);this.hitOptions={segments:!0,stroke:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},ht=vt,mt=(a("1f95"),Object(c["a"])(ht,dt,pt,!1,null,null,null));mt.options.__file="Node.vue";var ft=mt.exports;d()(mt,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-delete"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        delete\n      ")])],1),a("span",[t._v(" Delete Tool ")])],1)],1)},bt=[],yt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolDelete:null,selectOptions:null,strokeWidth:2}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),created:function(){var t=this,e=null,a=[],i=null,o=function(o){if(e=_.a.project.hitTest(o.point,t.selectOptions),a=!e||"fill"!==e.type&&"stroke"!==e.type&&"segment"!==e.type&&"bounds"!==e.type?[]:[e.item],_.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var n in a)if(a[n].data.selectWith)for(var r in a[n].data.selectWith)a.push(a[n].data.selectWith[r]);i=new _.a.Group(a),i.selected=!0}},n=function(e){var o=new _.a.Shape.Rectangle(e.downPoint,e.point);if(o.strokeColor="#4D88D4",o.fillColor="#A3C5E8",o.opacity=.3,o.strokeWidth=t.strokeWidth,o.removeOn({drag:!0,down:!0,up:!0}),a=_.a.project.getItems({class:"Path",inside:o.bounds,match:t.matchFilter}),_.a.project.deselectAll(),i&&(i.selected=!1,i.bounds.selected=!1,i=null),a.length>0){for(var n in a)if(a[n].data.selectWith)for(var r in a[n].data.selectWith)a.push(a[n].data.selectWith[r]);i=new _.a.Group(a),i.selected=!0}},r=function(t){i&&i.remove()};this.toolDelete=new _.a.Tool,this.toolDelete.onMouseDown=o,this.toolDelete.onMouseDrag=n,this.toolDelete.onMouseUp=r},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.toolDelete.activate(),this.strokeWidth=this.imageWidth/(500*this.viewportZoom);var t=3*this.strokeWidth;this.selectOptions={segments:!0,stroke:!0,bounds:!0,handles:!0,fill:!0,tolerance:t,match:this.matchFilter}},matchFilter:function(t){return(!t.item||"guide"!==t.item.layer.name)&&(!t.layer||"guide"!==t.layer.name)}})},wt=yt,kt=(a("39dd"),Object(c["a"])(wt,gt,bt,!1,null,null,null));kt.options.__file="Delete.vue";var Ct=kt.exports;d()(kt,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var Ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-paint-brush":!0,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Paint Tool ")])],1)],1)},xt=[],It={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPaint:null,strokeWidth:2,radius:2e3,brush:null,overlap:null,path:null,combinedPath:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},activeStep:function(t){return t.app.activeStep}})),created:function(){var t=this,e=function(e){t.brush=new _.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:new _.a.Color({hue:220,saturation:.7,lightness:.5,alpha:1})}),t.brush.removeOn({move:!0,drag:!0})},a=function(e){t.path=new _.a.Path.Circle({radius:t.radius,position:e.point,strokeWidth:t.strokeWidth,strokeColor:t.getColor().stroke,fillColor:t.getColor().fill}).removeOn({drag:!0,up:!0,move:!0});var a=_.a.project.getItem({class:"Path",match:function(t){if("megakaryocyte"!==t.data.class)return!0},overlapping:t.path.bounds});console.log(a),a&&(e.modifiers.alt?t.combinedPath=a.subtract(t.path):t.combinedPath=a.unite(t.path),a.remove())},i=function(e){"up"===e.key?t.radius++:"down"===e.key&&t.radius--,console.log(e)};this.toolPaint=new _.a.Tool,this.toolPaint.onMouseMove=e,this.toolPaint.onMouseDrag=a,this.toolPaint.onKeyDown=i},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPaint.activate(),this.radius=this.imageWidth/(100*this.viewportZoom),this.strokeWidth=this.imageWidth/(500*this.viewportZoom)},calculateDistance:function(t,e){var a=t.x,i=t.y,o=e.x,n=e.y,r=Math.sqrt(Math.pow(o-a,2)+Math.pow(n-i,2));return r}})},_t=It,jt=(a("d886"),Object(c["a"])(_t,Ot,xt,!1,null,"6a3a29bc",null));jt.options.__file="Paint.vue";var St=jt.exports;d()(jt,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var Tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        grid_on\n      ")])],1),a("v-card",[a("v-list",[a("v-list-tile",[a("v-flex",{attrs:{xs5:"","justify-space-around":""}},[a("div",{attrs:{id:"switch"}},[a("v-switch",{attrs:{"input-value":t.visible},on:{change:t.toggleLayerVisibility}})],1)]),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Visibility\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridWidth,suffix:"px","single-line":""},on:{change:t.setGridWidth},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setGridWidth(e):null}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Width\n          ")])],1),a("v-list-tile",[a("v-flex",{attrs:{xs5:""}},[a("v-text-field",{attrs:{value:t.gridHeight,suffix:"px","single-line":""},on:{change:t.setGridHeight},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setGridHeight(e):null}}})],1),a("v-flex",{attrs:{xs6:"","offset-xs1":""}},[t._v("\n            Height\n          ")])],1)],1)],1)],1)],1)},Vt=[],Dt=(a("c5f6"),{props:{active:{type:Boolean,default:!1}},data:function(){return{toolGrid:null,strokeWidth:2,gridLayer:!1,gridWidth:0,gridHeight:0,menu:!1,visible:!0}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},imageHeight:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().y},strokeScale:function(t){return t.app.strokeScale}})),created:function(){this.toolGrid=new _.a.Tool},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),{initialiseTool:function(){this.prepareCanvas(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.gridLayer||this.createGrid(),this.toolGrid.activate()},createGrid:function(){this.gridLayer=new _.a.Layer({name:"guide"}),this.gridWidth=this.imageWidth/10,this.gridHeight=this.imageHeight/10,this.redrawGrid()},redrawGrid:function(){this.gridLayer.activate(),this.gridLayer.removeChildren();for(var t=Math.ceil(this.imageHeight/this.gridHeight),e=Math.ceil(this.imageWidth/this.gridWidth),a=0;a<t;a++)for(var i=0;i<e;i++){var o=new _.a.Path.Rectangle({from:[this.gridWidth*i,this.gridHeight*a],to:[this.gridWidth*i+this.gridWidth,this.gridHeight*a+this.gridHeight],strokeColor:"grey",strokeWidth:this.strokeWidth});o.strokeColor.alpha=.7}},toggleLayerVisibility:function(){this.visible=!this.visible,this.gridLayer.visible=!this.gridLayer.visible},setGridWidth:function(t){var e=this.gridWidth;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridWidth=Number(e),this.redrawGrid()},setGridHeight:function(t){var e=this.gridHeight;"string"===typeof t||"number"===typeof t?e=t:t instanceof KeyboardEvent&&(e=t.target.value),this.gridHeight=Number(e),this.redrawGrid()}})}),At=Dt,Lt=(a("20d1"),a("b0af")),Pt=a("0e8f"),Nt=a("8860"),Wt=a("e449"),Et=a("b73d"),Mt=a("2677"),Ft=Object(c["a"])(At,Tt,Vt,!1,null,null,null);Ft.options.__file="Grid.vue";var Bt=Ft.exports;d()(Ft,{VBtn:T["a"],VCard:Lt["a"],VFlex:Pt["a"],VIcon:M["a"],VList:Nt["a"],VListTile:V["a"],VMenu:Wt["a"],VSwitch:Et["a"],VTextField:Mt["a"]});var Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"polygon",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        polymer\n      ")])],1),a("span",[t._v(" Polygon Tool ")])],1)],1)},Gt=[],Rt=a("0a0d"),$t=a.n(Rt),zt={props:{active:{type:Boolean,default:!1}},data:function(){return{toolPolygon:null,strokeWidth:2,hitOptions:null,path:null,clickTime:null}},computed:Object(k["a"])({},Object(C["d"])({viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},strokeScale:function(t){return t.app.strokeScale}})),created:function(){var t=this,e=function(e){t.path&&t.path.data.active?t.clickTime&&$t()()-t.clickTime<200?(t.path.fillColor=new _.a.Color(t.getColor().fill),t.path.selected=!1,t.path.data.active=!1):(t.path.add(e.point),t.clickTime=$t()()):(t.path=t.newPath(),t.path.data.active=!0,t.path.data.class="",t.path.data.type="path",t.path.closed=!0,t.path.add(e.point))},a=function(e){"escape"===e.key&&(t.path.fillColor=new _.a.Color(t.getColor().fill),t.path.selected=!1,t.path.data.active=!1)};this.toolPolygon=new _.a.Tool,this.toolPolygon.onMouseDown=e,this.toolPolygon.onKeyDown=a},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){this.prepareCanvas(),this.toolPolygon.activate(),this.strokeWidth=this.imageWidth*this.strokeScale/(1e3*this.viewportZoom),this.hitOptions={segments:!0,tolerance:5*this.strokeWidth}},newPath:function(){var t=new _.a.Path;return t.strokeColor=new _.a.Color(this.getColor().stroke),t.strokeWidth=this.strokeWidth,t.selected=!0,t}})},Ht=zt,Kt=(a("8b38"),Object(c["a"])(Ht,Zt,Gt,!1,null,null,null));Kt.options.__file="Polygon.vue";var Ut=Kt.exports;d()(Kt,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-menu",{attrs:{id:"menu","close-on-content-click":!1,"nudge-width":150,"nudge-right":10,transition:"slide-x-transition","offset-x":""},model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[a("v-btn",{attrs:{slot:"activator",id:"filter",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-filter":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("v-card",[a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{label:"Create class filter group",box:""},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.createFilterGroup(e):null}}})],1)],1),a("v-list",t._l(t.listOfFilters,function(e,i){return a("v-list-tile",{key:e.class,attrs:{avatar:""}},[a("v-list-tile-content",[a("v-list-tile-title",{domProps:{innerHTML:t._s(e.class)}})],1),a("v-list-tile-action",[a("v-btn",{attrs:{flat:"",icon:"",color:"pink"},on:{click:function(e){t.popFilter(i)}}},[a("v-icon",[t._v("close")])],1)],1)],1)}),1)],1)],1)],1)],1)},Jt=[],Qt=(a("d25f"),a("6762"),a("2fdb"),a("6d67"),{props:{active:{type:Boolean,default:!1}},data:function(){return{menu:!1,loading:!1,toggle_multiple:[0,1,2],predictions:{correct:[],flagged:[],incorrect:[],alan:{correct:[],flagged:[],incorrect:[]},gabi:{correct:[],flagged:[],incorrect:[]},gareth:{correct:[],flagged:[],incorrect:[]}},correctPredictions:[],flaggedPredictions:[],incorrectPredictions:[],visiblePredictions:{alan:[0,1,2],gareth:[0,1,2],gabi:[0,1,2]},listOfFilters:[]}},watch:{visiblePrediction:function(t){},listOfFilters:function(t){t.map(function(t){var e=_.a.project.getItems({data:{class:t.class}});e.map(function(t){return t.remove()})})},toggle_multiple:function(t){this.toggle_multiple.includes(0)?(_.a.project.activeLayer.addChildren(this.correctPredictions),this.correctPredictions=[]):(this.correctPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.correctPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(1)?(_.a.project.activeLayer.addChildren(this.flaggedPredictions),this.flaggedPredictions=[]):(this.flaggedPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.flaggedPredictions.map(function(t){return t.remove()})),this.toggle_multiple.includes(2)?(_.a.project.activeLayer.addChildren(this.incorrectPredictions),this.incorrectPredictions=[]):(this.incorrectPredictions=this.predictions.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.incorrectPredictions.map(function(t){return t.remove()}))}},methods:{initialiseTool:function(){var t=_.a.project.getItems({data:{class:"megakaryocyte"}});this.predictions.correct=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"correct"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.flagged=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"flag"===t.data.data.validations[t.data.data.validations.length-1].decision}),this.predictions.incorrect=t.filter(function(t){return"data"in t.data&&"validations"in t.data.data&&"incorrect"===t.data.data.validations[t.data.data.validations.length-1].decision})},createFilterGroup:function(t){this.listOfFilters.push({class:t.target.value,active:!1})},popFilter:function(t){this.listOfFilters.splice(t,1)}}}),Xt=Qt,Yt=(a("0a64"),a("a523")),te=a("a722"),ee=a("40fe"),ae=a("5d23"),ie=Object(c["a"])(Xt,qt,Jt,!1,null,"50445868",null);ie.options.__file="Filter.vue";var oe=ie.exports;d()(ie,{VBtn:T["a"],VCard:Lt["a"],VContainer:Yt["a"],VFlex:Pt["a"],VIcon:M["a"],VLayout:te["a"],VList:Nt["a"],VListTile:V["a"],VListTileAction:ee["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VMenu:Wt["a"],VTextField:Mt["a"]});var ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.activate(e)}},slot:"activator"},[a("i",{class:{fa:!0,"fa-user-tag":!t.loading,"fa-spinner":t.loading,"fa-pulse":t.loading,faIcons:!t.active,faIconsActive:t.active}})]),a("span",[t._v(" Faces Tool ")])],1)],1)},re=[],se=a("62c3"),le=a.n(se),ce={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1}},computed:Object(k["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x}})),methods:Object(k["a"])({},Object(C["c"])({getColor:"annotation/getColor"}),{activate:function(){var t=this;this.strokeWidth=this.imageWidth/(500*this.viewportZoom),this.loading=!0,le.a.post("https://vision.googleapis.com/v1/images:annotate?key=AIzaSyAeCFXV_oK3QjGQdypK_2hVTH_ck2mshFw",{requests:[{image:{source:{imageUri:this.imageUri}},features:{type:"FACE_DETECTION"},imageContext:{}}]}).then(function(e){t.loading=!1,console.log(e);var a=e.data.responses[0].faceAnnotations;for(var i in a){var o=[];for(var n in a[i].boundingPoly.vertices)o.push(new _.a.Point(a[i].boundingPoly.vertices[n].x,a[i].boundingPoly.vertices[n].y));var r=new _.a.Path(o);r.strokeColor=new _.a.Color(t.getColor()),r.closed=!0,r.strokeWidth=t.strokeWidth,r.data.type="rectangle",r.data.class="face"}}).catch(function(e){t.loading=!1,console.log("could not apply face detection, returned the following error: \n \n"+e)})},drawBoundingFaces:function(t){}})},ue=ce,de=(a("a45a"),Object(c["a"])(ue,ne,re,!1,null,"fd4de720",null));de.options.__file="Faces.vue";var pe=de.exports;d()(de,{VBtn:T["a"],VListTile:V["a"],VTooltip:D["a"]});var ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-list-tile",{attrs:{id:"tool-tile"}},[a("v-tooltip",{attrs:{id:"tooltip",right:"","open-delay":"700"}},[a("v-btn",{attrs:{slot:"activator",id:"tool",flat:"",block:""},nativeOn:{click:function(e){return t.initialiseTool(e)}},slot:"activator"},[a("v-icon",{class:{"grey--text text--darken-2":!t.active,"blue--text text--darken-1":t.active}},[t._v("\n        youtube_searched_for\n      ")])],1),a("span",[t._v(" Megakaryocyte Classifier ")])],1)],1)},he=[],me=a("f499"),fe=a.n(me),ge=a("aa78"),be=a.n(ge),ye={props:{active:{type:Boolean,default:!1}},data:function(){return{strokeWidth:400,loading:!1,trackingRect:null}},computed:Object(k["a"])({},Object(C["d"])({imageUri:function(t){return t.image.images[t.image.activeChannel].source},viewportZoom:function(t){return t.image.OSDviewer.viewport.getZoom(!0)},imageWidth:function(t){return t.image.OSDviewer.world.getItemAt(0).getContentSize().x},tileSource:function(t){return t.image.OSDviewer.world.getItemAt(0).source},viewport:function(t){return t.image.OSDviewer.viewport},tiledImage:function(t){return t.image.OSDviewer.world.getItemAt(0)}})),created:function(){this.toolMega=new _.a.Tool},methods:Object(k["a"])({},Object(C["b"])({prepareCanvas:"annotation/prepareCanvas"}),Object(C["c"])({getColor:"annotation/getColor"}),{initialiseTool:function(){var t=this;this.prepareCanvas(),this.toolMega.activate(),this.strokeWidth=this.imageWidth/(300*this.viewportZoom),le.a.get("https://aida-private.firebaseio.com/megas.json ").then(function(e){var a=e.data;console.log(a),a.map(t.drawMega)}).then()},overlapsImage:function(t){return!(t.topLeft.x>this.tiledImage.getBounds().width||t.bottomRight.x<0)&&!(t.topLeft.y>this.tiledImage.getBounds().height||t.bottomRight.y<0)},saveToJSON:function(t,e){var a="data:text/json;charset=utf-8,"+encodeURIComponent(fe()(t,null,2)),i=document.createElement("a");i.setAttribute("href",a),i.setAttribute("download",e),document.body.appendChild(i),i.click(),i.remove()},drawMega:function(t){var e=new _.a.Path.Rectangle({from:new _.a.Point(t.x_min,t.y_min),to:new _.a.Point(t.x_max,t.y_max),data:{type:"rectangle",class:t.class,data:{score:t.score,validations:[]}}});e.strokeColor=new _.a.Color(this.getColor().stroke),e.strokeWidth=this.strokeWidth}})},we=ye,ke=(a("0e86"),Object(c["a"])(we,ve,he,!1,null,"c8715034",null));ke.options.__file="Megakaryocytes.vue";var Ce=ke.exports;d()(ke,{VBtn:T["a"],VIcon:M["a"],VListTile:V["a"],VTooltip:D["a"]});var Oe={components:{"app-circle":L,"app-rectangle":B,"app-path":H,"app-move":ot,"app-pan":ut,"app-node":ft,"app-pencil":X,"app-delete":Ct,"app-faces":pe,"app-megas":Ce,"app-paint":St,"app-grid":Bt,"app-filter":oe,"app-polygon":Ut},data:function(){return{activeTool:"pan"}},mounted:function(){window.addEventListener("keydown",this.keyDown)},computed:Object(k["a"])({},Object(C["d"])({toolsDrawer:function(t){return t.app.toolsDrawer},activeStep:function(t){return t.app.activeStep},tools:function(t){return t.app.tools}})),methods:Object(k["a"])({},Object(C["c"])({getStepTools:"app/getStepTools"}),Object(C["b"])({setToolsDrawerState:"app/setToolsDrawerState"}),{updateToolsDrawerState:function(t){t||this.setToolsDrawerState(t)},keyDown:function(t){switch(t.keyCode){case 32:document.getElementById("pan").click();break;case 86:document.getElementById("move").click();break;case 65:document.getElementById("node").click();break;case 67:document.getElementById("circle").click();break;case 82:document.getElementById("rectangle").click();break;case 80:document.getElementById("path").click();break;case 77:document.getElementById("pencil").click();break}}})},xe=Oe,Ie=(a("9865"),a("ce7e")),_e=a("f774"),je=Object(c["a"])(xe,y,w,!1,null,"9d74211c",null);je.options.__file="Tools.vue";var Se=je.exports;d()(je,{VDivider:Ie["a"],VList:Nt["a"],VNavigationDrawer:_e["a"]});var Te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading","landing","examples"].indexOf(t.$route.name)?a("v-navigation-drawer",{attrs:{id:"studio-drawer",fixed:"",clipped:"",value:this.studioDrawer,app:"",right:"","mobile-break-point":"1000"},on:{input:t.updateStudioDrawerState}},[a("div",{staticClass:"pointers-please studioPanel elevation-2"},[a("app-navigator"),a("app-layers"),a("app-images"),a("app-properties")],1)]):t._e()},Ve=[],De=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Navigator\n      ")])],1),a("div",{attrs:{id:"nav-container"}},[a("div",{attrs:{id:"navigator"}})]),a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:"","justify-space-between":""}},[a("v-flex",{attrs:{xs8:""}},[a("v-slider",{attrs:{value:t.getZoom,max:t.getMaxZoom,min:"0",step:"0"},on:{input:t.setZoom}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:t.getZoom,suffix:"x","single-line":""},on:{change:t.setZoom},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setZoom(e):null}}})],1)],1)],1)],1)],1)},Ae=[],Le={computed:Object(k["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])("image",["getZoom","getMaxZoom"])),methods:Object(k["a"])({},Object(C["b"])({setZoom:"image/setZoom"}))},Pe=Le,Ne=(a("303f"),a("ba0d")),We=a("71d9"),Ee=a("2a7f"),Me=Object(c["a"])(Pe,De,Ae,!1,null,"077a2f80",null);Me.options.__file="Navigator.vue";var Fe=Me.exports;d()(Me,{VCard:Lt["a"],VFlex:Pt["a"],VLayout:te["a"],VSlider:Ne["a"],VTextField:Mt["a"],VToolbar:We["a"],VToolbarTitle:Ee["a"]});var Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Layers\n      ")]),a("v-spacer"),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.newLayer(e)}}},[a("v-icon",{attrs:{id:"iconButton"}},[t._v("\n          add\n        ")])],1)],1),a("v-list",{attrs:{id:"list"}},t._l(t.layers,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.selectLayer(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{class:[t.activeLayer===i?"faIconsActive":"faIcons"]},[t._v("\n              "+t._s(e.name?e.name:"Layer "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" visibility ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{value:null!=e.opacity?100*e.opacity:100,max:"100"},on:{input:t.setLayerOpacity}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setLayerOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerOpacity(e):null}}})],1)],1)],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Layer "+i,"single-line":""},on:{change:t.setLayerName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setLayerName(e):null}}})],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:function(e){t.deleteActiveLayer().then(function(){t.setActiveLayer(0)})}}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}),1)],1)],1)},Ze=[],Ge={computed:Object(k["a"])({},Object(C["d"])({layers:function(t){return t.annotation.project.layers},activeLayer:function(t){return t.app.activeLayer},steps:function(t){return t.app.steps},activeStep:function(t){return t.app.activeStep}})),methods:Object(k["a"])({},Object(C["b"])("annotation",["setLayerOpacity","newLayer","exportLayerJSON","setActiveLayer","setLayerOpacity","setLayerName","deleteActiveLayer"]),Object(C["b"])("editor",["setActiveStep"]),Object(C["b"])("common",["saveProject"]),{selectLayer:function(t){var e=this;this.steps.map(function(a){a.specificLayer===t&&e.setActiveStep(a)}),this.setActiveLayer(t),this.saveProject({notification:!1})}})},Re=Ge,$e=(a("4de2"),a("56b0")),ze=a("9910"),He=a("71a3"),Ke=a("c671"),Ue=a("fe57"),qe=a("aac8"),Je=Object(c["a"])(Re,Be,Ze,!1,null,"fa53a222",null);Je.options.__file="Layers.vue";var Qe=Je.exports;d()(Je,{VBtn:T["a"],VCard:Lt["a"],VFlex:Pt["a"],VIcon:M["a"],VLayout:te["a"],VList:Nt["a"],VListGroup:$e["a"],VListTile:V["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VSlider:Ne["a"],VSpacer:ze["a"],VTab:He["a"],VTabItem:Ke["a"],VTabs:Ue["a"],VTabsItems:qe["a"],VTextField:Mt["a"],VToolbar:We["a"],VToolbarTitle:Ee["a"]});var Xe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Channels\n      ")])],1),a("v-list",{attrs:{id:"list"}},t._l(t.getChannels,function(e,i){return a("v-list-group",{key:i,attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},nativeOn:{click:function(e){t.setActiveChannel(i)}},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n              "+t._s(e.name?e.name:"Channel "+i)+"\n            ")])],1)],1),a("div",{attrs:{id:"controls"}},[a("v-tabs",{attrs:{left:"",color:"transparent"}},[a("v-tab",[a("v-icon",[t._v(" visibility ")])],1),a("v-tab",[a("v-icon",[t._v(" text_format ")])],1),a("v-tab",[a("v-icon",[t._v(" delete ")])],1),a("v-tabs-items",{attrs:{id:"tab-items"}},[a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs9:""}},[a("v-slider",{attrs:{step:"0",max:"1"},on:{input:t.setChannelOpacity},model:{value:e.opacity,callback:function(a){t.$set(e,"opacity",a)},expression:"channel.opacity"}})],1),a("v-flex",{attrs:{xs3:""}},[a("v-text-field",{attrs:{value:null!==e.opacity?Math.round(100*e.opacity):100,suffix:"%","single-line":"",mask:"###"},on:{change:t.setChannelOpacity},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelOpacity(e):null}}})],1)],1)],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-text-field",{attrs:{value:e.name?e.name:"Channel "+i,"single-line":""},on:{change:t.setChannelName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setChannelName(e):null}}})],1)]),a("v-tab-item",[a("div",{attrs:{id:"tab-item"}},[a("v-btn",{attrs:{id:"deleteButton",small:"",color:"error",dark:"",flat:"",outline:""},on:{click:t.deleteChannel}},[t._v("\n                    Delete\n                  ")])],1)])],1)],1)],1)],1)}),1)],1)],1)},Ye=[],ta={computed:Object(k["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])({getChannels:"image/getChannels"})),methods:Object(k["a"])({},Object(C["b"])({setChannelOpacity:"image/setChannelOpacity",setActiveChannel:"image/setActiveChannel",setChannelName:"image/setChannelName",deleteChannel:"image/deleteChannel"}))},ea=ta,aa=(a("d36d"),Object(c["a"])(ea,Xe,Ye,!1,null,"08f5e5fa",null));aa.options.__file="Images.vue";var ia=aa.exports;d()(aa,{VBtn:T["a"],VCard:Lt["a"],VFlex:Pt["a"],VIcon:M["a"],VLayout:te["a"],VList:Nt["a"],VListGroup:$e["a"],VListTile:V["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VSlider:Ne["a"],VTab:He["a"],VTabItem:Ke["a"],VTabs:Ue["a"],VTabsItems:qe["a"],VTextField:Mt["a"],VToolbar:We["a"],VToolbarTitle:Ee["a"]});var oa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Properties\n      ")]),a("v-spacer")],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            No. selected items:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(t.selectedItems.length)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Fill colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedFillColor,type:"fill"}})],1)],1)],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Stroke colour:\n          ")])],1),a("v-list-tile-action",[a("v-btn",{staticClass:"action pointers-no",attrs:{icon:""}},[a("colour-picker",{staticClass:"pointers-please",attrs:{color:t.selectedStrokeColor,type:"stroke"}})],1)],1)],1)],1)],1)],1)},na=[],ra=(a("2caf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-dialog",{attrs:{width:"225px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("a",{attrs:{slot:"activator"},slot:"activator"},[a("div",{staticClass:"color-tile",style:{"background-color":t.color.style}})]),a("v-card",[a("colour-picker",{attrs:{id:"picker"},model:{value:t.colorPick,callback:function(e){t.colorPick=e},expression:"colorPick"}})],1)],1)}),sa=[],la=a("c345"),ca={components:{"colour-picker":la["Chrome"]},props:{color:{type:Object,default:function(){return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}},type:{type:String,default:function(){return"fill"}}},data:function(){return{dialog:!1,colorPick:{hsl:this.color.obj}}},computed:Object(k["a"])({},Object(C["d"])({selectedItems:function(t){return t.annotation.selectedItems}})),watch:{dialog:function(t){t?this.colorPick={hsl:this.color.obj}:t||this.selectedItems.length>0&&("fill"===this.type?this.changeItemsFillColor(this.selectedItems):"stroke"===this.type&&this.changeItemsStrokeColor(this.selectedItems))}},methods:{changeItemsFillColor:function(t){var e=this;t.map(function(t){t.fillColor=new _.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})},changeItemsStrokeColor:function(t){var e=this;t.map(function(t){t.strokeColor=new _.a.Color({hue:e.colorPick.hsl.h,saturation:e.colorPick.hsl.s,lightness:e.colorPick.hsl.l,alpha:e.colorPick.hsl.a})})}}},ua=ca,da=(a("882c"),a("169a")),pa=Object(c["a"])(ua,ra,sa,!1,null,"2af7e386",null);pa.options.__file="ColorPicker.vue";var va=pa.exports;d()(pa,{VCard:Lt["a"],VDialog:da["a"]});var ha={components:{"colour-picker":va},computed:Object(k["a"])({},Object(C["d"])({selectedItems:function(t){return t.annotation.selectedItems}}),{selectedFillColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.fillColor&&t.fillColor.hue===a[0].fillColor.hue&&t.fillColor.saturation===a[0].fillColor.saturation&&t.fillColor.lightness===a[0].fillColor.lightness&&t.fillColor.alpha===a[0].fillColor.alpha})){var t={h:this.selectedItems[0].fillColor.hue,s:this.selectedItems[0].fillColor.saturation,l:this.selectedItems[0].fillColor.lightness,a:this.selectedItems[0].fillColor.alpha};return{style:this.selectedItems[0].fillColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}},selectedStrokeColor:function(){if(this.selectedItems.length>0&&this.selectedItems.every(function(t,e,a){return null!==t.strokeColor&&t.strokeColor.hue===a[0].strokeColor.hue&&t.strokeColor.saturation===a[0].strokeColor.saturation&&t.strokeColor.lightness===a[0].strokeColor.lightness&&t.strokeColor.alpha===a[0].strokeColor.alpha})){var t={h:this.selectedItems[0].strokeColor.hue,s:this.selectedItems[0].strokeColor.saturation,l:this.selectedItems[0].strokeColor.lightness,a:this.selectedItems[0].strokeColor.alpha};return{style:this.selectedItems[0].strokeColor.toCSS(),obj:t}}return{style:"transparent",obj:{h:0,s:0,l:0,a:0}}}}),methods:Object(k["a"])({},Object(C["c"])({getSelectedItems:"annotation/getSelectedItems"}))},ma=ha,fa=(a("1ce3"),Object(c["a"])(ma,oa,na,!1,null,"c537d106",null));fa.options.__file="Properties.vue";var ga=fa.exports;d()(fa,{VBtn:T["a"],VCard:Lt["a"],VList:Nt["a"],VListTile:V["a"],VListTileAction:ee["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VSpacer:ze["a"],VToolbar:We["a"],VToolbarTitle:Ee["a"]});var ba=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1"},[a("v-card",{staticClass:"panel"},[a("v-toolbar",{attrs:{id:"toolbar",dense:""}},[a("v-toolbar-title",{staticClass:"toolBarTitle"},[t._v("\n        Validations\n      ")])],1),a("v-list",{attrs:{id:"list"}},[a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Prediction:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.prediction)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Score:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.score)+"\n        ")])],1),a("v-list-tile",[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n            Weight:\n          ")])],1),a("v-list-tile-action",[t._v("\n          "+t._s(this.weight)+"\n        ")])],1),a("v-list-group",{attrs:{"no-action":""}},[a("v-list-tile",{staticClass:"list-hotfix",attrs:{slot:"activator","no-action":""},slot:"activator"},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n                Validation labels\n              ")])],1)],1),t._l(t.users,function(e,i){return a("v-list-tile",{key:i,attrs:{id:"tab-item"}},[a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"faIcons"},[t._v("\n\n                "+t._s(e)+"\n\n              ")])],1)],1)})],2)],1)],1)],1)},ya=[],wa=(a("57e7"),{computed:Object(k["a"])({},Object(C["d"])({selected:function(t){return t.annotation.selectedItems[0]}}),{prediction:function(){return this.selected?this.selected.data.class:""},score:function(){return this.selected?Math.round(100*this.selected.data.data.score)/100:""},weight:function(){return this.selected?Math.round(100*this.selected.data.data.validationWeight)/100:""},validations:function(){return this.selected?this.selected.data.data.validations:""},users:function(){if(this.selected){var t=[];return this.selected.data.data.validations.map(function(e){return t.indexOf(e.user)>-1||t.push(e.user),t}),t}return""},userValidations:function(){if(this.selected){var t={};return this.selected.data.data.validations.map(function(e){t[e.user]=e}),console.log(t),t}return""}}),methods:Object(k["a"])({},Object(C["b"])({}))}),ka=wa,Ca=(a("0109"),Object(c["a"])(ka,ba,ya,!1,null,"6625936a",null));Ca.options.__file="Validations.vue";var Oa=Ca.exports;d()(Ca,{VCard:Lt["a"],VList:Nt["a"],VListGroup:$e["a"],VListTile:V["a"],VListTileAction:ee["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VToolbar:We["a"],VToolbarTitle:Ee["a"]});var xa={components:{"app-navigator":Fe,"app-layers":Qe,"app-images":ia,"app-properties":ga,"app-validations":Oa},computed:Object(k["a"])({},Object(C["d"])({studioDrawer:function(t){return t.app.studioDrawer}})),methods:Object(k["a"])({},Object(C["b"])({setStudioDrawerState:"app/setStudioDrawerState"}),{updateStudioDrawerState:function(t){t||this.setStudioDrawerState(t)}})},Ia=xa,_a=(a("073b"),Object(c["a"])(Ia,Te,Ve,!1,null,"b71f88e8",null));_a.options.__file="Studio.vue";var ja=_a.exports;d()(_a,{VNavigationDrawer:_e["a"]});var Sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.steps?a("div",{attrs:{id:"stepper-container"}},[a("v-stepper",{staticClass:"pointers-please",attrs:{id:"stepper",value:t.activeStep+1,"non-linear":""}},[a("v-stepper-header",{attrs:{id:"stepper-header"}},[t._l(t.steps,function(e,i){return[a("v-stepper-step",{key:i,attrs:{step:e.id,editable:""},nativeOn:{click:function(a){t.activateStep(e)}}}),e.id!==t.steps.length?a("v-divider",{key:e.length}):t._e()]})],2)],1),a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},["validate"===t.steps[t.activeStep].type?a("app-validate"):a("p",{attrs:{id:"hint"}},[t._v("\n      "+t._s(t.steps[t.activeStep].instruction)+"\n    ")])],1)],1):t._e()},Ta=[],Va=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-1",attrs:{id:"hint-card"}},[a("div",{attrs:{id:"hint"}},[t._v("\n\n    "+t._s(t.steps[t.activeStep].instruction)+"\n\n    "),a("v-divider"),this.validationStarted?a("v-container",{attrs:{fluid:"",id:"validation-controls"}},[a("v-layout",[a("v-flex",{attrs:{xs2:""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:t.goToPreviousItem}},[a("v-icon",[t._v(" arrow_back ")])],1)],1),a("v-flex",{attrs:{xs8:""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"item-title"}},[t._v("\n                Item: "+t._s(this.activeItemIndex+1)+" / "+t._s(this.getItemsForValidation().length)+"\n              ")])]),a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"item-title"}},[t._v("\n                Class: "+t._s(this.paperItem.data.validationScore)+"\n              ")])]),a("v-flex",{attrs:{xs4:""}},[a("span",{attrs:{id:"item-title"}},[t._v("\n                Score: "+t._s(Math.round(100*this.getItemsForValidation()[this.activeItemIndex].predictionScore)/100)+"\n              ")])])],1),a("v-divider"),a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-btn",{attrs:{small:"",color:"success",outline:!("correct"===this.activeValidationButton),depressed:"correct"===this.activeValidationButton},on:{click:t.markCorrect}},[t._v("\n              Correct\n            ")]),a("v-btn",{attrs:{small:"",color:"warning",outline:!("flag"===this.activeValidationButton),depressed:"flag"===this.activeValidationButton},on:{click:t.flagForReview}},[t._v("\n              Flag for review\n            ")]),a("v-btn",{attrs:{small:"",color:"error",outline:!("incorrect"===this.activeValidationButton),depressed:"incorrect"===this.activeValidationButton},on:{click:t.markIncorrect}},[t._v("\n              Incorrect\n            ")]),a("v-btn",{attrs:{small:"",color:"blue",outline:""},on:{click:function(e){return e.stopPropagation(),t.createNewItem(e)}}},[t._v("\n              Create\n            ")])],1)],1),a("v-flex",{attrs:{xs2:"","text-xs-right":""}},[a("v-btn",{attrs:{flat:"",icon:"",color:"primary"},on:{click:t.goToNextItem}},[a("v-icon",[t._v(" arrow_forward ")])],1)],1)],1)],1):a("div",[a("v-btn",{attrs:{small:"",color:"primary"},on:{click:t.startValidation}},[t._v(" Start ")])],1)],1)])},Da=[],Aa={computed:Object(k["a"])({},Object(C["d"])({activeStep:function(t){return t.app.activeStep},steps:function(t){return t.app.steps},viewport:function(t){return t.image.OSDviewer.viewport},activeValidationIndex:function(t){return t.app.activeValidationIndex},uid:function(t){return t.app.uid}})),data:function(){return{label:"",validationStarted:!1,activeItemIndex:0,activeValidationButton:"",paperItem:null,validationStartTime:0,initialItemData:{}}},mounted:function(){window.addEventListener("keydown",this.keyDown)},destroyed:function(){window.removeEventListener("keydown",this.keyDown)},methods:Object(k["a"])({},Object(C["c"])({getItemsForValidation:"annotation/getItemsForValidation"}),Object(C["b"])({saveProject:"app/saveProject",setActiveValidationIndex:"app/setActiveValidationIndex",updateValidation:"app/updateValidation",createNewItemInDB:"app/createNewItem"}),{goToNextItem:function(){this.validationStarted&&(this.saveValidation(),this.label="",this.paperItem.strokeColor={hue:170,saturation:.44,lightness:.69,alpha:1}),this.activeItemIndex===this.getItemsForValidation().length-1?this.activeItemIndex=0:this.activeItemIndex++,this.goToItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem=this.findPaperItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem.strokeColor={hue:60,saturation:1,lightness:.85,alpha:1},this.initialItemData={x:this.paperItem.bounds.x,y:this.paperItem.bounds.y,width:this.paperItem.bounds.width,height:this.paperItem.bounds.height},this.validationStartTime=$t()()},goToPreviousItem:function(){this.label="",0===this.activeItemIndex?this.activeItemIndex=this.getItemsForValidation().length-1:this.activeItemIndex--,this.goToItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem.strokeColor={hue:170,saturation:.44,lightness:.69,alpha:1},this.paperItem=this.findPaperItem(this.getItemsForValidation()[this.activeItemIndex]),this.paperItem.strokeColor={hue:60,saturation:1,lightness:.85,alpha:1},this.initialItemData={x:this.paperItem.bounds.x,y:this.paperItem.bounds.y,width:this.paperItem.bounds.width,height:this.paperItem.bounds.height},this.validationStartTime=$t()()},markCorrect:function(){var t=this;this.label="megakaryocyte",this.paperItem.strokeColor="#4CAF50",this.paperItem.fillColor="#4CAF50",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.goToNextItem(),t.setActiveValidationIndex(t.activeItemIndex)},500)},flagForReview:function(){var t=this;this.label="flag",this.paperItem.strokeColor="#FFC107",this.paperItem.fillColor="#FFC107",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.goToNextItem(),t.setActiveValidationIndex(t.activeItemIndex)},500)},markIncorrect:function(){var t=this;this.label="negative",this.paperItem.strokeColor="#FF5252",this.paperItem.fillColor="#FF5252",this.flashAndFadeFillColor(this.paperItem),setTimeout(function(){t.goToNextItem(),t.setActiveValidationIndex(t.activeItemIndex)},500)},createNewItem:function(){var t=_.a.project.getItems({selected:!0,class:_.a.Path})[0];this.createNewItemInDB({timestamp:new Date,boundingBox:{height:t.bounds.height,width:t.bounds.width,x:t.bounds.x,y:t.bounds.y}})},removeItem:function(){console.log("want to remove item");var t=_.a.project.getItems({selected:!0,class:_.a.Path})[0];console.log(t)},goToItem:function(t){this.viewport.fitBoundsWithConstraints(this.viewport.imageToViewportRectangle(new be.a.Rect(t.x,t.y,t.width,t.height)),!0)},findPaperItem:function(t){return _.a.project.getItem({inside:new _.a.Rectangle(t.x,t.y,t.width,t.height),class:"Path"})},keyDown:function(t){switch(t.keyCode){case 39:this.goToNextItem();break;case 37:this.goToPreviousItem();break;case 49:t.getModifierState("Meta")||this.markCorrect();break;case 50:t.getModifierState("Meta")||this.flagForReview();break;case 51:t.getModifierState("Meta")||this.markIncorrect();break;case 52:t.getModifierState("Meta")||this.createNewItem();break}},flashAndFadeFillColor:function(t){t.fillColor.alpha=.6;var e=window.setInterval(function(){t.fillColor.alpha=t.fillColor.alpha-.05},100);window.setTimeout(function(){window.clearInterval(e)},800)},startValidation:function(){0===this.activeValidationIndex?this.activeItemIndex=this.getItemsForValidation().length-1:this.activeItemIndex=this.activeValidationIndex-1,this.goToNextItem(),this.validationStarted=!0},saveValidation:function(){var t=this.checkIfBoundingBoxAdjusted(),e=this.checkIfLabelAdded(),a={docName:this.paperItem.data.name,timestamp:new Date,validation:e,boundingBox:t};this.updateValidation(a)},checkIfLabelAdded:function(){return!!this.label&&{uid:this.uid,label:this.label,decisionTimeInMs:$t()()-this.validationStartTime}},checkIfBoundingBoxAdjusted:function(){var t={x:this.paperItem.bounds.x,y:this.paperItem.bounds.y,width:this.paperItem.bounds.width,height:this.paperItem.bounds.height};return fe()(t)!==fe()(this.initialItemData)&&t}})},La=Aa,Pa=(a("2e19"),Object(c["a"])(La,Va,Da,!1,null,"1b3dceea",null));Pa.options.__file="Validate.vue";var Na=Pa.exports;d()(Pa,{VBtn:T["a"],VContainer:Yt["a"],VDivider:Ie["a"],VFlex:Pt["a"],VIcon:M["a"],VLayout:te["a"]});var Wa={components:{"app-validate":Na},computed:Object(k["a"])({},Object(C["d"])({activeStep:function(t){return t.app.activeStep},steps:function(t){return t.app.steps}})),methods:Object(k["a"])({},Object(C["b"])({setActiveStep:"app/setActiveStep",saveProject:"app/saveProject"}),{activateStep:function(t){this.setActiveStep(t),this.saveProject({notification:!1})}})},Ea=Wa,Ma=(a("42a0"),a("7e85")),Fa=a("9c54"),Ba=a("56a4"),Za=Object(c["a"])(Ea,Sa,Ta,!1,null,"563c406a",null);Za.options.__file="Stepper.vue";var Ga=Za.exports;d()(Za,{VDivider:Ie["a"],VStepper:Ma["a"],VStepperHeader:Fa["a"],VStepperStep:Ba["a"]});var Ra=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"elevation-2 pointers-please",attrs:{id:"view"}},[a("app-osd-canvas"),a("app-annotation-canvas")],1)},$a=[],za=(a("a481"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"osd-canvas"}})}),Ha=[],Ka={mounted:function(){this.setupOsdCanvas("osd-canvas")},methods:Object(k["a"])({},Object(C["b"])({setupOsdCanvas:"image/setupOsdCanvas"}))},Ua=Ka,qa=(a("dfa3"),Object(c["a"])(Ua,za,Ha,!1,null,null,null));qa.options.__file="OSDCanvas.vue";var Ja=qa.exports,Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("canvas",{attrs:{id:"annotation-canvas"}})},Xa=[],Ya={mounted:function(){_.a.setup("annotation-canvas"),document.getElementById("pan").click()}},ti=Ya,ei=(a("89cf"),Object(c["a"])(ti,Qa,Xa,!1,null,null,null));ei.options.__file="AnnotationCanvas.vue";var ai=ei.exports,ii={components:{"app-osd-canvas":Ja,"app-annotation-canvas":ai},computed:Object(k["a"])({},Object(C["d"])({imageName:function(t){return t.image.imageName}})),watch:{imageName:function(){this.loadProject()}},mounted:function(){this.imageName?this.loadProject():this.$router.replace("/")},methods:Object(k["a"])({},Object(C["b"])({loadProject:"app/loadProject"}))},oi=ii,ni=(a("0601"),Object(c["a"])(oi,Ra,$a,!1,null,"9528a876",null));ni.options.__file="View.vue";var ri=ni.exports,si=function(){var t=this,e=t.$createElement,a=t._self._c||e;return-1===["loading"].indexOf(t.$route.name)?a("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:"",dark:"",dense:"",app:"","clipped-right":"","clipped-left":""}},[a("div",{attrs:{id:"toolbar-toggle"}},[a("v-toolbar-side-icon",{on:{click:function(e){t.toggleToolsDrawer()}}})],1),a("v-toolbar-title",{staticClass:"white--text"},[t._v("\n    AIDA\n  ")]),a("v-spacer"),a("app-save"),a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[t._v("\n        apps\n      ")])],1),a("v-btn",{attrs:{icon:"",href:"https://aida.gitbook.io/docs/"}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1),a("div",[a("v-toolbar-side-icon",{on:{click:function(e){t.toggleStudioDrawer()}}})],1)],1):t._e()},li=[],ci=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-dialog",{staticClass:"pointers-please",attrs:{"max-width":"900"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-btn",{attrs:{slot:"activator",icon:""},slot:"activator"},[a("v-icon",[t._v("\n        settings\n      ")])],1),a("v-card",[a("v-container",{attrs:{id:"container"}},[a("v-layout",[a("v-navigation-drawer",{attrs:{permanent:""}},[a("v-toolbar",{staticClass:"transparent",attrs:{flat:""}},[a("v-list",{staticClass:"pa-0"},[a("v-list-tile",{attrs:{avatar:""}},[a("v-list-tile-avatar",[a("v-icon",[t._v(" settings ")])],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v("Settings")])],1)],1)],1)],1),a("v-list",[a("v-divider"),a("v-list-tile",{class:["project"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="project"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Project ")])],1)],1),a("v-list-tile",{class:["annotation"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="annotation"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Upload Annotation ")])],1)],1),a("v-list-tile",{class:["image"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="image"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Add an Image ")])],1)],1),a("v-list-tile",{class:["steps"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="steps"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Steps ")])],1)],1),a("v-list-tile",{class:["tools"===t.settings?"faIconsActive":"faIcons"],on:{click:function(e){t.settings="tools"}}},[a("v-list-tile-action",[a("v-icon")],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(" Tools ")])],1)],1)],1)],1),a("div",{attrs:{id:"content"}},["project"===t.settings?a("app-project-settings"):t._e(),"annotation"===t.settings?a("app-annotation-settings"):t._e(),"image"===t.settings?a("app-image-settings"):t._e(),"steps"===t.settings?a("app-step-settings"):t._e(),"tools"===t.settings?a("app-tool-settings"):t._e()],1)],1),a("v-divider"),a("v-layout",{attrs:{"justify-end":""}},[a("v-btn",{attrs:{color:"blue darken-1",flat:""},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("\n            Close\n          ")])],1)],1)],1)],1)],1)},ui=[],di=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-text-field",{attrs:{value:t.projectName,name:"input-3",label:"Project Name"},on:{change:t.setProjectName},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.setProjectName(e):null}}})],1)],1)],1)},pi=[],vi={computed:Object(k["a"])({},Object(C["d"])({projectName:function(t){return t.annotation.project.name}})),methods:Object(k["a"])({},Object(C["b"])({setProjectName:"annotation/setProjectName"}))},hi=vi,mi=Object(c["a"])(hi,di,pi,!1,null,null,null);mi.options.__file="ProjectSettings.vue";var fi=mi.exports;d()(mi,{VContainer:Yt["a"],VFlex:Pt["a"],VLayout:te["a"],VTextField:Mt["a"]});var gi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[t._v("\n\n      Plan to add upload functionality for annotation data.\n\n    ")])],1)],1)},bi=[],yi={computed:Object(k["a"])({},Object(C["d"])({viewSize:function(t){return t.image.view.viewSize},imageZoom:function(t){return t.image.view.imageZoom},imageCenter:function(t){return t.image.view.imageCenter}}))},wi=yi,ki=Object(c["a"])(wi,gi,bi,!1,null,null,null);ki.options.__file="AnnotationSettings.vue";var Ci=ki.exports;d()(ki,{VContainer:Yt["a"],VFlex:Pt["a"],VLayout:te["a"]});var Oi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-layout",[a("v-flex",{attrs:{xs12:""}},[a("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:t.valid,callback:function(e){t.valid=e},expression:"valid"}},[a("v-text-field",{attrs:{rules:t.nameRules,label:"Name",required:""},model:{value:t.newName,callback:function(e){t.newName=e},expression:"newName"}}),a("v-radio-group",{model:{value:t.newType,callback:function(e){t.newType=e},expression:"newType"}},[a("v-radio",{attrs:{label:"Simple",value:"simple"}}),a("v-radio",{attrs:{label:"DZI",value:"dzi"}})],1),a("v-text-field",{attrs:{rules:t.sourceRules,label:"Source",required:""},model:{value:t.newSource,callback:function(e){t.newSource=e},expression:"newSource"}}),a("v-btn",{attrs:{disabled:!t.valid},on:{click:function(e){t.loadImages([{name:t.newName,type:t.newType,source:t.newSource}])}}},[t._v("\n          submit\n        ")])],1)],1)],1)],1)},xi=[],Ii={data:function(){return{valid:!1,newName:"",nameRules:[function(t){return!!t||"Name is required"}],newType:"simple",newSource:"",sourceRules:[function(t){return!!t||"Source location is required"}]}},computed:Object(k["a"])({},Object(C["d"])({viewer:function(t){return t.image.OSDviewer}}),Object(C["c"])({getChannels:"images/getChannels"})),methods:Object(k["a"])({},Object(C["b"])({loadImages:"images/loadImages"}),{submit:function(){this.$refs.form.validate()&&console.log("good to go")}})},_i=Ii,ji=a("4bd4"),Si=a("67b6"),Ti=a("43a6"),Vi=Object(c["a"])(_i,Oi,xi,!1,null,null,null);Vi.options.__file="ImageSettings.vue";var Di=Vi.exports;d()(Vi,{VBtn:T["a"],VContainer:Yt["a"],VFlex:Pt["a"],VForm:ji["a"],VLayout:te["a"],VRadio:Si["a"],VRadioGroup:Ti["a"],VTextField:Mt["a"]});var Ai=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Tools\n")])},Li=[],Pi={props:{editor:{type:Object,default:function(){return{}}}}},Ni=Pi,Wi=Object(c["a"])(Ni,Ai,Li,!1,null,null,null);Wi.options.__file="ToolSettings.vue";var Ei=Wi.exports,Mi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._v("\n  Steps\n")])},Fi=[],Bi={props:{editor:{type:Object,default:function(){return{}}},step:{type:Number,default:1}},data:function(){return{title:""}}},Zi=Bi,Gi=(a("dc2a"),Object(c["a"])(Zi,Mi,Fi,!1,null,"4e5a9117",null));Gi.options.__file="StepSettings.vue";var Ri=Gi.exports,$i={components:{"app-project-settings":fi,"app-annotation-settings":Ci,"app-image-settings":Di,"app-step-settings":Ri,"app-tool-settings":Ei},data:function(){return{dialog:!1,settings:"project"}}},zi=$i,Hi=(a("0eab"),a("c954")),Ki=Object(c["a"])(zi,ci,ui,!1,null,"347b9618",null);Ki.options.__file="Settings.vue";var Ui=Ki.exports;d()(Ki,{VBtn:T["a"],VCard:Lt["a"],VContainer:Yt["a"],VDialog:da["a"],VDivider:Ie["a"],VIcon:M["a"],VLayout:te["a"],VList:Nt["a"],VListTile:V["a"],VListTileAction:ee["a"],VListTileAvatar:Hi["a"],VListTileContent:ae["a"],VListTileTitle:ae["b"],VNavigationDrawer:_e["a"],VToolbar:We["a"]});var qi=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{id:"save-button",icon:""},nativeOn:{click:function(e){t.saveAnnotation()}}},[a("v-icon",[t._v("\n    save\n  ")])],1)},Ji=[],Qi={mounted:function(){window.addEventListener("keydown",this.keyDown)},methods:Object(k["a"])({},Object(C["b"])({saveAnnotation:"annotation/saveAnnotation"}),{keyDown:function(t){"s"!==t.key||!0!==t.metaKey&&!0!==t.ctrlKey||(t.preventDefault(),document.getElementById("save-button").click())}})},Xi=Qi,Yi=Object(c["a"])(Xi,qi,Ji,!1,null,null,null);Yi.options.__file="Save.vue";var to=Yi.exports;d()(Yi,{VBtn:T["a"],VIcon:M["a"]});var eo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){return t.exportData(e)}}},[a("v-icon",{attrs:{small:""}},[t._v("\n    fa-download\n  ")])],1)},ao=[],io={computed:Object(k["a"])({},Object(C["d"])({dataToExport:function(t){return t.annotation.project}})),methods:Object(k["a"])({},Object(C["b"])({refreshAnnotationState:"annotation/refreshAnnotationState"}),{exportData:function(){this.refreshAnnotationState();var t="data:text/json;charset=utf-8,"+encodeURIComponent(fe()(this.dataToExport,null,2)),e=document.createElement("a");e.setAttribute("href",t),e.setAttribute("download","AIDA_annotation.json"),document.body.appendChild(e),e.click(),e.remove()}})},oo=io,no=Object(c["a"])(oo,eo,ao,!1,null,null,null);no.options.__file="Export.vue";var ro=no.exports;d()(no,{VBtn:T["a"],VIcon:M["a"]});var so={components:{"app-settings":Ui,"app-save":to,"app-export":ro},methods:Object(k["a"])({},Object(C["b"])({toggleToolsDrawer:"app/toggleToolsDrawer",toggleStudioDrawer:"app/toggleStudioDrawer"}))},lo=so,co=(a("bab8"),a("706c")),uo=Object(c["a"])(lo,si,li,!1,null,"b1a262e6",null);uo.options.__file="Toolbar.vue";var po=uo.exports;d()(uo,{VBtn:T["a"],VIcon:M["a"],VSpacer:ze["a"],VToolbar:We["a"],VToolbarSideIcon:co["a"],VToolbarTitle:Ee["a"]});var vo={components:{"app-tools":Se,"app-studio":ja,"app-stepper":Ga,"app-view":ri,"app-toolbar":po}},ho=vo,mo=(a("1d03"),Object(c["a"])(ho,g,b,!1,null,"703aa4d8",null));mo.options.__file="Editor.vue";var fo=mo.exports,go=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-toolbar",{staticClass:"primary pointers-please",attrs:{fixed:"",dark:"",dense:"",app:""}},[a("v-toolbar-title",{staticClass:"white--text"},[t._v("\n      AIDA\n    ")]),a("v-spacer"),a("v-btn",{attrs:{icon:"",to:"/"}},[a("v-icon",[t._v("\n        apps\n      ")])],1),a("v-btn",{attrs:{icon:"",href:"https://aida.gitbook.io/docs/"}},[a("v-icon",{attrs:{small:""}},[t._v(" fa-book ")])],1)],1),a("v-container",{attrs:{fluid:""}},[a("v-layout",{attrs:{row:"",wrap:""}},[a("v-flex",{attrs:{xs10:""}},[a("h4",{staticClass:"title mb-3"},[t._v(" Images ")]),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:t.headers,items:t.images,"hide-actions":""},scopedSlots:t._u([{key:"items",fn:function(e){return[a("tr",{on:{mouseover:function(a){t.hoverImage=e.item},mouseout:function(e){t.hoverImage=null}}},[a("td",[t._v(t._s(e.item))]),a("td",[a("v-btn",{staticClass:"text-xs-right",attrs:{flat:"",icon:"",small:"",to:"/loading/"+e.item}},[a("v-tooltip",{attrs:{left:""}},[a("v-icon",{directives:[{name:"show",rawName:"v-show",value:t.hoverImage===e.item,expression:"hoverImage === props.item"}],attrs:{slot:"activator",small:"",color:"#0D47A1"},slot:"activator"},[t._v("launch")]),a("span",[t._v(" View in AIDA ")])],1)],1)],1)])]}}])})],1)],1)],1)],1)},bo=[],yo={components:{Toolbar:po},data:function(){return{headers:[{text:"Name",align:"left",value:"name"},{text:"",sortable:!1}],hoverImage:null}},mounted:function(){this.getData()},computed:Object(C["d"])({images:function(t){return t.app.images}}),methods:Object(k["a"])({},Object(C["b"])({getData:"app/getData"}))},wo=yo,ko=a("8fea"),Co=Object(c["a"])(wo,go,bo,!1,null,null,null);Co.options.__file="Dashboard.vue";var Oo=Co.exports;d()(Co,{VBtn:T["a"],VContainer:Yt["a"],VDataTable:ko["a"],VFlex:Pt["a"],VIcon:M["a"],VLayout:te["a"],VSpacer:ze["a"],VToolbar:We["a"],VToolbarTitle:Ee["a"],VTooltip:D["a"]});var xo=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"container"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs10:"",sm6:"",md4:""}},[a("div",[a("p",{staticClass:"display-3 faded-title-text mb-0"},[t._v(" AIDA ")]),a("p",{staticClass:"headline faded-title-text pt-0"},[t._v(" Annotate Image Data by Assignment ")]),a("v-progress-linear",{attrs:{indeterminate:!0}})],1)])],1)],1)],1)],1)},Io=[],_o=(a("96cf"),a("3b8d")),jo={props:{fileName:{type:String,default:null}},methods:Object(k["a"])({},Object(C["b"])({getImage:"image/addImageToState"})),computed:Object(C["d"])({imageName:function(t){return t.image.imageName}}),mounted:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getImage(this.$route.params.fileName);case 3:this.$router.replace("/"+this.imageName),t.next=10;break;case 6:t.prev=6,t.t0=t["catch"](0),console.log("could not load the data into AIDA"),console.log(t.t0);case 10:case"end":return t.stop()}},t,this,[[0,6]])}));function e(){return t.apply(this,arguments)}return e}()},So=jo,To=(a("0443"),a("8e36")),Vo=Object(c["a"])(So,xo,Io,!1,null,"21fc4672",null);Vo.options.__file="Loading.vue";var Do=Vo.exports;d()(Vo,{VContainer:Yt["a"],VContent:v["a"],VFlex:Pt["a"],VLayout:te["a"],VProgressLinear:To["a"]}),i["a"].use(f["a"]);var Ao=new f["a"]({mode:"history",base:"/",routes:[{path:"/",name:"Dashboard",component:Oo},{path:"/:image",name:"editor",component:fo},{path:"/loading/:fileName",name:"loading",component:Do}]}),Lo={getMaxZoom:function(t){return t.OSDviewer?Math.round(t.OSDviewer.viewport.getMaxZoom()):10},getZoom:function(t){if(t.OSDviewer){var e=t.OSDviewer.viewport.getZoom();return e<100?Math.round(10*e)/10:Math.round(e)}return"na"},getImageWidth:function(t){if(t.OSDviewer)return t.OSDviewer.world.getItemCount()>0?t.OSDviewer.world.getItemAt(0).getContentSize.x:0},getChannels:function(t){var e=[];if(t.OSDviewer)for(var a=t.OSDviewer.world.getItemCount(),i=0;i<a;i++)e.push({channel:t.OSDviewer.world.getItemAt(i),id:i,opacity:t.OSDviewer.world.getItemAt(i).getOpacity(),name:t.imageName,visible:t.OSDviewer.world.getItemAt(i).getOpacity()>0,opacityCache:0});return e}},Po={addImageToState:function(t,e){var a=t.commit;a("addImageToState",e)},setupOsdCanvas:function(t,e){var a=t.commit;a("setupOsdCanvas",e)},addImageToCanvas:function(t){var e=t.commit;e("addImageToCanvas")},resetImageState:function(t){var e=t.commit,a=t.rootState;e("resetImageState",a)},setActiveChannel:function(t,e){var a=t.commit;a("setActiveChannel",e)},toggleChannelOpacity:function(t,e){var a=t.commit;a("toggleChannelOpacity",e)},setChannelOpacity:function(t,e){var a=t.commit,i=t.rootState;a("setChannelOpacity",{input:e,activeChannel:i.app.activeChannel,rootState:i})},setChannelName:function(t,e){var a=t.commit;a("setChannelName",e)},setZoom:function(t,e){var a=t.commit;a("setZoom",e)}},No={addImageToState:function(t,e){t.fileName=e,t.imageName=e.replace(/\.[^\/.]+$/,""),e.indexOf(".dzi")>-1?t.imageType="dzi":t.imageType="simple"},resetImageState:function(t){t.OSDviewer.navigator.destroy(),t.OSDviewer.destroy(),t={OSDviewer:null,OSDworld:null,activeChannel:0,imageName:"",imageType:"dzi"}},setupOsdCanvas:function(t,e){t.OSDviewer=new be.a.Viewer({id:e,showNavigationControl:!1,showNavigator:!0,navigatorId:"navigator"})},addImageToCanvas:function(t){"dzi"===t.imageType?t.OSDviewer.addTiledImage({tileSource:"http://localhost:3000/data/images/"+t.fileName,x:0,y:0,opacity:1}):"simple"===t.imageType&&t.OSDviewer.addSimpleImage({x:0,y:0,opacity:1,url:"http://localhost:3000/data/images/"+t.fileName})},setActiveChannel:function(t,e){t.activeChannel=e},toggleChannelOpacity:function(t,e){e.opacity>0?e.channel.setOpacity(0):e.channel.setOpacity(.7)},setChannelOpacity:function(t,e){var a=e.input,i=1;i="string"===typeof a?Number(a/100):a instanceof KeyboardEvent?a.target.value/100:a,t.OSDviewer.world.getItemAt(t.activeChannel).setOpacity(i)},setChannelName:function(t,e){e instanceof KeyboardEvent?i["a"].set(t.images[t.activeChannel],"name",e.target.value):i["a"].set(t.images[t.activeChannel],"name",e)},setZoom:function(t,e){var a;a=e instanceof KeyboardEvent?Number(e.target.value):Number(e),a>0&&t.OSDviewer.viewport.zoomTo(a)}},Wo={OSDviewer:null,OSDworld:null,activeChannel:0,fileName:"",imageName:"",imageType:"dzi"},Eo={namespaced:!0,state:Wo,getters:Lo,actions:Po,mutations:No},Mo={resetAnnotationState:function(t){var e=t.commit;e("resetAnnotationState")},prepareCanvas:function(t){var e=t.commit,a=t.rootState;e("prepareCanvas",a.app.activeLayer)},newLayer:function(t){var e=t.commit;e("newLayer")},setActiveLayer:function(t,e){var a=t.commit,i=t.dispatch;a("setActiveLayer",e),i("app/setEditorActiveLayer",e,{root:!0})},setLayerOpacity:function(t,e){var a=t.commit;a("setLayerOpacity",e)},setLayerName:function(t,e){var a=t.commit;a("setLayerName",e)},deleteActiveLayer:function(t){var e=t.commit;e("deleteActiveLayer")},setProjectName:function(t,e){var a=t.commit;a("setProjectName",e)},setSelectedItems:function(t,e){var a=t.commit;a("setSelectedItems",e)},refreshAnnotationState:function(t){var e=t.commit;e("refreshAnnotationState")},saveAnnotation:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e){var a,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,i=e.state,o=e.rootState,t.next=3,a("refreshAnnotationState");case 3:le.a.post("http://localhost:3000/save",{imageName:o.image.imageName,annotationData:i.project});case 4:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getAnnotation:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e){var a,i,o,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,i=e.rootState,o="http://localhost:3000/data/annotations/"+i.image.imageName+".json",t.prev=2,t.next=5,le.a.get(o);case 5:n=t.sent,a("loadAnnotation",n.data),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](2),console.log("No annotation data found");case 12:case"end":return t.stop()}},t,this,[[2,9]])}));function e(e){return t.apply(this,arguments)}return e}()},Fo={getSegments:function(t){var e=[];return t.segments.forEach(function(t){e.push({point:{x:t.point.x,y:t.point.y},handleIn:{x:t.handleIn.x,y:t.handleIn.y},handleOut:{x:t.handleOut.x,y:t.handleOut.y}})}),e},getColor:function(t){return{fill:null!==t.fillColor?{hue:t.fillColor.hue,saturation:t.fillColor.saturation,lightness:t.fillColor.lightness,alpha:t.fillColor.alpha}:null,stroke:null!==t.strokeColor?{hue:t.strokeColor.hue,saturation:t.strokeColor.saturation,lightness:t.strokeColor.lightness,alpha:t.strokeColor.alpha}:null}},defaultColors:function(){return[{fill:{hue:170,saturation:.44,lightness:.69,alpha:.7},stroke:{hue:170,saturation:.44,lightness:.69,alpha:1}},{fill:{hue:60,saturation:1,lightness:.85,alpha:.7},stroke:{hue:60,saturation:1,lightness:.85,alpha:1}},{fill:{hue:248,saturation:.3,lightness:.79,alpha:.7},stroke:{hue:248,saturation:.3,lightness:.79,alpha:1}},{fill:{hue:6,saturation:.94,lightness:.72,alpha:.7},stroke:{hue:6,saturation:.94,lightness:.72,alpha:1}},{fill:{hue:205,saturation:.49,lightness:.66,alpha:.7},stroke:{hue:205,saturation:.49,lightness:.66,alpha:1}},{fill:{hue:32,saturation:.97,lightness:.69,alpha:.7},stroke:{hue:32,saturation:.97,lightness:.69,alpha:1}},{fill:{hue:82,saturation:.64,lightness:.64,alpha:.7},stroke:{hue:82,saturation:.64,lightness:.64,alpha:1}},{fill:{hue:329,saturation:.89,lightness:.9,alpha:.7},stroke:{hue:329,saturation:.89,lightness:.9,alpha:1}},{fill:{hue:0,saturation:0,lightness:.85,alpha:.7},stroke:{hue:0,saturation:0,lightness:.85,alpha:1}},{fill:{hue:299,saturation:.32,lightness:.62,alpha:.7},stroke:{hue:299,saturation:.32,lightness:.62,alpha:1}}]}},Bo={resetAnnotationState:function(t){_.a.project.remove(),i["a"].set(t,"project",{name:"An AIDA project",layers:[]})},refreshAnnotationState:function(t){_.a.project.layers.forEach(function(e){i["a"].set(t.project.layers,[e.index],{name:t.project.layers[e.index]?t.project.layers[e.index].name:e.name,opacity:e.opacity,items:[]})}),_.a.project.getItems({className:"Path"}).forEach(function(e){"circle"===e.data.type?t.project.layers[e.layer.index].items.push({class:e.data.class,type:"circle",color:Fo.getColor(e),center:{x:e.position.x,y:e.position.y},radius:e.bounds.width/2,data:e.data.data}):"rectangle"===e.data.type?t.project.layers[e.layer.index].items.push(Object(k["a"])({},e.data,{color:Fo.getColor(e),x:e.bounds.x,y:e.bounds.y,width:e.bounds.width,height:e.bounds.height})):t.project.layers[e.layer.index].items.push({class:e.data.class,type:"path",color:Fo.getColor(e),segments:Fo.getSegments(e),closed:e.closed,data:e.data.data})})},prepareCanvas:function(t,e){_.a.view.element.classList.contains("pointers-no")&&_.a.view.element.classList.remove("pointers-no"),e&&_.a.project.layers[e].activate()},newLayer:function(t){var e=new _.a.Layer({position:_.a.view.center});e.opacity=1,t.project.layers.push({name:"Layer "+(t.project.layers.length+1),opacity:1,items:[]})},setActiveLayer:function(t,e){_.a.project.layers[e].activate()},setLayerOpacity:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value/100:e/100,a>1?a=1:e<0&&(a=0),_.a.project.activeLayer.opacity=a,i["a"].set(t.project.layers[_.a.project.activeLayer.index],"opacity",a)},setLayerName:function(t,e){var a;a=e instanceof KeyboardEvent?e.target.value:e,_.a.project.activeLayer.name=a,i["a"].set(t.project.layers[_.a.project.activeLayer.index],"name",a)},deleteActiveLayer:function(t){t.project.layers.splice(_.a.project.activeLayer.index,1),_.a.project.activeLayer.remove()},setProjectName:function(t,e){e instanceof KeyboardEvent?t.project.name=e.target.value:t.project.name=e},setSelectedItems:function(t,e){t.selectedItems=e},loadAnnotation:function(t,e){e&&(t.project=e,t.project.layers.forEach(function(e){var a=new _.a.Layer;a.opacity=e.opacity,e.items&&e.items.forEach(function(e){var a;a="circle"===e.type?new _.a.Path.Circle({center:e.center,radius:e.radius,data:{type:"circle",countable:!0,class:e.class,data:e.data}}):"rectangle"===e.type?new _.a.Path.Rectangle({point:[e.x,e.y],size:[e.width,e.height],data:{type:"rectangle",class:e.class,data:e.data}}):new _.a.Path({segments:e.segments,closed:!!e.closed&&e.closed,data:{type:"path",class:e.class,data:e.data}}),a.closed&&(e.color&&e.color.fill?"string"===typeof e.color.fill||e.color.fill instanceof String?(a.fillColor=e.color.fill,a.fillColor.alpha=.2):a.fillColor=new _.a.Color({hue:e.color.fill.hue,saturation:e.color.fill.saturation,lightness:e.color.fill.lightness,alpha:e.color.fill.alpha}):(a.fillColor="blue",a.fillColor.alpha=0)),e.color&&e.color.stroke?"string"===typeof e.color.fill||e.color.fill instanceof String?a.strokeColor=e.color.stroke:a.strokeColor=new _.a.Color({hue:e.color.stroke.hue,saturation:e.color.stroke.saturation,lightness:e.color.stroke.lightness,alpha:e.color.stroke.alpha}):a.strokeColor=t.defaultColors[a.layer.index%t.defaultColors.length].stroke})}),e.activeLayer&&_.a.project.layers[e.activeLayer].activate())}},Zo={getColor:function(t,e,a){var i=a.app.activeLayer;return t.defaultColors[i%t.defaultColors.length]},getItemsForValidation:function(t){var e=t.project.layers.filter(function(t){return"Validate"===t.name});return e.length>0?e[0].items:-1}},Go={project:{name:"An AIDA project",layers:[]},selectedItems:[],currentColor:null,defaultColors:Fo.defaultColors()},Ro={namespaced:!0,state:Go,getters:Zo,actions:Mo,mutations:Bo},$o={getData:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e){var a,i,o;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.commit,t.next=3,le.a.post("http://localhost:3000/checkForImages");case 3:return i="http://localhost:3000/data/images.json",t.prev=4,t.next=7,le.a.get(i);case 7:o=t.sent,a("getData",o.data),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](4),console.log(t.t0);case 14:case"end":return t.stop()}},t,this,[[4,11]])}));function e(e){return t.apply(this,arguments)}return e}(),dismissSnackbar:function(t){var e=t.commit;e("dismissSnackbar")},activateSnackbar:function(t,e){var a=t.commit;a("activateSnackbar",e)},synchroniseAnnotationAndOSDCanvas:function(t){var e=t.commit,a=t.rootState;e("synchroniseAnnotationAndOSDCanvas",a.image.OSDviewer)},setActiveStepAndLayer:function(t,e){var a=t.dispatch;a("setActiveLayer",e),a("setActiveStep",e)},setActiveStep:function(t,e){var a=t.commit,i=t.dispatch;"number"===typeof e.specificLayer&&i("annotation/setActiveLayer",e.specificLayer,{root:!0}),a("setActiveStep",e.id-1)},setActiveLayer:function(t,e){var a=t.commit;a("setEditorActiveLayer",e)},toggleSettings:function(t){var e=t.commit;e("toggleSettings")},setActiveValidationIndex:function(t,e){var a=t.commit;a("setActiveValidationIndex",e)},setupForValidation:function(t){var e=t.commit;e("setupForValidation")},loadProject:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return a=e.dispatch,e.commit,t.next=3,a("annotation/getAnnotation",null,{root:!0});case 3:return t.next=5,a("image/addImageToCanvas",null,{root:!0});case 5:a("synchroniseAnnotationAndOSDCanvas");case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),toggleToolsDrawer:function(t){var e=t.commit;e("toggleToolsDrawer")},setToolsDrawerState:function(t,e){var a=t.commit;a("setToolsDrawerState",e)},toggleStudioDrawer:function(t){var e=t.commit;e("toggleStudioDrawer")},setStudioDrawerState:function(t,e){var a=t.commit;a("setStudioDrawerState",e)}},zo={getData:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e,a){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.images=a;case 1:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),activateSnackbar:function(t,e){t.snackbar.active=!0,t.snackbar.text=e.text?e.text:"notification",t.snackbar.color=e.color?e.color:"info",t.snackbar.timeout=e.timeout?e.timeout:2e3},dismissSnackbar:function(t){t.snackbar.active=!1},synchroniseAnnotationAndOSDCanvas:function(t,e){var a=t.strokeScale;e.addHandler("update-viewport",function(t){var i=e.viewport.getZoom(!0),o=e.world.getItemAt(0);_.a.view.zoom=o.viewportToImageZoom(i);var n=o.viewportToImageCoordinates(e.viewport.getCenter(!0));_.a.view.center=new _.a.Point(n.x,n.y),_.a.project.getItems({class:_.a.Path}).map(function(t){t.strokeWidth=o.getContentSize().x*a/(1e3*i)})}),e.addHandler("resize",function(t){var a=e.world.getItemAt(0);_.a.view.viewSize.width=t.newContainerSize.x,_.a.view.viewSize.height=t.newContainerSize.y;var i=a.viewportToImageCoordinates(e.viewport.getCenter(!0));_.a.view.center=new _.a.Point(i.x,i.y)})},setActiveStep:function(t,e){t.activeStep=e},setEditorActiveLayer:function(t,e){t.activeLayer=e},toggleSettings:function(t){t.settingsFlag=!t.settingsFlag},setActiveValidationIndex:function(t,e){t.activeValidationIndex=e},setValidationSteps:function(t){t.toolsDrawer=!1,t.studioDrawer=!1,t.steps=[{id:1,instruction:"Cycle through each of the predicted Megakaryocyte classifications and verify whether the prediction is correct or incorrect. In cases where you are not certain, flag the prediction for review.",type:"validate"}]},updateValidation:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e,a){var i,o,n,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:i=firebase.firestore(),a.validation&&(o=i.collection("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+a.docName+"/validations"),o.add(Object(k["a"])({timestamp:a.timestamp},a.validation)),n=i.doc("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+a.docName),n.update({"boundingBox.validated":!0})),a.boundingBox&&(r=i.collection("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+a.docName+"/boundingBoxes"),r.add(Object(k["a"])({timestamp:a.timestamp,user:e.uid},a.boundingBox)),s=i.doc("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+a.docName),s.update({boundingBox:Object(k["a"])({},a.boundingBox,{validated:!0})}));case 3:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}(),toggleToolsDrawer:function(t){t.toolsDrawer=!t.toolsDrawer},toggleStudioDrawer:function(t){t.studioDrawer=!t.studioDrawer},setToolsDrawerState:function(t,e){t.toolsDrawer=e},setStudioDrawerState:function(t,e){t.studioDrawer=e},createNewItem:function(){var t=Object(_o["a"])(regeneratorRuntime.mark(function t(e,a){var i,o,n,r,s;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return console.log("CreateNewItem mutation fired"),i=firebase.firestore(),o=i.collection("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes"),console.log(o.path),t.next=6,o.add({boundingBox:Object(k["a"])({},a.boundingBox,{validated:!0}),class:{label:"megakaryocyte",basicValidation:!0,expertValidation:!1,validationScore:1},segmentation:{cell:null,nucleus:null,validated:null}});case 6:n=t.sent,console.log("Created a new item document: "+n.id),r=i.collection("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+n.id+"/boundingBoxes"),r.add(Object(k["a"])({timestamp:a.timestamp,uid:e.uid},a.boundingBox)),s=i.collection("/studies/"+a.studyName+"/images/"+a.imageName+"/megakaryocytes/"+n.id+"/validations"),s.add({decisionTimeInMs:null,label:"megakaryocyte",timestamp:a.timestamp,user:e.uid});case 12:case"end":return t.stop()}},t,this)}));function e(e,a){return t.apply(this,arguments)}return e}()},Ho={getStepTools:function(t){return t.steps&&t.steps[t.activeStep].tools?t.steps[t.activeStep].tools:["pan","circle","rectangle","path","pencil","polygon","move","node","count","delete","megas","filter"]}},Ko={toolsDrawer:!0,studioDrawer:!0,snackbar:{active:!1,text:"this is a notification",color:"info",timeout:3e3},type:"dzi",activeChannel:0,activeLayer:0,activeStep:0,steps:null,settingsFlag:!1,activeValidationIndex:0,strokeScale:5,images:[]},Uo={namespaced:!0,state:Ko,actions:$o,mutations:zo,getters:Ho};i["a"].use(C["a"]);var qo=new C["a"].Store({modules:{app:Uo,image:Eo,annotation:Ro}});a("585e");i["a"].config.productionTip=!1,new i["a"]({router:Ao,store:qo,render:function(t){return t(m)}}).$mount("#app")},"585e":function(t,e,a){},"5ac3":function(t,e,a){},"5beb":function(t,e,a){},"5ef2":function(t,e,a){},"643a":function(t,e,a){},"6b5f":function(t,e,a){},"6bba":function(t,e,a){},"79de":function(t,e,a){},"7db0":function(t,e,a){"use strict";var i=a("af50"),o=a.n(i);o.a},8381:function(t,e,a){},"882c":function(t,e,a){"use strict";var i=a("d7e8"),o=a.n(i);o.a},"89cf":function(t,e,a){"use strict";var i=a("79de"),o=a.n(i);o.a},"8b38":function(t,e,a){"use strict";var i=a("6b5f"),o=a.n(i);o.a},"8bfe":function(t,e,a){},"8cc7":function(t,e,a){},9865:function(t,e,a){"use strict";var i=a("f959"),o=a.n(i);o.a},"9a0c":function(t,e,a){},a45a:function(t,e,a){"use strict";var i=a("ab99"),o=a.n(i);o.a},a584:function(t,e,a){},a84a:function(t,e,a){},ab99:function(t,e,a){},af50:function(t,e,a){},b294:function(t,e,a){},b517:function(t,e,a){},bab8:function(t,e,a){"use strict";var i=a("5ef2"),o=a.n(i);o.a},cf97:function(t,e,a){},cfca:function(t,e,a){},d36d:function(t,e,a){"use strict";var i=a("a584"),o=a.n(i);o.a},d7e8:function(t,e,a){},d886:function(t,e,a){"use strict";var i=a("8bfe"),o=a.n(i);o.a},dc2a:function(t,e,a){"use strict";var i=a("2d34"),o=a.n(i);o.a},dfa3:function(t,e,a){"use strict";var i=a("9a0c"),o=a.n(i);o.a},dfca:function(t,e,a){"use strict";var i=a("2571"),o=a.n(i);o.a},ec8b:function(t,e,a){},f147:function(t,e,a){},f7b0:function(t,e,a){"use strict";var i=a("2eb7"),o=a.n(i);o.a},f959:function(t,e,a){},fd70:function(t,e,a){}});
//# sourceMappingURL=app.93dbda56.js.map